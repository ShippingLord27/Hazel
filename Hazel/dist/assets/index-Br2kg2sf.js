(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function QT(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var bm={exports:{}},Kl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function _S(){if(Pv)return Kl;Pv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var h=null;if(c!==void 0&&(h=""+c),o.key!==void 0&&(h=""+o.key),"key"in o){c={};for(var p in o)p!=="key"&&(c[p]=o[p])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:h,ref:o!==void 0?o:null,props:c}}return Kl.Fragment=e,Kl.jsx=n,Kl.jsxs=n,Kl}var kv;function vS(){return kv||(kv=1,bm.exports=_S()),bm.exports}var d=vS(),Am={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function ES(){if(Vv)return Ie;Vv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function A(j){return j===null||typeof j!="object"?null:(j=w&&j[w]||j["@@iterator"],typeof j=="function"?j:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,H={};function L(j,ne,oe){this.props=j,this.context=ne,this.refs=H,this.updater=oe||C}L.prototype.isReactComponent={},L.prototype.setState=function(j,ne){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ne,"setState")},L.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function J(){}J.prototype=L.prototype;function X(j,ne,oe){this.props=j,this.context=ne,this.refs=H,this.updater=oe||C}var ie=X.prototype=new J;ie.constructor=X,D(ie,L.prototype),ie.isPureReactComponent=!0;var ue=Array.isArray,ce={H:null,A:null,T:null,S:null,V:null},fe=Object.prototype.hasOwnProperty;function P(j,ne,oe,se,pe,xe){return oe=xe.ref,{$$typeof:i,type:j,key:ne,ref:oe!==void 0?oe:null,props:xe}}function R(j,ne){return P(j.type,ne,void 0,void 0,void 0,j.props)}function I(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function O(j){var ne={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(oe){return ne[oe]})}var k=/\/+/g;function U(j,ne){return typeof j=="object"&&j!==null&&j.key!=null?O(""+j.key):ne.toString(36)}function N(){}function yt(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(N,N):(j.status="pending",j.then(function(ne){j.status==="pending"&&(j.status="fulfilled",j.value=ne)},function(ne){j.status==="pending"&&(j.status="rejected",j.reason=ne)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function ut(j,ne,oe,se,pe){var xe=typeof j;(xe==="undefined"||xe==="boolean")&&(j=null);var Ae=!1;if(j===null)Ae=!0;else switch(xe){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(j.$$typeof){case i:case e:Ae=!0;break;case v:return Ae=j._init,ut(Ae(j._payload),ne,oe,se,pe)}}if(Ae)return pe=pe(j),Ae=se===""?"."+U(j,0):se,ue(pe)?(oe="",Ae!=null&&(oe=Ae.replace(k,"$&/")+"/"),ut(pe,ne,oe,"",function(Pn){return Pn})):pe!=null&&(I(pe)&&(pe=R(pe,oe+(pe.key==null||j&&j.key===pe.key?"":(""+pe.key).replace(k,"$&/")+"/")+Ae)),ne.push(pe)),1;Ae=0;var St=se===""?".":se+":";if(ue(j))for(var et=0;et<j.length;et++)se=j[et],xe=St+U(se,et),Ae+=ut(se,ne,oe,xe,pe);else if(et=A(j),typeof et=="function")for(j=et.call(j),et=0;!(se=j.next()).done;)se=se.value,xe=St+U(se,et++),Ae+=ut(se,ne,oe,xe,pe);else if(xe==="object"){if(typeof j.then=="function")return ut(yt(j),ne,oe,se,pe);throw ne=String(j),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function K(j,ne,oe){if(j==null)return j;var se=[],pe=0;return ut(j,se,"","",function(xe){return ne.call(oe,xe,pe++)}),se}function ae(j){if(j._status===-1){var ne=j._result;ne=ne(),ne.then(function(oe){(j._status===0||j._status===-1)&&(j._status=1,j._result=oe)},function(oe){(j._status===0||j._status===-1)&&(j._status=2,j._result=oe)}),j._status===-1&&(j._status=0,j._result=ne)}if(j._status===1)return j._result.default;throw j._result}var me=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function Ye(){}return Ie.Children={map:K,forEach:function(j,ne,oe){K(j,function(){ne.apply(this,arguments)},oe)},count:function(j){var ne=0;return K(j,function(){ne++}),ne},toArray:function(j){return K(j,function(ne){return ne})||[]},only:function(j){if(!I(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ie.Component=L,Ie.Fragment=n,Ie.Profiler=o,Ie.PureComponent=X,Ie.StrictMode=r,Ie.Suspense=g,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(j){return ce.H.useMemoCache(j)}},Ie.cache=function(j){return function(){return j.apply(null,arguments)}},Ie.cloneElement=function(j,ne,oe){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var se=D({},j.props),pe=j.key,xe=void 0;if(ne!=null)for(Ae in ne.ref!==void 0&&(xe=void 0),ne.key!==void 0&&(pe=""+ne.key),ne)!fe.call(ne,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&ne.ref===void 0||(se[Ae]=ne[Ae]);var Ae=arguments.length-2;if(Ae===1)se.children=oe;else if(1<Ae){for(var St=Array(Ae),et=0;et<Ae;et++)St[et]=arguments[et+2];se.children=St}return P(j.type,pe,void 0,void 0,xe,se)},Ie.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:c,_context:j},j},Ie.createElement=function(j,ne,oe){var se,pe={},xe=null;if(ne!=null)for(se in ne.key!==void 0&&(xe=""+ne.key),ne)fe.call(ne,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(pe[se]=ne[se]);var Ae=arguments.length-2;if(Ae===1)pe.children=oe;else if(1<Ae){for(var St=Array(Ae),et=0;et<Ae;et++)St[et]=arguments[et+2];pe.children=St}if(j&&j.defaultProps)for(se in Ae=j.defaultProps,Ae)pe[se]===void 0&&(pe[se]=Ae[se]);return P(j,xe,void 0,void 0,null,pe)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(j){return{$$typeof:p,render:j}},Ie.isValidElement=I,Ie.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:ae}},Ie.memo=function(j,ne){return{$$typeof:y,type:j,compare:ne===void 0?null:ne}},Ie.startTransition=function(j){var ne=ce.T,oe={};ce.T=oe;try{var se=j(),pe=ce.S;pe!==null&&pe(oe,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Ye,me)}catch(xe){me(xe)}finally{ce.T=ne}},Ie.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Ie.use=function(j){return ce.H.use(j)},Ie.useActionState=function(j,ne,oe){return ce.H.useActionState(j,ne,oe)},Ie.useCallback=function(j,ne){return ce.H.useCallback(j,ne)},Ie.useContext=function(j){return ce.H.useContext(j)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(j,ne){return ce.H.useDeferredValue(j,ne)},Ie.useEffect=function(j,ne,oe){var se=ce.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(j,ne)},Ie.useId=function(){return ce.H.useId()},Ie.useImperativeHandle=function(j,ne,oe){return ce.H.useImperativeHandle(j,ne,oe)},Ie.useInsertionEffect=function(j,ne){return ce.H.useInsertionEffect(j,ne)},Ie.useLayoutEffect=function(j,ne){return ce.H.useLayoutEffect(j,ne)},Ie.useMemo=function(j,ne){return ce.H.useMemo(j,ne)},Ie.useOptimistic=function(j,ne){return ce.H.useOptimistic(j,ne)},Ie.useReducer=function(j,ne,oe){return ce.H.useReducer(j,ne,oe)},Ie.useRef=function(j){return ce.H.useRef(j)},Ie.useState=function(j){return ce.H.useState(j)},Ie.useSyncExternalStore=function(j,ne,oe){return ce.H.useSyncExternalStore(j,ne,oe)},Ie.useTransition=function(){return ce.H.useTransition()},Ie.version="19.1.1",Ie}var Lv;function wp(){return Lv||(Lv=1,Am.exports=ES()),Am.exports}var M=wp();const XT=QT(M);var Sm={exports:{}},Ql={},Rm={exports:{}},Cm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function TS(){return Uv||(Uv=1,(function(i){function e(K,ae){var me=K.length;K.push(ae);e:for(;0<me;){var Ye=me-1>>>1,j=K[Ye];if(0<o(j,ae))K[Ye]=ae,K[me]=j,me=Ye;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ae=K[0],me=K.pop();if(me!==ae){K[0]=me;e:for(var Ye=0,j=K.length,ne=j>>>1;Ye<ne;){var oe=2*(Ye+1)-1,se=K[oe],pe=oe+1,xe=K[pe];if(0>o(se,me))pe<j&&0>o(xe,se)?(K[Ye]=xe,K[pe]=me,Ye=pe):(K[Ye]=se,K[oe]=me,Ye=oe);else if(pe<j&&0>o(xe,me))K[Ye]=xe,K[pe]=me,Ye=pe;else break e}}return ae}function o(K,ae){var me=K.sortIndex-ae.sortIndex;return me!==0?me:K.id-ae.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,p=h.now();i.unstable_now=function(){return h.now()-p}}var g=[],y=[],v=1,w=null,A=3,C=!1,D=!1,H=!1,L=!1,J=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function ue(K){for(var ae=n(y);ae!==null;){if(ae.callback===null)r(y);else if(ae.startTime<=K)r(y),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=n(y)}}function ce(K){if(H=!1,ue(K),!D)if(n(g)!==null)D=!0,fe||(fe=!0,U());else{var ae=n(y);ae!==null&&ut(ce,ae.startTime-K)}}var fe=!1,P=-1,R=5,I=-1;function O(){return L?!0:!(i.unstable_now()-I<R)}function k(){if(L=!1,fe){var K=i.unstable_now();I=K;var ae=!0;try{e:{D=!1,H&&(H=!1,X(P),P=-1),C=!0;var me=A;try{t:{for(ue(K),w=n(g);w!==null&&!(w.expirationTime>K&&O());){var Ye=w.callback;if(typeof Ye=="function"){w.callback=null,A=w.priorityLevel;var j=Ye(w.expirationTime<=K);if(K=i.unstable_now(),typeof j=="function"){w.callback=j,ue(K),ae=!0;break t}w===n(g)&&r(g),ue(K)}else r(g);w=n(g)}if(w!==null)ae=!0;else{var ne=n(y);ne!==null&&ut(ce,ne.startTime-K),ae=!1}}break e}finally{w=null,A=me,C=!1}ae=void 0}}finally{ae?U():fe=!1}}}var U;if(typeof ie=="function")U=function(){ie(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,yt=N.port2;N.port1.onmessage=k,U=function(){yt.postMessage(null)}}else U=function(){J(k,0)};function ut(K,ae){P=J(function(){K(i.unstable_now())},ae)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(K){K.callback=null},i.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<K?Math.floor(1e3/K):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(K){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var me=A;A=ae;try{return K()}finally{A=me}},i.unstable_requestPaint=function(){L=!0},i.unstable_runWithPriority=function(K,ae){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var me=A;A=K;try{return ae()}finally{A=me}},i.unstable_scheduleCallback=function(K,ae,me){var Ye=i.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ye+me:Ye):me=Ye,K){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=me+j,K={id:v++,callback:ae,priorityLevel:K,startTime:me,expirationTime:j,sortIndex:-1},me>Ye?(K.sortIndex=me,e(y,K),n(g)===null&&K===n(y)&&(H?(X(P),P=-1):H=!0,ut(ce,me-Ye))):(K.sortIndex=j,e(g,K),D||C||(D=!0,fe||(fe=!0,U()))),K},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(K){var ae=A;return function(){var me=A;A=ae;try{return K.apply(this,arguments)}finally{A=me}}}})(Cm)),Cm}var Bv;function wS(){return Bv||(Bv=1,Rm.exports=TS()),Rm.exports}var Im={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function bS(){if(zv)return rn;zv=1;var i=wp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:y,implementation:v}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rn.createPortal=function(g,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,v)},rn.flushSync=function(g){var y=h.T,v=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=y,r.p=v,r.d.f()}},rn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},rn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},rn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var v=y.as,w=p(v,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:A,fetchPriority:C}):v==="script"&&r.d.X(g,{crossOrigin:w,integrity:A,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},rn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=p(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},rn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,w=p(v,y.crossOrigin);r.d.L(g,v,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},rn.preloadModule=function(g,y){if(typeof g=="string")if(y){var v=p(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},rn.requestFormReset=function(g){r.d.r(g)},rn.unstable_batchedUpdates=function(g,y){return g(y)},rn.useFormState=function(g,y,v){return h.H.useFormState(g,y,v)},rn.useFormStatus=function(){return h.H.useHostTransitionStatus()},rn.version="19.1.1",rn}var qv;function AS(){if(qv)return Im.exports;qv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Im.exports=bS(),Im.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function SS(){if(Hv)return Ql;Hv=1;var i=wS(),e=wp(),n=AS();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function h(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(r(188))}function g(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,l=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return p(f),t;if(m===l)return p(f),s;m=m.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=m;else{for(var T=!1,b=f.child;b;){if(b===a){T=!0,a=f,l=m;break}if(b===l){T=!0,l=f,a=m;break}b=b.sibling}if(!T){for(b=m.child;b;){if(b===a){T=!0,a=m,l=f;break}if(b===l){T=!0,l=m,a=f;break}b=b.sibling}if(!T)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function y(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=y(t),s!==null)return s;t=t.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),J=Symbol.for("react.provider"),X=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function yt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case D:return"Fragment";case L:return"Profiler";case H:return"StrictMode";case ce:return"Suspense";case fe:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case ie:return(t.displayName||"Context")+".Provider";case X:return(t._context.displayName||"Context")+".Consumer";case ue:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P:return s=t.displayName||null,s!==null?s:yt(t.type)||"Memo";case R:s=t._payload,t=t._init;try{return yt(t(s))}catch{}}return null}var ut=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Ye=[],j=-1;function ne(t){return{current:t}}function oe(t){0>j||(t.current=Ye[j],Ye[j]=null,j--)}function se(t,s){j++,Ye[j]=t.current,t.current=s}var pe=ne(null),xe=ne(null),Ae=ne(null),St=ne(null);function et(t,s){switch(se(Ae,s),se(xe,t),se(pe,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?cv(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=cv(s),t=uv(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}oe(pe),se(pe,t)}function Pn(){oe(pe),oe(xe),oe(Ae)}function ci(t){t.memoizedState!==null&&se(St,t);var s=pe.current,a=uv(s,t.type);s!==a&&(se(xe,t),se(pe,a))}function Qn(t){xe.current===t&&(oe(pe),oe(xe)),St.current===t&&(oe(St),Hl._currentValue=me)}var Bi=Object.prototype.hasOwnProperty,Ue=i.unstable_scheduleCallback,Rs=i.unstable_cancelCallback,Ea=i.unstable_shouldYield,qo=i.unstable_requestPaint,gn=i.unstable_now,ge=i.unstable_getCurrentPriorityLevel,Ee=i.unstable_ImmediatePriority,Be=i.unstable_UserBlockingPriority,Oe=i.unstable_NormalPriority,dt=i.unstable_LowPriority,tn=i.unstable_IdlePriority,ui=i.log,Ta=i.unstable_setDisableYieldValue,ze=null,Ne=null;function hn(t){if(typeof ui=="function"&&Ta(t),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(ze,t)}catch{}}var nn=Math.clz32?Math.clz32:Ar,Uc=Math.log,Sf=Math.LN2;function Ar(t){return t>>>=0,t===0?32:31-(Uc(t)/Sf|0)|0}var Sr=256,Rr=4194304;function Xn(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function wa(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,m=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~m,l!==0?f=Xn(l):(T&=b,T!==0?f=Xn(T):a||(a=b&~t,a!==0&&(f=Xn(a))))):(b=l&~m,b!==0?f=Xn(b):T!==0?f=Xn(T):a||(a=l&~t,a!==0&&(f=Xn(a)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:f}function Cr(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Ho(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fo(){var t=Sr;return Sr<<=1,(Sr&4194048)===0&&(Sr=256),t}function Go(){var t=Rr;return Rr<<=1,(Rr&62914560)===0&&(Rr=4194304),t}function zi(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function qi(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Yo(t,s,a,l,f,m){var T=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,x=t.expirationTimes,F=t.hiddenUpdates;for(a=T&~a;0<a;){var Q=31-nn(a),ee=1<<Q;b[Q]=0,x[Q]=-1;var G=F[Q];if(G!==null)for(F[Q]=null,Q=0;Q<G.length;Q++){var Y=G[Q];Y!==null&&(Y.lane&=-536870913)}a&=~ee}l!==0&&hi(t,l,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(T&~s))}function hi(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-nn(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function $o(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-nn(a),f=1<<l;f&s|t[l]&s&&(t[l]|=s),a&=~f}}function Cs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ba(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Is(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:xv(t.type))}function Bc(t,s){var a=ae.p;try{return ae.p=t,s()}finally{ae.p=a}}var ht=Math.random().toString(36).slice(2),jt="__reactFiber$"+ht,Rt="__reactProps$"+ht,kn="__reactContainer$"+ht,Ko="__reactEvents$"+ht,Rf="__reactListeners$"+ht,xs="__reactHandles$"+ht,zc="__reactResources$"+ht,Ir="__reactMarker$"+ht;function Ns(t){delete t[jt],delete t[Rt],delete t[Ko],delete t[Rf],delete t[xs]}function Hi(t){var s=t[jt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[kn]||a[jt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=mv(t);t!==null;){if(a=t[jt])return a;t=mv(t)}return s}t=a,a=t.parentNode}return null}function fi(t){if(t=t[jt]||t[kn]){var s=t.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return t}return null}function di(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function fn(t){var s=t[zc];return s||(s=t[zc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Et(t){t[Ir]=!0}var Qo=new Set,Aa={};function Wn(t,s){Fi(t,s),Fi(t+"Capture",s)}function Fi(t,s){for(Aa[t]=s,t=0;t<s.length;t++)Qo.add(s[t])}var qc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hc={},xr={};function Fc(t){return Bi.call(xr,t)?!0:Bi.call(Hc,t)?!1:qc.test(t)?xr[t]=!0:(Hc[t]=!0,!1)}function Ds(t,s,a){if(Fc(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function mi(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Yt(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}var Nr,Gc;function Gi(t){if(Nr===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Nr=s&&s[1]||"",Gc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nr+t+Gc}var Sa=!1;function Ra(t,s){if(!t||Sa)return"";Sa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(Y){var G=Y}Reflect.construct(t,[],ee)}else{try{ee.call()}catch(Y){G=Y}t.call(ee.prototype)}}else{try{throw Error()}catch(Y){G=Y}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),T=m[0],b=m[1];if(T&&b){var x=T.split(`
`),F=b.split(`
`);for(f=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(l===x.length||f===F.length)for(l=x.length-1,f=F.length-1;1<=l&&0<=f&&x[l]!==F[f];)f--;for(;1<=l&&0<=f;l--,f--)if(x[l]!==F[f]){if(l!==1||f!==1)do if(l--,f--,0>f||x[l]!==F[f]){var Q=`
`+x[l].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=l&&0<=f);break}}}finally{Sa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Gi(a):""}function Xo(t){switch(t.tag){case 26:case 27:case 5:return Gi(t.type);case 16:return Gi("Lazy");case 13:return Gi("Suspense");case 19:return Gi("SuspenseList");case 0:case 15:return Ra(t.type,!1);case 11:return Ra(t.type.render,!1);case 1:return Ra(t.type,!0);case 31:return Gi("Activity");default:return""}}function Ca(t){try{var s="";do s+=Xo(t),t=t.return;while(t);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function dn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wo(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Cf(t){var s=Wo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),l=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return f.call(this)},set:function(T){l=""+T,m.call(this,T)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ia(t){t._valueTracker||(t._valueTracker=Cf(t))}function Zo(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Wo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Dr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var If=/[\n"\\]/g;function Ct(t){return t.replace(If,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function wn(t,s,a,l,f,m,T,b){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),s!=null?T==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+dn(s)):t.value!==""+dn(s)&&(t.value=""+dn(s)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),s!=null?Os(t,T,dn(s)):a!=null?Os(t,T,dn(a)):l!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+dn(b):t.removeAttribute("name")}function Or(t,s,a,l,f,m,T,b){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;a=a!=null?""+dn(a):"",s=s!=null?""+dn(s):a,b||s===t.value||(t.value=s),t.defaultValue=s}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T)}function Os(t,s,a){s==="number"&&Dr(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Yi(t,s,a,l){if(t=t.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=s.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+dn(a),s=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}s!==null||t[f].disabled||(s=t[f])}s!==null&&(s.selected=!0)}}function tt(t,s,a){if(s!=null&&(s=""+dn(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+dn(a):""}function Mr(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(ut(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=dn(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Vn(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var jr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yc(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||jr.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function Jo(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in s)l=s[f],s.hasOwnProperty(f)&&a[f]!==l&&Yc(t,f,l)}else for(var m in s)s.hasOwnProperty(m)&&Yc(t,m,s[m])}function el(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xa(t){return Nf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var $i=null;function Ln(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ki=null,Qi=null;function tl(t){var s=fi(t);if(s&&(t=s.stateNode)){var a=t[Rt]||null;e:switch(t=s.stateNode,s.type){case"input":if(wn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ct(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var f=l[Rt]||null;if(!f)throw Error(r(90));wn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&Zo(l)}break e;case"textarea":tt(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Yi(t,!!a.multiple,s,!1)}}}var pi=!1;function $c(t,s,a){if(pi)return t(s,a);pi=!0;try{var l=t(s);return l}finally{if(pi=!1,(Ki!==null||Qi!==null)&&(Bu(),Ki&&(s=Ki,t=Qi,Qi=Ki=null,tl(s),t)))for(s=0;s<t.length;s++)tl(t[s])}}function Pr(t,s){var a=t.stateNode;if(a===null)return null;var l=a[Rt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Un=!1;if(Zn)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){Un=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{Un=!1}var gi=null,Ms=null,Xi=null;function nl(){if(Xi)return Xi;var t,s=Ms,a=s.length,l,f="value"in gi?gi.value:gi.textContent,m=f.length;for(t=0;t<a&&s[t]===f[t];t++);var T=a-t;for(l=1;l<=T&&s[a-l]===f[m-l];l++);return Xi=f.slice(t,1<l?1-l:void 0)}function yi(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function _i(){return!0}function il(){return!1}function Bt(t){function s(a,l,f,m,T){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(m):m[b]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?_i:il,this.isPropagationStopped=il,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=_i)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=_i)},persist:function(){},isPersistent:_i}),s}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=Bt(Qe),Vr=v({},Qe,{view:0,detail:0}),Kc=Bt(Vr),Da,Oa,vi,Lr=v({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vi&&(vi&&t.type==="mousemove"?(Da=t.screenX-vi.screenX,Oa=t.screenY-vi.screenY):Oa=Da=0,vi=t),Da)},movementY:function(t){return"movementY"in t?t.movementY:Oa}}),Bn=Bt(Lr),Qc=v({},Lr,{dataTransfer:0}),Df=Bt(Qc),Ur=v({},Vr,{relatedTarget:0}),Ma=Bt(Ur),sl=v({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),ja=Bt(sl),Xc=v({},Qe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pa=Bt(Xc),Of=v({},Qe,{data:0}),rl=Bt(Of),Br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function al(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Zc[t])?!!s[t]:!1}function zr(){return al}var Jc=v({},Vr,{key:function(t){if(t.key){var s=Br[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=yi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zr,charCode:function(t){return t.type==="keypress"?yi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ka=Bt(Jc),eu=v({},Lr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ol=Bt(eu),Wi=v({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zr}),tu=Bt(Wi),nu=v({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),iu=Bt(nu),su=v({},Lr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Va=Bt(su),mn=v({},Qe,{newState:0,oldState:0}),ru=Bt(mn),au=[9,13,27,32],Ei=Zn&&"CompositionEvent"in window,u=null;Zn&&"documentMode"in document&&(u=document.documentMode);var _=Zn&&"TextEvent"in window&&!u,E=Zn&&(!Ei||u&&8<u&&11>=u),S=" ",z=!1;function $(t,s){switch(t){case"keyup":return au.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function re(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qe=!1;function Pt(t,s){switch(t){case"compositionend":return re(s);case"keypress":return s.which!==32?null:(z=!0,S);case"textInput":return t=s.data,t===S&&z?null:t;default:return null}}function He(t,s){if(qe)return t==="compositionend"||!Ei&&$(t,s)?(t=nl(),Xi=Ms=gi=null,qe=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var zt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!zt[t.type]:s==="textarea"}function Zi(t,s,a,l){Ki?Qi?Qi.push(l):Qi=[l]:Ki=l,s=Yu(s,"onChange"),0<s.length&&(a=new Na("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var $t=null,Ti=null;function ll(t){sv(t,0)}function ou(t){var s=di(t);if(Zo(s))return t}function Sg(t,s){if(t==="change")return s}var Rg=!1;if(Zn){var Mf;if(Zn){var jf="oninput"in document;if(!jf){var Cg=document.createElement("div");Cg.setAttribute("oninput","return;"),jf=typeof Cg.oninput=="function"}Mf=jf}else Mf=!1;Rg=Mf&&(!document.documentMode||9<document.documentMode)}function Ig(){$t&&($t.detachEvent("onpropertychange",xg),Ti=$t=null)}function xg(t){if(t.propertyName==="value"&&ou(Ti)){var s=[];Zi(s,Ti,t,Ln(t)),$c(ll,s)}}function Kb(t,s,a){t==="focusin"?(Ig(),$t=s,Ti=a,$t.attachEvent("onpropertychange",xg)):t==="focusout"&&Ig()}function Qb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ou(Ti)}function Xb(t,s){if(t==="click")return ou(s)}function Wb(t,s){if(t==="input"||t==="change")return ou(s)}function Zb(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var bn=typeof Object.is=="function"?Object.is:Zb;function cl(t,s){if(bn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Bi.call(s,f)||!bn(t[f],s[f]))return!1}return!0}function Ng(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dg(t,s){var a=Ng(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ng(a)}}function Og(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Og(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Mg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Dr(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Dr(t.document)}return s}function Pf(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Jb=Zn&&"documentMode"in document&&11>=document.documentMode,La=null,kf=null,ul=null,Vf=!1;function jg(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vf||La==null||La!==Dr(l)||(l=La,"selectionStart"in l&&Pf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ul&&cl(ul,l)||(ul=l,l=Yu(kf,"onSelect"),0<l.length&&(s=new Na("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=La)))}function qr(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ua={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionrun:qr("Transition","TransitionRun"),transitionstart:qr("Transition","TransitionStart"),transitioncancel:qr("Transition","TransitionCancel"),transitionend:qr("Transition","TransitionEnd")},Lf={},Pg={};Zn&&(Pg=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Hr(t){if(Lf[t])return Lf[t];if(!Ua[t])return t;var s=Ua[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Pg)return Lf[t]=s[a];return t}var kg=Hr("animationend"),Vg=Hr("animationiteration"),Lg=Hr("animationstart"),eA=Hr("transitionrun"),tA=Hr("transitionstart"),nA=Hr("transitioncancel"),Ug=Hr("transitionend"),Bg=new Map,Uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uf.push("scrollEnd");function Jn(t,s){Bg.set(t,s),Wn(s,[t])}var zg=new WeakMap;function zn(t,s){if(typeof t=="object"&&t!==null){var a=zg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Ca(s)},zg.set(t,s),s)}return{value:t,source:s,stack:Ca(s)}}var qn=[],Ba=0,Bf=0;function lu(){for(var t=Ba,s=Bf=Ba=0;s<t;){var a=qn[s];qn[s++]=null;var l=qn[s];qn[s++]=null;var f=qn[s];qn[s++]=null;var m=qn[s];if(qn[s++]=null,l!==null&&f!==null){var T=l.pending;T===null?f.next=f:(f.next=T.next,T.next=f),l.pending=f}m!==0&&qg(a,f,m)}}function cu(t,s,a,l){qn[Ba++]=t,qn[Ba++]=s,qn[Ba++]=a,qn[Ba++]=l,Bf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function zf(t,s,a,l){return cu(t,s,a,l),uu(t)}function za(t,s){return cu(t,null,null,s),uu(t)}function qg(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,m=t.return;m!==null;)m.childLanes|=a,l=m.alternate,l!==null&&(l.childLanes|=a),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&s!==null&&(f=31-nn(a),t=m.hiddenUpdates,l=t[f],l===null?t[f]=[s]:l.push(s),s.lane=a|536870912),m):null}function uu(t){if(50<Pl)throw Pl=0,$d=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var qa={};function iA(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,s,a,l){return new iA(t,s,a,l)}function qf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ji(t,s){var a=t.alternate;return a===null?(a=An(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Hg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function hu(t,s,a,l,f,m){var T=0;if(l=t,typeof t=="function")qf(t)&&(T=1);else if(typeof t=="string")T=rS(t,a,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=An(31,a,s,f),t.elementType=I,t.lanes=m,t;case D:return Fr(a.children,f,m,s);case H:T=8,f|=24;break;case L:return t=An(12,a,s,f|2),t.elementType=L,t.lanes=m,t;case ce:return t=An(13,a,s,f),t.elementType=ce,t.lanes=m,t;case fe:return t=An(19,a,s,f),t.elementType=fe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J:case ie:T=10;break e;case X:T=9;break e;case ue:T=11;break e;case P:T=14;break e;case R:T=16,l=null;break e}T=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return s=An(T,a,s,f),s.elementType=t,s.type=l,s.lanes=m,s}function Fr(t,s,a,l){return t=An(7,t,l,s),t.lanes=a,t}function Hf(t,s,a){return t=An(6,t,null,s),t.lanes=a,t}function Ff(t,s,a){return s=An(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Ha=[],Fa=0,fu=null,du=0,Hn=[],Fn=0,Gr=null,es=1,ts="";function Yr(t,s){Ha[Fa++]=du,Ha[Fa++]=fu,fu=t,du=s}function Fg(t,s,a){Hn[Fn++]=es,Hn[Fn++]=ts,Hn[Fn++]=Gr,Gr=t;var l=es;t=ts;var f=32-nn(l)-1;l&=~(1<<f),a+=1;var m=32-nn(s)+f;if(30<m){var T=f-f%5;m=(l&(1<<T)-1).toString(32),l>>=T,f-=T,es=1<<32-nn(s)+f|a<<f|l,ts=m+t}else es=1<<m|a<<f|l,ts=t}function Gf(t){t.return!==null&&(Yr(t,1),Fg(t,1,0))}function Yf(t){for(;t===fu;)fu=Ha[--Fa],Ha[Fa]=null,du=Ha[--Fa],Ha[Fa]=null;for(;t===Gr;)Gr=Hn[--Fn],Hn[Fn]=null,ts=Hn[--Fn],Hn[Fn]=null,es=Hn[--Fn],Hn[Fn]=null}var pn=null,_t=null,Ke=!1,$r=null,wi=!1,$f=Error(r(519));function Kr(t){var s=Error(r(418,""));throw dl(zn(s,t)),$f}function Gg(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[jt]=t,s[Rt]=l,a){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(a=0;a<Vl.length;a++)Pe(Vl[a],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Pe("invalid",s),Or(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ia(s);break;case"select":Pe("invalid",s);break;case"textarea":Pe("invalid",s),Mr(s,l.value,l.defaultValue,l.children),Ia(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||lv(s.textContent,a)?(l.popover!=null&&(Pe("beforetoggle",s),Pe("toggle",s)),l.onScroll!=null&&Pe("scroll",s),l.onScrollEnd!=null&&Pe("scrollend",s),l.onClick!=null&&(s.onclick=$u),s=!0):s=!1,s||Kr(t)}function Yg(t){for(pn=t.return;pn;)switch(pn.tag){case 5:case 13:wi=!1;return;case 27:case 3:wi=!0;return;default:pn=pn.return}}function hl(t){if(t!==pn)return!1;if(!Ke)return Yg(t),Ke=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||cm(t.type,t.memoizedProps)),a=!a),a&&_t&&Kr(t),Yg(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(s===0){_t=ti(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;t=t.nextSibling}_t=null}}else s===27?(s=_t,Qs(t.type)?(t=dm,dm=null,_t=t):_t=s):_t=pn?ti(t.stateNode.nextSibling):null;return!0}function fl(){_t=pn=null,Ke=!1}function $g(){var t=$r;return t!==null&&(vn===null?vn=t:vn.push.apply(vn,t),$r=null),t}function dl(t){$r===null?$r=[t]:$r.push(t)}var Kf=ne(null),Qr=null,ns=null;function js(t,s,a){se(Kf,s._currentValue),s._currentValue=a}function is(t){t._currentValue=Kf.current,oe(Kf)}function Qf(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Xf(t,s,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var T=f.child;m=m.firstContext;e:for(;m!==null;){var b=m;m=f;for(var x=0;x<s.length;x++)if(b.context===s[x]){m.lanes|=a,b=m.alternate,b!==null&&(b.lanes|=a),Qf(m.return,a,t),l||(T=null);break e}m=b.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(r(341));T.lanes|=a,m=T.alternate,m!==null&&(m.lanes|=a),Qf(T,a,t),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===t){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function ml(t,s,a,l){t=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var b=f.type;bn(f.pendingProps.value,T.value)||(t!==null?t.push(b):t=[b])}}else if(f===St.current){if(T=f.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Hl):t=[Hl])}f=f.return}t!==null&&Xf(s,t,a,l),s.flags|=262144}function mu(t){for(t=t.firstContext;t!==null;){if(!bn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Xr(t){Qr=t,ns=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function sn(t){return Kg(Qr,t)}function pu(t,s){return Qr===null&&Xr(t),Kg(t,s)}function Kg(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ns===null){if(t===null)throw Error(r(308));ns=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else ns=ns.next=s;return a}var sA=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},rA=i.unstable_scheduleCallback,aA=i.unstable_NormalPriority,Vt={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wf(){return{controller:new sA,data:new Map,refCount:0}}function pl(t){t.refCount--,t.refCount===0&&rA(aA,function(){t.controller.abort()})}var gl=null,Zf=0,Ga=0,Ya=null;function oA(t,s){if(gl===null){var a=gl=[];Zf=0,Ga=em(),Ya={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Zf++,s.then(Qg,Qg),s}function Qg(){if(--Zf===0&&gl!==null){Ya!==null&&(Ya.status="fulfilled");var t=gl;gl=null,Ga=0,Ya=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function lA(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Xg=K.S;K.S=function(t,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&oA(t,s),Xg!==null&&Xg(t,s)};var Wr=ne(null);function Jf(){var t=Wr.current;return t!==null?t:at.pooledCache}function gu(t,s){s===null?se(Wr,Wr.current):se(Wr,s.pool)}function Wg(){var t=Jf();return t===null?null:{parent:Vt._currentValue,pool:t}}var yl=Error(r(460)),Zg=Error(r(474)),yu=Error(r(542)),ed={then:function(){}};function Jg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _u(){}function ey(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(_u,_u),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,ny(t),t;default:if(typeof s.status=="string")s.then(_u,_u);else{if(t=at,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=l}},function(l){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,ny(t),t}throw _l=s,yl}}var _l=null;function ty(){if(_l===null)throw Error(r(459));var t=_l;return _l=null,t}function ny(t){if(t===yl||t===yu)throw Error(r(483))}var Ps=!1;function td(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nd(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ks(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(We&2)!==0){var f=l.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),l.pending=s,s=uu(t),qg(t,null,a),s}return cu(t,l,s,a),uu(t)}function vl(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,$o(t,a)}}function id(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=T:m=m.next=T,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var sd=!1;function El(){if(sd){var t=Ya;if(t!==null)throw t}}function Tl(t,s,a,l){sd=!1;var f=t.updateQueue;Ps=!1;var m=f.firstBaseUpdate,T=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var x=b,F=x.next;x.next=null,T===null?m=F:T.next=F,T=x;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,b=Q.lastBaseUpdate,b!==T&&(b===null?Q.firstBaseUpdate=F:b.next=F,Q.lastBaseUpdate=x))}if(m!==null){var ee=f.baseState;T=0,Q=F=x=null,b=m;do{var G=b.lane&-536870913,Y=G!==b.lane;if(Y?(Fe&G)===G:(l&G)===G){G!==0&&G===Ga&&(sd=!0),Q!==null&&(Q=Q.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Se=t,ve=b;G=s;var st=a;switch(ve.tag){case 1:if(Se=ve.payload,typeof Se=="function"){ee=Se.call(st,ee,G);break e}ee=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=ve.payload,G=typeof Se=="function"?Se.call(st,ee,G):Se,G==null)break e;ee=v({},ee,G);break e;case 2:Ps=!0}}G=b.callback,G!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Q===null?(F=Q=Y,x=ee):Q=Q.next=Y,T|=G;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;Y=b,b=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);Q===null&&(x=ee),f.baseState=x,f.firstBaseUpdate=F,f.lastBaseUpdate=Q,m===null&&(f.shared.lanes=0),Gs|=T,t.lanes=T,t.memoizedState=ee}}function iy(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function sy(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)iy(a[t],s)}var $a=ne(null),vu=ne(0);function ry(t,s){t=us,se(vu,t),se($a,s),us=t|s.baseLanes}function rd(){se(vu,us),se($a,$a.current)}function ad(){us=vu.current,oe($a),oe(vu)}var Ls=0,De=null,nt=null,It=null,Eu=!1,Ka=!1,Zr=!1,Tu=0,wl=0,Qa=null,cA=0;function Tt(){throw Error(r(321))}function od(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!bn(t[a],s[a]))return!1;return!0}function ld(t,s,a,l,f,m){return Ls=m,De=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,K.H=t===null||t.memoizedState===null?qy:Hy,Zr=!1,m=a(l,f),Zr=!1,Ka&&(m=oy(s,a,l,f)),ay(t),m}function ay(t){K.H=Cu;var s=nt!==null&&nt.next!==null;if(Ls=0,It=nt=De=null,Eu=!1,wl=0,Qa=null,s)throw Error(r(300));t===null||qt||(t=t.dependencies,t!==null&&mu(t)&&(qt=!0))}function oy(t,s,a,l){De=t;var f=0;do{if(Ka&&(Qa=null),wl=0,Ka=!1,25<=f)throw Error(r(301));if(f+=1,It=nt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}K.H=gA,m=s(a,l)}while(Ka);return m}function uA(){var t=K.H,s=t.useState()[0];return s=typeof s.then=="function"?bl(s):s,t=t.useState()[0],(nt!==null?nt.memoizedState:null)!==t&&(De.flags|=1024),s}function cd(){var t=Tu!==0;return Tu=0,t}function ud(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function hd(t){if(Eu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Eu=!1}Ls=0,It=nt=De=null,Ka=!1,wl=Tu=0,Qa=null}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?De.memoizedState=It=t:It=It.next=t,It}function xt(){if(nt===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var s=It===null?De.memoizedState:It.next;if(s!==null)It=s,nt=t;else{if(t===null)throw De.alternate===null?Error(r(467)):Error(r(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},It===null?De.memoizedState=It=t:It=It.next=t}return It}function fd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bl(t){var s=wl;return wl+=1,Qa===null&&(Qa=[]),t=ey(Qa,t,s),s=De,(It===null?s.memoizedState:It.next)===null&&(s=s.alternate,K.H=s===null||s.memoizedState===null?qy:Hy),t}function wu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return bl(t);if(t.$$typeof===ie)return sn(t)}throw Error(r(438,String(t)))}function dd(t){var s=null,a=De.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=De.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=fd(),De.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=O;return s.index++,a}function ss(t,s){return typeof s=="function"?s(t):s}function bu(t){var s=xt();return md(s,nt,t)}function md(t,s,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=t.baseQueue,m=l.pending;if(m!==null){if(f!==null){var T=f.next;f.next=m.next,m.next=T}s.baseQueue=f=m,l.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{s=f.next;var b=T=null,x=null,F=s,Q=!1;do{var ee=F.lane&-536870913;if(ee!==F.lane?(Fe&ee)===ee:(Ls&ee)===ee){var G=F.revertLane;if(G===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ee===Ga&&(Q=!0);else if((Ls&G)===G){F=F.next,G===Ga&&(Q=!0);continue}else ee={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},x===null?(b=x=ee,T=m):x=x.next=ee,De.lanes|=G,Gs|=G;ee=F.action,Zr&&a(m,ee),m=F.hasEagerState?F.eagerState:a(m,ee)}else G={lane:ee,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},x===null?(b=x=G,T=m):x=x.next=G,De.lanes|=ee,Gs|=ee;F=F.next}while(F!==null&&F!==s);if(x===null?T=m:x.next=b,!bn(m,t.memoizedState)&&(qt=!0,Q&&(a=Ya,a!==null)))throw a;t.memoizedState=m,t.baseState=T,t.baseQueue=x,l.lastRenderedState=m}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function pd(t){var s=xt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var T=f=f.next;do m=t(m,T.action),T=T.next;while(T!==f);bn(m,s.memoizedState)||(qt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,l]}function ly(t,s,a){var l=De,f=xt(),m=Ke;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=s();var T=!bn((nt||f).memoizedState,a);T&&(f.memoizedState=a,qt=!0),f=f.queue;var b=hy.bind(null,l,f,t);if(Al(2048,8,b,[t]),f.getSnapshot!==s||T||It!==null&&It.memoizedState.tag&1){if(l.flags|=2048,Xa(9,Au(),uy.bind(null,l,f,a,s),null),at===null)throw Error(r(349));m||(Ls&124)!==0||cy(l,s,a)}return a}function cy(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=De.updateQueue,s===null?(s=fd(),De.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function uy(t,s,a,l){s.value=a,s.getSnapshot=l,fy(s)&&dy(t)}function hy(t,s,a){return a(function(){fy(s)&&dy(t)})}function fy(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!bn(t,a)}catch{return!0}}function dy(t){var s=za(t,2);s!==null&&xn(s,t,2)}function gd(t){var s=yn();if(typeof t=="function"){var a=t;if(t=a(),Zr){hn(!0);try{a()}finally{hn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:t},s}function my(t,s,a,l){return t.baseState=a,md(t,nt,typeof l=="function"?l:ss)}function hA(t,s,a,l,f){if(Ru(t))throw Error(r(485));if(t=s.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};K.T!==null?a(!0):m.isTransition=!1,l(m),a=s.pending,a===null?(m.next=s.pending=m,py(s,m)):(m.next=a.next,s.pending=a.next=m)}}function py(t,s){var a=s.action,l=s.payload,f=t.state;if(s.isTransition){var m=K.T,T={};K.T=T;try{var b=a(f,l),x=K.S;x!==null&&x(T,b),gy(t,s,b)}catch(F){yd(t,s,F)}finally{K.T=m}}else try{m=a(f,l),gy(t,s,m)}catch(F){yd(t,s,F)}}function gy(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){yy(t,s,l)},function(l){return yd(t,s,l)}):yy(t,s,a)}function yy(t,s,a){s.status="fulfilled",s.value=a,_y(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,py(t,a)))}function yd(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,_y(s),s=s.next;while(s!==l)}t.action=null}function _y(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function vy(t,s){return s}function Ey(t,s){if(Ke){var a=at.formState;if(a!==null){e:{var l=De;if(Ke){if(_t){t:{for(var f=_t,m=wi;f.nodeType!==8;){if(!m){f=null;break t}if(f=ti(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){_t=ti(f.nextSibling),l=f.data==="F!";break e}}Kr(l)}l=!1}l&&(s=a[0])}}return a=yn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:s},a.queue=l,a=Uy.bind(null,De,l),l.dispatch=a,l=gd(!1),m=wd.bind(null,De,!1,l.queue),l=yn(),f={state:s,dispatch:null,action:t,pending:null},l.queue=f,a=hA.bind(null,De,f,m,a),f.dispatch=a,l.memoizedState=t,[s,a,!1]}function Ty(t){var s=xt();return wy(s,nt,t)}function wy(t,s,a){if(s=md(t,s,vy)[0],t=bu(ss)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=bl(s)}catch(T){throw T===yl?yu:T}else l=s;s=xt();var f=s.queue,m=f.dispatch;return a!==s.memoizedState&&(De.flags|=2048,Xa(9,Au(),fA.bind(null,f,a),null)),[l,m,t]}function fA(t,s){t.action=s}function by(t){var s=xt(),a=nt;if(a!==null)return wy(s,a,t);xt(),s=s.memoizedState,a=xt();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function Xa(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=De.updateQueue,s===null&&(s=fd(),De.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function Au(){return{destroy:void 0,resource:void 0}}function Ay(){return xt().memoizedState}function Su(t,s,a,l){var f=yn();l=l===void 0?null:l,De.flags|=t,f.memoizedState=Xa(1|s,Au(),a,l)}function Al(t,s,a,l){var f=xt();l=l===void 0?null:l;var m=f.memoizedState.inst;nt!==null&&l!==null&&od(l,nt.memoizedState.deps)?f.memoizedState=Xa(s,m,a,l):(De.flags|=t,f.memoizedState=Xa(1|s,m,a,l))}function Sy(t,s){Su(8390656,8,t,s)}function Ry(t,s){Al(2048,8,t,s)}function Cy(t,s){return Al(4,2,t,s)}function Iy(t,s){return Al(4,4,t,s)}function xy(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Ny(t,s,a){a=a!=null?a.concat([t]):null,Al(4,4,xy.bind(null,s,t),a)}function _d(){}function Dy(t,s){var a=xt();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&od(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function Oy(t,s){var a=xt();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&od(s,l[1]))return l[0];if(l=t(),Zr){hn(!0);try{t()}finally{hn(!1)}}return a.memoizedState=[l,s],l}function vd(t,s,a){return a===void 0||(Ls&1073741824)!==0?t.memoizedState=s:(t.memoizedState=a,t=P_(),De.lanes|=t,Gs|=t,a)}function My(t,s,a,l){return bn(a,s)?a:$a.current!==null?(t=vd(t,a,l),bn(t,s)||(qt=!0),t):(Ls&42)===0?(qt=!0,t.memoizedState=a):(t=P_(),De.lanes|=t,Gs|=t,s)}function jy(t,s,a,l,f){var m=ae.p;ae.p=m!==0&&8>m?m:8;var T=K.T,b={};K.T=b,wd(t,!1,s,a);try{var x=f(),F=K.S;if(F!==null&&F(b,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var Q=lA(x,l);Sl(t,s,Q,In(t))}else Sl(t,s,l,In(t))}catch(ee){Sl(t,s,{then:function(){},status:"rejected",reason:ee},In())}finally{ae.p=m,K.T=T}}function dA(){}function Ed(t,s,a,l){if(t.tag!==5)throw Error(r(476));var f=Py(t).queue;jy(t,f,s,me,a===null?dA:function(){return ky(t),a(l)})}function Py(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:me},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function ky(t){var s=Py(t).next.queue;Sl(t,s,{},In())}function Td(){return sn(Hl)}function Vy(){return xt().memoizedState}function Ly(){return xt().memoizedState}function mA(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=In();t=ks(a);var l=Vs(s,t,a);l!==null&&(xn(l,s,a),vl(l,s,a)),s={cache:Wf()},t.payload=s;return}s=s.return}}function pA(t,s,a){var l=In();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ru(t)?By(s,a):(a=zf(t,s,a,l),a!==null&&(xn(a,t,l),zy(a,s,l)))}function Uy(t,s,a){var l=In();Sl(t,s,a,l)}function Sl(t,s,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ru(t))By(s,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var T=s.lastRenderedState,b=m(T,a);if(f.hasEagerState=!0,f.eagerState=b,bn(b,T))return cu(t,s,f,0),at===null&&lu(),!1}catch{}finally{}if(a=zf(t,s,f,l),a!==null)return xn(a,t,l),zy(a,s,l),!0}return!1}function wd(t,s,a,l){if(l={lane:2,revertLane:em(),action:l,hasEagerState:!1,eagerState:null,next:null},Ru(t)){if(s)throw Error(r(479))}else s=zf(t,a,l,2),s!==null&&xn(s,t,2)}function Ru(t){var s=t.alternate;return t===De||s!==null&&s===De}function By(t,s){Ka=Eu=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function zy(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,$o(t,a)}}var Cu={readContext:sn,use:wu,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt},qy={readContext:sn,use:wu,useCallback:function(t,s){return yn().memoizedState=[t,s===void 0?null:s],t},useContext:sn,useEffect:Sy,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Su(4194308,4,xy.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Su(4194308,4,t,s)},useInsertionEffect:function(t,s){Su(4,2,t,s)},useMemo:function(t,s){var a=yn();s=s===void 0?null:s;var l=t();if(Zr){hn(!0);try{t()}finally{hn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=yn();if(a!==void 0){var f=a(s);if(Zr){hn(!0);try{a(s)}finally{hn(!1)}}}else f=s;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=pA.bind(null,De,t),[l.memoizedState,t]},useRef:function(t){var s=yn();return t={current:t},s.memoizedState=t},useState:function(t){t=gd(t);var s=t.queue,a=Uy.bind(null,De,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:_d,useDeferredValue:function(t,s){var a=yn();return vd(a,t,s)},useTransition:function(){var t=gd(!1);return t=jy.bind(null,De,t.queue,!0,!1),yn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=De,f=yn();if(Ke){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),at===null)throw Error(r(349));(Fe&124)!==0||cy(l,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,Sy(hy.bind(null,l,m,t),[t]),l.flags|=2048,Xa(9,Au(),uy.bind(null,l,m,a,s),null),a},useId:function(){var t=yn(),s=at.identifierPrefix;if(Ke){var a=ts,l=es;a=(l&~(1<<32-nn(l)-1)).toString(32)+a,s=""+s+"R"+a,a=Tu++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=cA++,s=""+s+"r"+a.toString(32)+"";return t.memoizedState=s},useHostTransitionStatus:Td,useFormState:Ey,useActionState:Ey,useOptimistic:function(t){var s=yn();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=wd.bind(null,De,!0,a),a.dispatch=s,[t,s]},useMemoCache:dd,useCacheRefresh:function(){return yn().memoizedState=mA.bind(null,De)}},Hy={readContext:sn,use:wu,useCallback:Dy,useContext:sn,useEffect:Ry,useImperativeHandle:Ny,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:Oy,useReducer:bu,useRef:Ay,useState:function(){return bu(ss)},useDebugValue:_d,useDeferredValue:function(t,s){var a=xt();return My(a,nt.memoizedState,t,s)},useTransition:function(){var t=bu(ss)[0],s=xt().memoizedState;return[typeof t=="boolean"?t:bl(t),s]},useSyncExternalStore:ly,useId:Vy,useHostTransitionStatus:Td,useFormState:Ty,useActionState:Ty,useOptimistic:function(t,s){var a=xt();return my(a,nt,t,s)},useMemoCache:dd,useCacheRefresh:Ly},gA={readContext:sn,use:wu,useCallback:Dy,useContext:sn,useEffect:Ry,useImperativeHandle:Ny,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:Oy,useReducer:pd,useRef:Ay,useState:function(){return pd(ss)},useDebugValue:_d,useDeferredValue:function(t,s){var a=xt();return nt===null?vd(a,t,s):My(a,nt.memoizedState,t,s)},useTransition:function(){var t=pd(ss)[0],s=xt().memoizedState;return[typeof t=="boolean"?t:bl(t),s]},useSyncExternalStore:ly,useId:Vy,useHostTransitionStatus:Td,useFormState:by,useActionState:by,useOptimistic:function(t,s){var a=xt();return nt!==null?my(a,nt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:dd,useCacheRefresh:Ly},Wa=null,Rl=0;function Iu(t){var s=Rl;return Rl+=1,Wa===null&&(Wa=[]),ey(Wa,t,s)}function Cl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function xu(t,s){throw s.$$typeof===w?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Fy(t){var s=t._init;return s(t._payload)}function Gy(t){function s(B,V){if(t){var q=B.deletions;q===null?(B.deletions=[V],B.flags|=16):q.push(V)}}function a(B,V){if(!t)return null;for(;V!==null;)s(B,V),V=V.sibling;return null}function l(B){for(var V=new Map;B!==null;)B.key!==null?V.set(B.key,B):V.set(B.index,B),B=B.sibling;return V}function f(B,V){return B=Ji(B,V),B.index=0,B.sibling=null,B}function m(B,V,q){return B.index=q,t?(q=B.alternate,q!==null?(q=q.index,q<V?(B.flags|=67108866,V):q):(B.flags|=67108866,V)):(B.flags|=1048576,V)}function T(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function b(B,V,q,W){return V===null||V.tag!==6?(V=Hf(q,B.mode,W),V.return=B,V):(V=f(V,q),V.return=B,V)}function x(B,V,q,W){var de=q.type;return de===D?Q(B,V,q.props.children,W,q.key):V!==null&&(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===R&&Fy(de)===V.type)?(V=f(V,q.props),Cl(V,q),V.return=B,V):(V=hu(q.type,q.key,q.props,null,B.mode,W),Cl(V,q),V.return=B,V)}function F(B,V,q,W){return V===null||V.tag!==4||V.stateNode.containerInfo!==q.containerInfo||V.stateNode.implementation!==q.implementation?(V=Ff(q,B.mode,W),V.return=B,V):(V=f(V,q.children||[]),V.return=B,V)}function Q(B,V,q,W,de){return V===null||V.tag!==7?(V=Fr(q,B.mode,W,de),V.return=B,V):(V=f(V,q),V.return=B,V)}function ee(B,V,q){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Hf(""+V,B.mode,q),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case A:return q=hu(V.type,V.key,V.props,null,B.mode,q),Cl(q,V),q.return=B,q;case C:return V=Ff(V,B.mode,q),V.return=B,V;case R:var W=V._init;return V=W(V._payload),ee(B,V,q)}if(ut(V)||U(V))return V=Fr(V,B.mode,q,null),V.return=B,V;if(typeof V.then=="function")return ee(B,Iu(V),q);if(V.$$typeof===ie)return ee(B,pu(B,V),q);xu(B,V)}return null}function G(B,V,q,W){var de=V!==null?V.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return de!==null?null:b(B,V,""+q,W);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return q.key===de?x(B,V,q,W):null;case C:return q.key===de?F(B,V,q,W):null;case R:return de=q._init,q=de(q._payload),G(B,V,q,W)}if(ut(q)||U(q))return de!==null?null:Q(B,V,q,W,null);if(typeof q.then=="function")return G(B,V,Iu(q),W);if(q.$$typeof===ie)return G(B,V,pu(B,q),W);xu(B,q)}return null}function Y(B,V,q,W,de){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return B=B.get(q)||null,b(V,B,""+W,de);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case A:return B=B.get(W.key===null?q:W.key)||null,x(V,B,W,de);case C:return B=B.get(W.key===null?q:W.key)||null,F(V,B,W,de);case R:var Me=W._init;return W=Me(W._payload),Y(B,V,q,W,de)}if(ut(W)||U(W))return B=B.get(q)||null,Q(V,B,W,de,null);if(typeof W.then=="function")return Y(B,V,q,Iu(W),de);if(W.$$typeof===ie)return Y(B,V,q,pu(V,W),de);xu(V,W)}return null}function Se(B,V,q,W){for(var de=null,Me=null,ye=V,Te=V=0,Ft=null;ye!==null&&Te<q.length;Te++){ye.index>Te?(Ft=ye,ye=null):Ft=ye.sibling;var $e=G(B,ye,q[Te],W);if($e===null){ye===null&&(ye=Ft);break}t&&ye&&$e.alternate===null&&s(B,ye),V=m($e,V,Te),Me===null?de=$e:Me.sibling=$e,Me=$e,ye=Ft}if(Te===q.length)return a(B,ye),Ke&&Yr(B,Te),de;if(ye===null){for(;Te<q.length;Te++)ye=ee(B,q[Te],W),ye!==null&&(V=m(ye,V,Te),Me===null?de=ye:Me.sibling=ye,Me=ye);return Ke&&Yr(B,Te),de}for(ye=l(ye);Te<q.length;Te++)Ft=Y(ye,B,Te,q[Te],W),Ft!==null&&(t&&Ft.alternate!==null&&ye.delete(Ft.key===null?Te:Ft.key),V=m(Ft,V,Te),Me===null?de=Ft:Me.sibling=Ft,Me=Ft);return t&&ye.forEach(function(er){return s(B,er)}),Ke&&Yr(B,Te),de}function ve(B,V,q,W){if(q==null)throw Error(r(151));for(var de=null,Me=null,ye=V,Te=V=0,Ft=null,$e=q.next();ye!==null&&!$e.done;Te++,$e=q.next()){ye.index>Te?(Ft=ye,ye=null):Ft=ye.sibling;var er=G(B,ye,$e.value,W);if(er===null){ye===null&&(ye=Ft);break}t&&ye&&er.alternate===null&&s(B,ye),V=m(er,V,Te),Me===null?de=er:Me.sibling=er,Me=er,ye=Ft}if($e.done)return a(B,ye),Ke&&Yr(B,Te),de;if(ye===null){for(;!$e.done;Te++,$e=q.next())$e=ee(B,$e.value,W),$e!==null&&(V=m($e,V,Te),Me===null?de=$e:Me.sibling=$e,Me=$e);return Ke&&Yr(B,Te),de}for(ye=l(ye);!$e.done;Te++,$e=q.next())$e=Y(ye,B,Te,$e.value,W),$e!==null&&(t&&$e.alternate!==null&&ye.delete($e.key===null?Te:$e.key),V=m($e,V,Te),Me===null?de=$e:Me.sibling=$e,Me=$e);return t&&ye.forEach(function(yS){return s(B,yS)}),Ke&&Yr(B,Te),de}function st(B,V,q,W){if(typeof q=="object"&&q!==null&&q.type===D&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case A:e:{for(var de=q.key;V!==null;){if(V.key===de){if(de=q.type,de===D){if(V.tag===7){a(B,V.sibling),W=f(V,q.props.children),W.return=B,B=W;break e}}else if(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===R&&Fy(de)===V.type){a(B,V.sibling),W=f(V,q.props),Cl(W,q),W.return=B,B=W;break e}a(B,V);break}else s(B,V);V=V.sibling}q.type===D?(W=Fr(q.props.children,B.mode,W,q.key),W.return=B,B=W):(W=hu(q.type,q.key,q.props,null,B.mode,W),Cl(W,q),W.return=B,B=W)}return T(B);case C:e:{for(de=q.key;V!==null;){if(V.key===de)if(V.tag===4&&V.stateNode.containerInfo===q.containerInfo&&V.stateNode.implementation===q.implementation){a(B,V.sibling),W=f(V,q.children||[]),W.return=B,B=W;break e}else{a(B,V);break}else s(B,V);V=V.sibling}W=Ff(q,B.mode,W),W.return=B,B=W}return T(B);case R:return de=q._init,q=de(q._payload),st(B,V,q,W)}if(ut(q))return Se(B,V,q,W);if(U(q)){if(de=U(q),typeof de!="function")throw Error(r(150));return q=de.call(q),ve(B,V,q,W)}if(typeof q.then=="function")return st(B,V,Iu(q),W);if(q.$$typeof===ie)return st(B,V,pu(B,q),W);xu(B,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,V!==null&&V.tag===6?(a(B,V.sibling),W=f(V,q),W.return=B,B=W):(a(B,V),W=Hf(q,B.mode,W),W.return=B,B=W),T(B)):a(B,V)}return function(B,V,q,W){try{Rl=0;var de=st(B,V,q,W);return Wa=null,de}catch(ye){if(ye===yl||ye===yu)throw ye;var Me=An(29,ye,null,B.mode);return Me.lanes=W,Me.return=B,Me}finally{}}}var Za=Gy(!0),Yy=Gy(!1),Gn=ne(null),bi=null;function Us(t){var s=t.alternate;se(Lt,Lt.current&1),se(Gn,t),bi===null&&(s===null||$a.current!==null||s.memoizedState!==null)&&(bi=t)}function $y(t){if(t.tag===22){if(se(Lt,Lt.current),se(Gn,t),bi===null){var s=t.alternate;s!==null&&s.memoizedState!==null&&(bi=t)}}else Bs()}function Bs(){se(Lt,Lt.current),se(Gn,Gn.current)}function rs(t){oe(Gn),bi===t&&(bi=null),oe(Lt)}var Lt=ne(0);function Nu(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||fm(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function bd(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:v({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Ad={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=In(),f=ks(l);f.payload=s,a!=null&&(f.callback=a),s=Vs(t,f,l),s!==null&&(xn(s,t,l),vl(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=In(),f=ks(l);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=Vs(t,f,l),s!==null&&(xn(s,t,l),vl(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=In(),l=ks(a);l.tag=2,s!=null&&(l.callback=s),s=Vs(t,l,a),s!==null&&(xn(s,t,a),vl(s,t,a))}};function Ky(t,s,a,l,f,m,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,T):s.prototype&&s.prototype.isPureReactComponent?!cl(a,l)||!cl(f,m):!0}function Qy(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&Ad.enqueueReplaceState(s,s.state,null)}function Jr(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=v({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}var Du=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Xy(t){Du(t)}function Wy(t){console.error(t)}function Zy(t){Du(t)}function Ou(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Jy(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Sd(t,s,a){return a=ks(a),a.tag=3,a.payload={element:null},a.callback=function(){Ou(t,s)},a}function e_(t){return t=ks(t),t.tag=3,t}function t_(t,s,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;t.payload=function(){return f(m)},t.callback=function(){Jy(s,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Jy(s,a,l),typeof f!="function"&&(Ys===null?Ys=new Set([this]):Ys.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function yA(t,s,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&ml(s,a,f,!0),a=Gn.current,a!==null){switch(a.tag){case 13:return bi===null?Qd():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===ed?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),Wd(t,l,f)),!1;case 22:return a.flags|=65536,l===ed?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),Wd(t,l,f)),!1}throw Error(r(435,a.tag))}return Wd(t,l,f),Qd(),!1}if(Ke)return s=Gn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,l!==$f&&(t=Error(r(422),{cause:l}),dl(zn(t,a)))):(l!==$f&&(s=Error(r(423),{cause:l}),dl(zn(s,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=zn(l,a),f=Sd(t.stateNode,l,f),id(t,f),vt!==4&&(vt=2)),!1;var m=Error(r(520),{cause:l});if(m=zn(m,a),jl===null?jl=[m]:jl.push(m),vt!==4&&(vt=2),s===null)return!0;l=zn(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=Sd(a.stateNode,l,t),id(a,t),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ys===null||!Ys.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=e_(f),t_(f,t,a,l),id(a,f),!1}a=a.return}while(a!==null);return!1}var n_=Error(r(461)),qt=!1;function Kt(t,s,a,l){s.child=t===null?Yy(s,null,a,l):Za(s,t.child,a,l)}function i_(t,s,a,l,f){a=a.render;var m=s.ref;if("ref"in l){var T={};for(var b in l)b!=="ref"&&(T[b]=l[b])}else T=l;return Xr(s),l=ld(t,s,a,T,m,f),b=cd(),t!==null&&!qt?(ud(t,s,f),as(t,s,f)):(Ke&&b&&Gf(s),s.flags|=1,Kt(t,s,l,f),s.child)}function s_(t,s,a,l,f){if(t===null){var m=a.type;return typeof m=="function"&&!qf(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,r_(t,s,m,l,f)):(t=hu(a.type,null,l,s,s.mode,f),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!Md(t,f)){var T=m.memoizedProps;if(a=a.compare,a=a!==null?a:cl,a(T,l)&&t.ref===s.ref)return as(t,s,f)}return s.flags|=1,t=Ji(m,l),t.ref=s.ref,t.return=s,s.child=t}function r_(t,s,a,l,f){if(t!==null){var m=t.memoizedProps;if(cl(m,l)&&t.ref===s.ref)if(qt=!1,s.pendingProps=l=m,Md(t,f))(t.flags&131072)!==0&&(qt=!0);else return s.lanes=t.lanes,as(t,s,f)}return Rd(t,s,a,l,f)}function a_(t,s,a){var l=s.pendingProps,f=l.children,m=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=m!==null?m.baseLanes|a:a,t!==null){for(f=s.child=t.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;s.childLanes=m&~l}else s.childLanes=0,s.child=null;return o_(t,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&gu(s,m!==null?m.cachePool:null),m!==null?ry(s,m):rd(),$y(s);else return s.lanes=s.childLanes=536870912,o_(t,s,m!==null?m.baseLanes|a:a,a)}else m!==null?(gu(s,m.cachePool),ry(s,m),Bs(),s.memoizedState=null):(t!==null&&gu(s,null),rd(),Bs());return Kt(t,s,f,a),s.child}function o_(t,s,a,l){var f=Jf();return f=f===null?null:{parent:Vt._currentValue,pool:f},s.memoizedState={baseLanes:a,cachePool:f},t!==null&&gu(s,null),rd(),$y(s),t!==null&&ml(t,s,l,!0),null}function Mu(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function Rd(t,s,a,l,f){return Xr(s),a=ld(t,s,a,l,void 0,f),l=cd(),t!==null&&!qt?(ud(t,s,f),as(t,s,f)):(Ke&&l&&Gf(s),s.flags|=1,Kt(t,s,a,f),s.child)}function l_(t,s,a,l,f,m){return Xr(s),s.updateQueue=null,a=oy(s,l,a,f),ay(t),l=cd(),t!==null&&!qt?(ud(t,s,m),as(t,s,m)):(Ke&&l&&Gf(s),s.flags|=1,Kt(t,s,a,m),s.child)}function c_(t,s,a,l,f){if(Xr(s),s.stateNode===null){var m=qa,T=a.contextType;typeof T=="object"&&T!==null&&(m=sn(T)),m=new a(l,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Ad,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=l,m.state=s.memoizedState,m.refs={},td(s),T=a.contextType,m.context=typeof T=="object"&&T!==null?sn(T):qa,m.state=s.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(bd(s,a,T,l),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&Ad.enqueueReplaceState(m,m.state,null),Tl(s,l,m,f),El(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){m=s.stateNode;var b=s.memoizedProps,x=Jr(a,b);m.props=x;var F=m.context,Q=a.contextType;T=qa,typeof Q=="object"&&Q!==null&&(T=sn(Q));var ee=a.getDerivedStateFromProps;Q=typeof ee=="function"||typeof m.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,Q||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b||F!==T)&&Qy(s,m,l,T),Ps=!1;var G=s.memoizedState;m.state=G,Tl(s,l,m,f),El(),F=s.memoizedState,b||G!==F||Ps?(typeof ee=="function"&&(bd(s,a,ee,l),F=s.memoizedState),(x=Ps||Ky(s,a,x,l,G,F,T))?(Q||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=F),m.props=l,m.state=F,m.context=T,l=x):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{m=s.stateNode,nd(t,s),T=s.memoizedProps,Q=Jr(a,T),m.props=Q,ee=s.pendingProps,G=m.context,F=a.contextType,x=qa,typeof F=="object"&&F!==null&&(x=sn(F)),b=a.getDerivedStateFromProps,(F=typeof b=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==ee||G!==x)&&Qy(s,m,l,x),Ps=!1,G=s.memoizedState,m.state=G,Tl(s,l,m,f),El();var Y=s.memoizedState;T!==ee||G!==Y||Ps||t!==null&&t.dependencies!==null&&mu(t.dependencies)?(typeof b=="function"&&(bd(s,a,b,l),Y=s.memoizedState),(Q=Ps||Ky(s,a,Q,l,G,Y,x)||t!==null&&t.dependencies!==null&&mu(t.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,Y,x),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,Y,x)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=Y),m.props=l,m.state=Y,m.context=x,l=Q):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&G===t.memoizedState||(s.flags|=1024),l=!1)}return m=l,Mu(t,s),l=(s.flags&128)!==0,m||l?(m=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&l?(s.child=Za(s,t.child,null,f),s.child=Za(s,null,a,f)):Kt(t,s,a,f),s.memoizedState=m.state,t=s.child):t=as(t,s,f),t}function u_(t,s,a,l){return fl(),s.flags|=256,Kt(t,s,a,l),s.child}var Cd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Id(t){return{baseLanes:t,cachePool:Wg()}}function xd(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Yn),t}function h_(t,s,a){var l=s.pendingProps,f=!1,m=(s.flags&128)!==0,T;if((T=m)||(T=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),T&&(f=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,t===null){if(Ke){if(f?Us(s):Bs(),Ke){var b=_t,x;if(x=b){e:{for(x=b,b=wi;x.nodeType!==8;){if(!b){b=null;break e}if(x=ti(x.nextSibling),x===null){b=null;break e}}b=x}b!==null?(s.memoizedState={dehydrated:b,treeContext:Gr!==null?{id:es,overflow:ts}:null,retryLane:536870912,hydrationErrors:null},x=An(18,null,null,0),x.stateNode=b,x.return=s,s.child=x,pn=s,_t=null,x=!0):x=!1}x||Kr(s)}if(b=s.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return fm(b)?s.lanes=32:s.lanes=536870912,null;rs(s)}return b=l.children,l=l.fallback,f?(Bs(),f=s.mode,b=ju({mode:"hidden",children:b},f),l=Fr(l,f,a,null),b.return=s,l.return=s,b.sibling=l,s.child=b,f=s.child,f.memoizedState=Id(a),f.childLanes=xd(t,T,a),s.memoizedState=Cd,l):(Us(s),Nd(s,b))}if(x=t.memoizedState,x!==null&&(b=x.dehydrated,b!==null)){if(m)s.flags&256?(Us(s),s.flags&=-257,s=Dd(t,s,a)):s.memoizedState!==null?(Bs(),s.child=t.child,s.flags|=128,s=null):(Bs(),f=l.fallback,b=s.mode,l=ju({mode:"visible",children:l.children},b),f=Fr(f,b,a,null),f.flags|=2,l.return=s,f.return=s,l.sibling=f,s.child=l,Za(s,t.child,null,a),l=s.child,l.memoizedState=Id(a),l.childLanes=xd(t,T,a),s.memoizedState=Cd,s=f);else if(Us(s),fm(b)){if(T=b.nextSibling&&b.nextSibling.dataset,T)var F=T.dgst;T=F,l=Error(r(419)),l.stack="",l.digest=T,dl({value:l,source:null,stack:null}),s=Dd(t,s,a)}else if(qt||ml(t,s,a,!1),T=(a&t.childLanes)!==0,qt||T){if(T=at,T!==null&&(l=a&-a,l=(l&42)!==0?1:Cs(l),l=(l&(T.suspendedLanes|a))!==0?0:l,l!==0&&l!==x.retryLane))throw x.retryLane=l,za(t,l),xn(T,t,l),n_;b.data==="$?"||Qd(),s=Dd(t,s,a)}else b.data==="$?"?(s.flags|=192,s.child=t.child,s=null):(t=x.treeContext,_t=ti(b.nextSibling),pn=s,Ke=!0,$r=null,wi=!1,t!==null&&(Hn[Fn++]=es,Hn[Fn++]=ts,Hn[Fn++]=Gr,es=t.id,ts=t.overflow,Gr=s),s=Nd(s,l.children),s.flags|=4096);return s}return f?(Bs(),f=l.fallback,b=s.mode,x=t.child,F=x.sibling,l=Ji(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,F!==null?f=Ji(F,f):(f=Fr(f,b,a,null),f.flags|=2),f.return=s,l.return=s,l.sibling=f,s.child=l,l=f,f=s.child,b=t.child.memoizedState,b===null?b=Id(a):(x=b.cachePool,x!==null?(F=Vt._currentValue,x=x.parent!==F?{parent:F,pool:F}:x):x=Wg(),b={baseLanes:b.baseLanes|a,cachePool:x}),f.memoizedState=b,f.childLanes=xd(t,T,a),s.memoizedState=Cd,l):(Us(s),a=t.child,t=a.sibling,a=Ji(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(T=s.deletions,T===null?(s.deletions=[t],s.flags|=16):T.push(t)),s.child=a,s.memoizedState=null,a)}function Nd(t,s){return s=ju({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function ju(t,s){return t=An(22,t,null,s),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Dd(t,s,a){return Za(s,t.child,null,a),t=Nd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function f_(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),Qf(t.return,s,a)}function Od(t,s,a,l,f){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=a,m.tailMode=f)}function d_(t,s,a){var l=s.pendingProps,f=l.revealOrder,m=l.tail;if(Kt(t,s,l.children,a),l=Lt.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f_(t,a,s);else if(t.tag===19)f_(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(se(Lt,l),f){case"forwards":for(a=s.child,f=null;a!==null;)t=a.alternate,t!==null&&Nu(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),Od(s,!1,f,a,m);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(t=f.alternate,t!==null&&Nu(t)===null){s.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}Od(s,!0,a,null,m);break;case"together":Od(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function as(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Gs|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(ml(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=Ji(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=Ji(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Md(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&mu(t)))}function _A(t,s,a){switch(s.tag){case 3:et(s,s.stateNode.containerInfo),js(s,Vt,t.memoizedState.cache),fl();break;case 27:case 5:ci(s);break;case 4:et(s,s.stateNode.containerInfo);break;case 10:js(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Us(s),s.flags|=128,null):(a&s.child.childLanes)!==0?h_(t,s,a):(Us(s),t=as(t,s,a),t!==null?t.sibling:null);Us(s);break;case 19:var f=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(ml(t,s,a,!1),l=(a&s.childLanes)!==0),f){if(l)return d_(t,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),se(Lt,Lt.current),l)break;return null;case 22:case 23:return s.lanes=0,a_(t,s,a);case 24:js(s,Vt,t.memoizedState.cache)}return as(t,s,a)}function m_(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)qt=!0;else{if(!Md(t,a)&&(s.flags&128)===0)return qt=!1,_A(t,s,a);qt=(t.flags&131072)!==0}else qt=!1,Ke&&(s.flags&1048576)!==0&&Fg(s,du,s.index);switch(s.lanes=0,s.tag){case 16:e:{t=s.pendingProps;var l=s.elementType,f=l._init;if(l=f(l._payload),s.type=l,typeof l=="function")qf(l)?(t=Jr(l,t),s.tag=1,s=c_(null,s,l,t,a)):(s.tag=0,s=Rd(null,s,l,t,a));else{if(l!=null){if(f=l.$$typeof,f===ue){s.tag=11,s=i_(null,s,l,t,a);break e}else if(f===P){s.tag=14,s=s_(null,s,l,t,a);break e}}throw s=yt(l)||l,Error(r(306,s,""))}}return s;case 0:return Rd(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,f=Jr(l,s.pendingProps),c_(t,s,l,f,a);case 3:e:{if(et(s,s.stateNode.containerInfo),t===null)throw Error(r(387));l=s.pendingProps;var m=s.memoizedState;f=m.element,nd(t,s),Tl(s,l,null,a);var T=s.memoizedState;if(l=T.cache,js(s,Vt,l),l!==m.cache&&Xf(s,[Vt],a,!0),El(),l=T.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=u_(t,s,l,a);break e}else if(l!==f){f=zn(Error(r(424)),s),dl(f),s=u_(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_t=ti(t.firstChild),pn=s,Ke=!0,$r=null,wi=!0,a=Yy(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(fl(),l===f){s=as(t,s,a);break e}Kt(t,s,l,a)}s=s.child}return s;case 26:return Mu(t,s),t===null?(a=_v(s.type,null,s.pendingProps,null))?s.memoizedState=a:Ke||(a=s.type,t=s.pendingProps,l=Ku(Ae.current).createElement(a),l[jt]=s,l[Rt]=t,Xt(l,a,t),Et(l),s.stateNode=l):s.memoizedState=_v(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return ci(s),t===null&&Ke&&(l=s.stateNode=pv(s.type,s.pendingProps,Ae.current),pn=s,wi=!0,f=_t,Qs(s.type)?(dm=f,_t=ti(l.firstChild)):_t=f),Kt(t,s,s.pendingProps.children,a),Mu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Ke&&((f=l=_t)&&(l=YA(l,s.type,s.pendingProps,wi),l!==null?(s.stateNode=l,pn=s,_t=ti(l.firstChild),wi=!1,f=!0):f=!1),f||Kr(s)),ci(s),f=s.type,m=s.pendingProps,T=t!==null?t.memoizedProps:null,l=m.children,cm(f,m)?l=null:T!==null&&cm(f,T)&&(s.flags|=32),s.memoizedState!==null&&(f=ld(t,s,uA,null,null,a),Hl._currentValue=f),Mu(t,s),Kt(t,s,l,a),s.child;case 6:return t===null&&Ke&&((t=a=_t)&&(a=$A(a,s.pendingProps,wi),a!==null?(s.stateNode=a,pn=s,_t=null,t=!0):t=!1),t||Kr(s)),null;case 13:return h_(t,s,a);case 4:return et(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Za(s,null,l,a):Kt(t,s,l,a),s.child;case 11:return i_(t,s,s.type,s.pendingProps,a);case 7:return Kt(t,s,s.pendingProps,a),s.child;case 8:return Kt(t,s,s.pendingProps.children,a),s.child;case 12:return Kt(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,js(s,s.type,l.value),Kt(t,s,l.children,a),s.child;case 9:return f=s.type._context,l=s.pendingProps.children,Xr(s),f=sn(f),l=l(f),s.flags|=1,Kt(t,s,l,a),s.child;case 14:return s_(t,s,s.type,s.pendingProps,a);case 15:return r_(t,s,s.type,s.pendingProps,a);case 19:return d_(t,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},t===null?(a=ju(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=Ji(t.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return a_(t,s,a);case 24:return Xr(s),l=sn(Vt),t===null?(f=Jf(),f===null&&(f=at,m=Wf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),s.memoizedState={parent:l,cache:f},td(s),js(s,Vt,f)):((t.lanes&a)!==0&&(nd(t,s),Tl(s,null,null,a),El()),f=t.memoizedState,m=s.memoizedState,f.parent!==l?(f={parent:l,cache:l},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),js(s,Vt,l)):(l=m.cache,js(s,Vt,l),l!==f.cache&&Xf(s,[Vt],a,!0))),Kt(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function os(t){t.flags|=4}function p_(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!bv(s)){if(s=Gn.current,s!==null&&((Fe&4194048)===Fe?bi!==null:(Fe&62914560)!==Fe&&(Fe&536870912)===0||s!==bi))throw _l=ed,Zg;t.flags|=8192}}function Pu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Go():536870912,t.lanes|=s,no|=s)}function Il(t,s){if(!Ke)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function mt(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function vA(t,s,a){var l=s.pendingProps;switch(Yf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(s),null;case 1:return mt(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),is(Vt),Pn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(hl(s)?os(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,$g())),mt(s),null;case 26:return a=s.memoizedState,t===null?(os(s),a!==null?(mt(s),p_(s,a)):(mt(s),s.flags&=-16777217)):a?a!==t.memoizedState?(os(s),mt(s),p_(s,a)):(mt(s),s.flags&=-16777217):(t.memoizedProps!==l&&os(s),mt(s),s.flags&=-16777217),null;case 27:Qn(s),a=Ae.current;var f=s.type;if(t!==null&&s.stateNode!=null)t.memoizedProps!==l&&os(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return mt(s),null}t=pe.current,hl(s)?Gg(s):(t=pv(f,l,a),s.stateNode=t,os(s))}return mt(s),null;case 5:if(Qn(s),a=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&os(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return mt(s),null}if(t=pe.current,hl(s))Gg(s);else{switch(f=Ku(Ae.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}t[jt]=s,t[Rt]=l;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=t;e:switch(Xt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&os(s)}}return mt(s),s.flags&=-16777217,null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&os(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(t=Ae.current,hl(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,f=pn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[jt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||lv(t.nodeValue,a)),t||Kr(s)}else t=Ku(t).createTextNode(l),t[jt]=s,s.stateNode=t}return mt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=hl(s),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[jt]=s}else fl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mt(s),f=!1}else f=$g(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(rs(s),s):(rs(s),null)}if(rs(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=s.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)}return a!==t&&a&&(s.child.flags|=8192),Pu(s,s.updateQueue),mt(s),null;case 4:return Pn(),t===null&&sm(s.stateNode.containerInfo),mt(s),null;case 10:return is(s.type),mt(s),null;case 19:if(oe(Lt),f=s.memoizedState,f===null)return mt(s),null;if(l=(s.flags&128)!==0,m=f.rendering,m===null)if(l)Il(f,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Nu(t),m!==null){for(s.flags|=128,Il(f,!1),t=m.updateQueue,s.updateQueue=t,Pu(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Hg(a,t),a=a.sibling;return se(Lt,Lt.current&1|2),s.child}t=t.sibling}f.tail!==null&&gn()>Lu&&(s.flags|=128,l=!0,Il(f,!1),s.lanes=4194304)}else{if(!l)if(t=Nu(m),t!==null){if(s.flags|=128,l=!0,t=t.updateQueue,s.updateQueue=t,Pu(s,t),Il(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Ke)return mt(s),null}else 2*gn()-f.renderingStartTime>Lu&&a!==536870912&&(s.flags|=128,l=!0,Il(f,!1),s.lanes=4194304);f.isBackwards?(m.sibling=s.child,s.child=m):(t=f.last,t!==null?t.sibling=m:s.child=m,f.last=m)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=gn(),s.sibling=null,t=Lt.current,se(Lt,l?t&1|2:t&1),s):(mt(s),null);case 22:case 23:return rs(s),ad(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(mt(s),s.subtreeFlags&6&&(s.flags|=8192)):mt(s),a=s.updateQueue,a!==null&&Pu(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&oe(Wr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),is(Vt),mt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function EA(t,s){switch(Yf(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return is(Vt),Pn(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Qn(s),null;case 13:if(rs(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));fl()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return oe(Lt),null;case 4:return Pn(),null;case 10:return is(s.type),null;case 22:case 23:return rs(s),ad(),t!==null&&oe(Wr),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return is(Vt),null;case 25:return null;default:return null}}function g_(t,s){switch(Yf(s),s.tag){case 3:is(Vt),Pn();break;case 26:case 27:case 5:Qn(s);break;case 4:Pn();break;case 13:rs(s);break;case 19:oe(Lt);break;case 10:is(s.type);break;case 22:case 23:rs(s),ad(),t!==null&&oe(Wr);break;case 24:is(Vt)}}function xl(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var m=a.create,T=a.inst;l=m(),T.destroy=l}a=a.next}while(a!==f)}}catch(b){rt(s,s.return,b)}}function zs(t,s,a){try{var l=s.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&t)===t){var T=l.inst,b=T.destroy;if(b!==void 0){T.destroy=void 0,f=s;var x=a,F=b;try{F()}catch(Q){rt(f,x,Q)}}}l=l.next}while(l!==m)}}catch(Q){rt(s,s.return,Q)}}function y_(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{sy(s,a)}catch(l){rt(t,t.return,l)}}}function __(t,s,a){a.props=Jr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){rt(t,s,l)}}function Nl(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){rt(t,s,f)}}function Ai(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){rt(t,s,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){rt(t,s,f)}else a.current=null}function v_(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){rt(t,t.return,f)}}function jd(t,s,a){try{var l=t.stateNode;zA(l,t.type,a,s),l[Rt]=s}catch(f){rt(t,t.return,f)}}function E_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Qs(t.type)||t.tag===4}function Pd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||E_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Qs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kd(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=$u));else if(l!==4&&(l===27&&Qs(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(kd(t,s,a),t=t.sibling;t!==null;)kd(t,s,a),t=t.sibling}function ku(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&Qs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(ku(t,s,a),t=t.sibling;t!==null;)ku(t,s,a),t=t.sibling}function T_(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Xt(s,l,a),s[jt]=t,s[Rt]=a}catch(m){rt(t,t.return,m)}}var ls=!1,wt=!1,Vd=!1,w_=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function TA(t,s){if(t=t.containerInfo,om=eh,t=Mg(t),Pf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var T=0,b=-1,x=-1,F=0,Q=0,ee=t,G=null;t:for(;;){for(var Y;ee!==a||f!==0&&ee.nodeType!==3||(b=T+f),ee!==m||l!==0&&ee.nodeType!==3||(x=T+l),ee.nodeType===3&&(T+=ee.nodeValue.length),(Y=ee.firstChild)!==null;)G=ee,ee=Y;for(;;){if(ee===t)break t;if(G===a&&++F===f&&(b=T),G===m&&++Q===l&&(x=T),(Y=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=Y}a=b===-1||x===-1?null:{start:b,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(lm={focusedElem:t,selectionRange:a},eh=!1,Ht=s;Ht!==null;)if(s=Ht,t=s.child,(s.subtreeFlags&1024)!==0&&t!==null)t.return=s,Ht=t;else for(;Ht!==null;){switch(s=Ht,m=s.alternate,t=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,a=s,f=m.memoizedProps,m=m.memoizedState,l=a.stateNode;try{var Se=Jr(a.type,f,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(Se,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(ve){rt(a,a.return,ve)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)hm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":hm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,Ht=t;break}Ht=s.return}}function b_(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:qs(t,a),l&4&&xl(5,a);break;case 1:if(qs(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(T){rt(a,a.return,T)}else{var f=Jr(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(f,s,t.__reactInternalSnapshotBeforeUpdate)}catch(T){rt(a,a.return,T)}}l&64&&y_(a),l&512&&Nl(a,a.return);break;case 3:if(qs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{sy(t,s)}catch(T){rt(a,a.return,T)}}break;case 27:s===null&&l&4&&T_(a);case 26:case 5:qs(t,a),s===null&&l&4&&v_(a),l&512&&Nl(a,a.return);break;case 12:qs(t,a);break;case 13:qs(t,a),l&4&&R_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=NA.bind(null,a),KA(t,a))));break;case 22:if(l=a.memoizedState!==null||ls,!l){s=s!==null&&s.memoizedState!==null||wt,f=ls;var m=wt;ls=l,(wt=s)&&!m?Hs(t,a,(a.subtreeFlags&8772)!==0):qs(t,a),ls=f,wt=m}break;case 30:break;default:qs(t,a)}}function A_(t){var s=t.alternate;s!==null&&(t.alternate=null,A_(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Ns(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ft=null,_n=!1;function cs(t,s,a){for(a=a.child;a!==null;)S_(t,s,a),a=a.sibling}function S_(t,s,a){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(ze,a)}catch{}switch(a.tag){case 26:wt||Ai(a,s),cs(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:wt||Ai(a,s);var l=ft,f=_n;Qs(a.type)&&(ft=a.stateNode,_n=!1),cs(t,s,a),Ul(a.stateNode),ft=l,_n=f;break;case 5:wt||Ai(a,s);case 6:if(l=ft,f=_n,ft=null,cs(t,s,a),ft=l,_n=f,ft!==null)if(_n)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(a.stateNode)}catch(m){rt(a,s,m)}else try{ft.removeChild(a.stateNode)}catch(m){rt(a,s,m)}break;case 18:ft!==null&&(_n?(t=ft,dv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),$l(t)):dv(ft,a.stateNode));break;case 4:l=ft,f=_n,ft=a.stateNode.containerInfo,_n=!0,cs(t,s,a),ft=l,_n=f;break;case 0:case 11:case 14:case 15:wt||zs(2,a,s),wt||zs(4,a,s),cs(t,s,a);break;case 1:wt||(Ai(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&__(a,s,l)),cs(t,s,a);break;case 21:cs(t,s,a);break;case 22:wt=(l=wt)||a.memoizedState!==null,cs(t,s,a),wt=l;break;default:cs(t,s,a)}}function R_(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{$l(t)}catch(a){rt(s,s.return,a)}}function wA(t){switch(t.tag){case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new w_),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new w_),s;default:throw Error(r(435,t.tag))}}function Ld(t,s){var a=wA(t);s.forEach(function(l){var f=DA.bind(null,t,l);a.has(l)||(a.add(l),l.then(f,f))})}function Sn(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],m=t,T=s,b=T;e:for(;b!==null;){switch(b.tag){case 27:if(Qs(b.type)){ft=b.stateNode,_n=!1;break e}break;case 5:ft=b.stateNode,_n=!1;break e;case 3:case 4:ft=b.stateNode.containerInfo,_n=!0;break e}b=b.return}if(ft===null)throw Error(r(160));S_(m,T,f),ft=null,_n=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)C_(s,t),s=s.sibling}var ei=null;function C_(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Sn(s,t),Rn(t),l&4&&(zs(3,t,t.return),xl(3,t),zs(5,t,t.return));break;case 1:Sn(s,t),Rn(t),l&512&&(wt||a===null||Ai(a,a.return)),l&64&&ls&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ei;if(Sn(s,t),Rn(t),l&512&&(wt||a===null||Ai(a,a.return)),l&4){var m=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ir]||m[jt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),Xt(m,l,a),m[jt]=t,Et(m),l=m;break e;case"link":var T=Tv("link","href",f).get(l+(a.href||""));if(T){for(var b=0;b<T.length;b++)if(m=T[b],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(b,1);break t}}m=f.createElement(l),Xt(m,l,a),f.head.appendChild(m);break;case"meta":if(T=Tv("meta","content",f).get(l+(a.content||""))){for(b=0;b<T.length;b++)if(m=T[b],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(b,1);break t}}m=f.createElement(l),Xt(m,l,a),f.head.appendChild(m);break;default:throw Error(r(468,l))}m[jt]=t,Et(m),l=m}t.stateNode=l}else wv(f,t.type,t.stateNode);else t.stateNode=Ev(f,l,t.memoizedProps);else m!==l?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,l===null?wv(f,t.type,t.stateNode):Ev(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&jd(t,t.memoizedProps,a.memoizedProps)}break;case 27:Sn(s,t),Rn(t),l&512&&(wt||a===null||Ai(a,a.return)),a!==null&&l&4&&jd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Sn(s,t),Rn(t),l&512&&(wt||a===null||Ai(a,a.return)),t.flags&32){f=t.stateNode;try{Vn(f,"")}catch(Y){rt(t,t.return,Y)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,jd(t,f,a!==null?a.memoizedProps:f)),l&1024&&(Vd=!0);break;case 6:if(Sn(s,t),Rn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Y){rt(t,t.return,Y)}}break;case 3:if(Wu=null,f=ei,ei=Qu(s.containerInfo),Sn(s,t),ei=f,Rn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{$l(s.containerInfo)}catch(Y){rt(t,t.return,Y)}Vd&&(Vd=!1,I_(t));break;case 4:l=ei,ei=Qu(t.stateNode.containerInfo),Sn(s,t),Rn(t),ei=l;break;case 12:Sn(s,t),Rn(t);break;case 13:Sn(s,t),Rn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Fd=gn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ld(t,l)));break;case 22:f=t.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,F=ls,Q=wt;if(ls=F||f,wt=Q||x,Sn(s,t),wt=Q,ls=F,Rn(t),l&8192)e:for(s=t.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||x||ls||wt||ea(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){x=a=s;try{if(m=x.stateNode,f)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{b=x.stateNode;var ee=x.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Y){rt(x,x.return,Y)}}}else if(s.tag===6){if(a===null){x=s;try{x.stateNode.nodeValue=f?"":x.memoizedProps}catch(Y){rt(x,x.return,Y)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ld(t,a))));break;case 19:Sn(s,t),Rn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ld(t,l)));break;case 30:break;case 21:break;default:Sn(s,t),Rn(t)}}function Rn(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(E_(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,m=Pd(t);ku(t,m,f);break;case 5:var T=a.stateNode;a.flags&32&&(Vn(T,""),a.flags&=-33);var b=Pd(t);ku(t,b,T);break;case 3:case 4:var x=a.stateNode.containerInfo,F=Pd(t);kd(t,F,x);break;default:throw Error(r(161))}}catch(Q){rt(t,t.return,Q)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function I_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;I_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function qs(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)b_(t,s.alternate,s),s=s.sibling}function ea(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:zs(4,s,s.return),ea(s);break;case 1:Ai(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&__(s,s.return,a),ea(s);break;case 27:Ul(s.stateNode);case 26:case 5:Ai(s,s.return),ea(s);break;case 22:s.memoizedState===null&&ea(s);break;case 30:ea(s);break;default:ea(s)}t=t.sibling}}function Hs(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,f=t,m=s,T=m.flags;switch(m.tag){case 0:case 11:case 15:Hs(f,m,a),xl(4,m);break;case 1:if(Hs(f,m,a),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){rt(l,l.return,F)}if(l=m,f=l.updateQueue,f!==null){var b=l.stateNode;try{var x=f.shared.hiddenCallbacks;if(x!==null)for(f.shared.hiddenCallbacks=null,f=0;f<x.length;f++)iy(x[f],b)}catch(F){rt(l,l.return,F)}}a&&T&64&&y_(m),Nl(m,m.return);break;case 27:T_(m);case 26:case 5:Hs(f,m,a),a&&l===null&&T&4&&v_(m),Nl(m,m.return);break;case 12:Hs(f,m,a);break;case 13:Hs(f,m,a),a&&T&4&&R_(f,m);break;case 22:m.memoizedState===null&&Hs(f,m,a),Nl(m,m.return);break;case 30:break;default:Hs(f,m,a)}s=s.sibling}}function Ud(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&pl(a))}function Bd(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&pl(t))}function Si(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)x_(t,s,a,l),s=s.sibling}function x_(t,s,a,l){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Si(t,s,a,l),f&2048&&xl(9,s);break;case 1:Si(t,s,a,l);break;case 3:Si(t,s,a,l),f&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&pl(t)));break;case 12:if(f&2048){Si(t,s,a,l),t=s.stateNode;try{var m=s.memoizedProps,T=m.id,b=m.onPostCommit;typeof b=="function"&&b(T,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(x){rt(s,s.return,x)}}else Si(t,s,a,l);break;case 13:Si(t,s,a,l);break;case 23:break;case 22:m=s.stateNode,T=s.alternate,s.memoizedState!==null?m._visibility&2?Si(t,s,a,l):Dl(t,s):m._visibility&2?Si(t,s,a,l):(m._visibility|=2,Ja(t,s,a,l,(s.subtreeFlags&10256)!==0)),f&2048&&Ud(T,s);break;case 24:Si(t,s,a,l),f&2048&&Bd(s.alternate,s);break;default:Si(t,s,a,l)}}function Ja(t,s,a,l,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=t,T=s,b=a,x=l,F=T.flags;switch(T.tag){case 0:case 11:case 15:Ja(m,T,b,x,f),xl(8,T);break;case 23:break;case 22:var Q=T.stateNode;T.memoizedState!==null?Q._visibility&2?Ja(m,T,b,x,f):Dl(m,T):(Q._visibility|=2,Ja(m,T,b,x,f)),f&&F&2048&&Ud(T.alternate,T);break;case 24:Ja(m,T,b,x,f),f&&F&2048&&Bd(T.alternate,T);break;default:Ja(m,T,b,x,f)}s=s.sibling}}function Dl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,f=l.flags;switch(l.tag){case 22:Dl(a,l),f&2048&&Ud(l.alternate,l);break;case 24:Dl(a,l),f&2048&&Bd(l.alternate,l);break;default:Dl(a,l)}s=s.sibling}}var Ol=8192;function eo(t){if(t.subtreeFlags&Ol)for(t=t.child;t!==null;)N_(t),t=t.sibling}function N_(t){switch(t.tag){case 26:eo(t),t.flags&Ol&&t.memoizedState!==null&&oS(ei,t.memoizedState,t.memoizedProps);break;case 5:eo(t);break;case 3:case 4:var s=ei;ei=Qu(t.stateNode.containerInfo),eo(t),ei=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=Ol,Ol=16777216,eo(t),Ol=s):eo(t));break;default:eo(t)}}function D_(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Ml(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Ht=l,M_(l,t)}D_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)O_(t),t=t.sibling}function O_(t){switch(t.tag){case 0:case 11:case 15:Ml(t),t.flags&2048&&zs(9,t,t.return);break;case 3:Ml(t);break;case 12:Ml(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Vu(t)):Ml(t);break;default:Ml(t)}}function Vu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Ht=l,M_(l,t)}D_(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:zs(8,s,s.return),Vu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Vu(s));break;default:Vu(s)}t=t.sibling}}function M_(t,s){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:zs(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:pl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ht=l;else e:for(a=t;Ht!==null;){l=Ht;var f=l.sibling,m=l.return;if(A_(l),l===a){Ht=null;break e}if(f!==null){f.return=m,Ht=f;break e}Ht=m}}}var bA={getCacheForType:function(t){var s=sn(Vt),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a}},AA=typeof WeakMap=="function"?WeakMap:Map,We=0,at=null,je=null,Fe=0,Ze=0,Cn=null,Fs=!1,to=!1,zd=!1,us=0,vt=0,Gs=0,ta=0,qd=0,Yn=0,no=0,jl=null,vn=null,Hd=!1,Fd=0,Lu=1/0,Uu=null,Ys=null,Qt=0,$s=null,io=null,so=0,Gd=0,Yd=null,j_=null,Pl=0,$d=null;function In(){if((We&2)!==0&&Fe!==0)return Fe&-Fe;if(K.T!==null){var t=Ga;return t!==0?t:em()}return Is()}function P_(){Yn===0&&(Yn=(Fe&536870912)===0||Ke?Fo():536870912);var t=Gn.current;return t!==null&&(t.flags|=32),Yn}function xn(t,s,a){(t===at&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)&&(ro(t,0),Ks(t,Fe,Yn,!1)),qi(t,a),((We&2)===0||t!==at)&&(t===at&&((We&2)===0&&(ta|=a),vt===4&&Ks(t,Fe,Yn,!1)),Ri(t))}function k_(t,s,a){if((We&6)!==0)throw Error(r(327));var l=!a&&(s&124)===0&&(s&t.expiredLanes)===0||Cr(t,s),f=l?CA(t,s):Xd(t,s,!0),m=l;do{if(f===0){to&&!l&&Ks(t,s,0,!1);break}else{if(a=t.current.alternate,m&&!SA(a)){f=Xd(t,s,!1),m=!1;continue}if(f===2){if(m=s,t.errorRecoveryDisabledLanes&m)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var b=t;f=jl;var x=b.current.memoizedState.isDehydrated;if(x&&(ro(b,T).flags|=256),T=Xd(b,T,!1),T!==2){if(zd&&!x){b.errorRecoveryDisabledLanes|=m,ta|=m,f=4;break e}m=vn,vn=f,m!==null&&(vn===null?vn=m:vn.push.apply(vn,m))}f=T}if(m=!1,f!==2)continue}}if(f===1){ro(t,0),Ks(t,s,0,!0);break}e:{switch(l=t,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ks(l,s,Yn,!Fs);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Fd+300-gn(),10<f)){if(Ks(l,s,Yn,!Fs),wa(l,0,!0)!==0)break e;l.timeoutHandle=hv(V_.bind(null,l,a,vn,Uu,Hd,s,Yn,ta,no,Fs,m,2,-0,0),f);break e}V_(l,a,vn,Uu,Hd,s,Yn,ta,no,Fs,m,0,-0,0)}}break}while(!0);Ri(t)}function V_(t,s,a,l,f,m,T,b,x,F,Q,ee,G,Y){if(t.timeoutHandle=-1,ee=s.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(ql={stylesheets:null,count:0,unsuspend:aS},N_(s),ee=lS(),ee!==null)){t.cancelPendingCommit=ee(F_.bind(null,t,s,m,a,l,f,T,b,x,Q,1,G,Y)),Ks(t,m,T,!F);return}F_(t,s,m,a,l,f,T,b,x)}function SA(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],m=f.getSnapshot;f=f.value;try{if(!bn(m(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ks(t,s,a,l){s&=~qd,s&=~ta,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var f=s;0<f;){var m=31-nn(f),T=1<<m;l[m]=-1,f&=~T}a!==0&&hi(t,a,s)}function Bu(){return(We&6)===0?(kl(0),!1):!0}function Kd(){if(je!==null){if(Ze===0)var t=je.return;else t=je,ns=Qr=null,hd(t),Wa=null,Rl=0,t=je;for(;t!==null;)g_(t.alternate,t),t=t.return;je=null}}function ro(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,HA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Kd(),at=t,je=a=Ji(t.current,null),Fe=s,Ze=0,Cn=null,Fs=!1,to=Cr(t,s),zd=!1,no=Yn=qd=ta=Gs=vt=0,vn=jl=null,Hd=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var f=31-nn(l),m=1<<f;s|=t[f],l&=~m}return us=s,lu(),a}function L_(t,s){De=null,K.H=Cu,s===yl||s===yu?(s=ty(),Ze=3):s===Zg?(s=ty(),Ze=4):Ze=s===n_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Cn=s,je===null&&(vt=1,Ou(t,zn(s,t.current)))}function U_(){var t=K.H;return K.H=Cu,t===null?Cu:t}function B_(){var t=K.A;return K.A=bA,t}function Qd(){vt=4,Fs||(Fe&4194048)!==Fe&&Gn.current!==null||(to=!0),(Gs&134217727)===0&&(ta&134217727)===0||at===null||Ks(at,Fe,Yn,!1)}function Xd(t,s,a){var l=We;We|=2;var f=U_(),m=B_();(at!==t||Fe!==s)&&(Uu=null,ro(t,s)),s=!1;var T=vt;e:do try{if(Ze!==0&&je!==null){var b=je,x=Cn;switch(Ze){case 8:Kd(),T=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(s=!0);var F=Ze;if(Ze=0,Cn=null,ao(t,b,x,F),a&&to){T=0;break e}break;default:F=Ze,Ze=0,Cn=null,ao(t,b,x,F)}}RA(),T=vt;break}catch(Q){L_(t,Q)}while(!0);return s&&t.shellSuspendCounter++,ns=Qr=null,We=l,K.H=f,K.A=m,je===null&&(at=null,Fe=0,lu()),T}function RA(){for(;je!==null;)z_(je)}function CA(t,s){var a=We;We|=2;var l=U_(),f=B_();at!==t||Fe!==s?(Uu=null,Lu=gn()+500,ro(t,s)):to=Cr(t,s);e:do try{if(Ze!==0&&je!==null){s=je;var m=Cn;t:switch(Ze){case 1:Ze=0,Cn=null,ao(t,s,m,1);break;case 2:case 9:if(Jg(m)){Ze=0,Cn=null,q_(s);break}s=function(){Ze!==2&&Ze!==9||at!==t||(Ze=7),Ri(t)},m.then(s,s);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Jg(m)?(Ze=0,Cn=null,q_(s)):(Ze=0,Cn=null,ao(t,s,m,7));break;case 5:var T=null;switch(je.tag){case 26:T=je.memoizedState;case 5:case 27:var b=je;if(!T||bv(T)){Ze=0,Cn=null;var x=b.sibling;if(x!==null)je=x;else{var F=b.return;F!==null?(je=F,zu(F)):je=null}break t}}Ze=0,Cn=null,ao(t,s,m,5);break;case 6:Ze=0,Cn=null,ao(t,s,m,6);break;case 8:Kd(),vt=6;break e;default:throw Error(r(462))}}IA();break}catch(Q){L_(t,Q)}while(!0);return ns=Qr=null,K.H=l,K.A=f,We=a,je!==null?0:(at=null,Fe=0,lu(),vt)}function IA(){for(;je!==null&&!Ea();)z_(je)}function z_(t){var s=m_(t.alternate,t,us);t.memoizedProps=t.pendingProps,s===null?zu(t):je=s}function q_(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=l_(a,s,s.pendingProps,s.type,void 0,Fe);break;case 11:s=l_(a,s,s.pendingProps,s.type.render,s.ref,Fe);break;case 5:hd(s);default:g_(a,s),s=je=Hg(s,us),s=m_(a,s,us)}t.memoizedProps=t.pendingProps,s===null?zu(t):je=s}function ao(t,s,a,l){ns=Qr=null,hd(s),Wa=null,Rl=0;var f=s.return;try{if(yA(t,f,s,a,Fe)){vt=1,Ou(t,zn(a,t.current)),je=null;return}}catch(m){if(f!==null)throw je=f,m;vt=1,Ou(t,zn(a,t.current)),je=null;return}s.flags&32768?(Ke||l===1?t=!0:to||(Fe&536870912)!==0?t=!1:(Fs=t=!0,(l===2||l===9||l===3||l===6)&&(l=Gn.current,l!==null&&l.tag===13&&(l.flags|=16384))),H_(s,t)):zu(s)}function zu(t){var s=t;do{if((s.flags&32768)!==0){H_(s,Fs);return}t=s.return;var a=vA(s.alternate,s,us);if(a!==null){je=a;return}if(s=s.sibling,s!==null){je=s;return}je=s=t}while(s!==null);vt===0&&(vt=5)}function H_(t,s){do{var a=EA(t.alternate,t);if(a!==null){a.flags&=32767,je=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){je=t;return}je=t=a}while(t!==null);vt=6,je=null}function F_(t,s,a,l,f,m,T,b,x){t.cancelPendingCommit=null;do qu();while(Qt!==0);if((We&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(m=s.lanes|s.childLanes,m|=Bf,Yo(t,a,m,T,b,x),t===at&&(je=at=null,Fe=0),io=s,$s=t,so=a,Gd=m,Yd=f,j_=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,OA(Oe,function(){return Q_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=K.T,K.T=null,f=ae.p,ae.p=2,T=We,We|=4;try{TA(t,s,a)}finally{We=T,ae.p=f,K.T=l}}Qt=1,G_(),Y_(),$_()}}function G_(){if(Qt===1){Qt=0;var t=$s,s=io,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var l=ae.p;ae.p=2;var f=We;We|=4;try{C_(s,t);var m=lm,T=Mg(t.containerInfo),b=m.focusedElem,x=m.selectionRange;if(T!==b&&b&&b.ownerDocument&&Og(b.ownerDocument.documentElement,b)){if(x!==null&&Pf(b)){var F=x.start,Q=x.end;if(Q===void 0&&(Q=F),"selectionStart"in b)b.selectionStart=F,b.selectionEnd=Math.min(Q,b.value.length);else{var ee=b.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var Y=G.getSelection(),Se=b.textContent.length,ve=Math.min(x.start,Se),st=x.end===void 0?ve:Math.min(x.end,Se);!Y.extend&&ve>st&&(T=st,st=ve,ve=T);var B=Dg(b,ve),V=Dg(b,st);if(B&&V&&(Y.rangeCount!==1||Y.anchorNode!==B.node||Y.anchorOffset!==B.offset||Y.focusNode!==V.node||Y.focusOffset!==V.offset)){var q=ee.createRange();q.setStart(B.node,B.offset),Y.removeAllRanges(),ve>st?(Y.addRange(q),Y.extend(V.node,V.offset)):(q.setEnd(V.node,V.offset),Y.addRange(q))}}}}for(ee=[],Y=b;Y=Y.parentNode;)Y.nodeType===1&&ee.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ee.length;b++){var W=ee[b];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}eh=!!om,lm=om=null}finally{We=f,ae.p=l,K.T=a}}t.current=s,Qt=2}}function Y_(){if(Qt===2){Qt=0;var t=$s,s=io,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var l=ae.p;ae.p=2;var f=We;We|=4;try{b_(t,s.alternate,s)}finally{We=f,ae.p=l,K.T=a}}Qt=3}}function $_(){if(Qt===4||Qt===3){Qt=0,qo();var t=$s,s=io,a=so,l=j_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Qt=5:(Qt=0,io=$s=null,K_(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ys=null),ba(a),s=s.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(ze,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=K.T,f=ae.p,ae.p=2,K.T=null;try{for(var m=t.onRecoverableError,T=0;T<l.length;T++){var b=l[T];m(b.value,{componentStack:b.stack})}}finally{K.T=s,ae.p=f}}(so&3)!==0&&qu(),Ri(t),f=t.pendingLanes,(a&4194090)!==0&&(f&42)!==0?t===$d?Pl++:(Pl=0,$d=t):Pl=0,kl(0)}}function K_(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,pl(s)))}function qu(t){return G_(),Y_(),$_(),Q_()}function Q_(){if(Qt!==5)return!1;var t=$s,s=Gd;Gd=0;var a=ba(so),l=K.T,f=ae.p;try{ae.p=32>a?32:a,K.T=null,a=Yd,Yd=null;var m=$s,T=so;if(Qt=0,io=$s=null,so=0,(We&6)!==0)throw Error(r(331));var b=We;if(We|=4,O_(m.current),x_(m,m.current,T,a),We=b,kl(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(ze,m)}catch{}return!0}finally{ae.p=f,K.T=l,K_(t,s)}}function X_(t,s,a){s=zn(a,s),s=Sd(t.stateNode,s,2),t=Vs(t,s,2),t!==null&&(qi(t,2),Ri(t))}function rt(t,s,a){if(t.tag===3)X_(t,t,a);else for(;s!==null;){if(s.tag===3){X_(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ys===null||!Ys.has(l))){t=zn(a,t),a=e_(2),l=Vs(s,a,2),l!==null&&(t_(a,l,s,t),qi(l,2),Ri(l));break}}s=s.return}}function Wd(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new AA;var f=new Set;l.set(s,f)}else f=l.get(s),f===void 0&&(f=new Set,l.set(s,f));f.has(a)||(zd=!0,f.add(a),t=xA.bind(null,t,s,a),s.then(t,t))}function xA(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,at===t&&(Fe&a)===a&&(vt===4||vt===3&&(Fe&62914560)===Fe&&300>gn()-Fd?(We&2)===0&&ro(t,0):qd|=a,no===Fe&&(no=0)),Ri(t)}function W_(t,s){s===0&&(s=Go()),t=za(t,s),t!==null&&(qi(t,s),Ri(t))}function NA(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),W_(t,a)}function DA(t,s){var a=0;switch(t.tag){case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),W_(t,a)}function OA(t,s){return Ue(t,s)}var Hu=null,oo=null,Zd=!1,Fu=!1,Jd=!1,na=0;function Ri(t){t!==oo&&t.next===null&&(oo===null?Hu=oo=t:oo=oo.next=t),Fu=!0,Zd||(Zd=!0,jA())}function kl(t,s){if(!Jd&&Fu){Jd=!0;do for(var a=!1,l=Hu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var T=l.suspendedLanes,b=l.pingedLanes;m=(1<<31-nn(42|t)+1)-1,m&=f&~(T&~b),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,tv(l,m))}else m=Fe,m=wa(l,l===at?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Cr(l,m)||(a=!0,tv(l,m));l=l.next}while(a);Jd=!1}}function MA(){Z_()}function Z_(){Fu=Zd=!1;var t=0;na!==0&&(qA()&&(t=na),na=0);for(var s=gn(),a=null,l=Hu;l!==null;){var f=l.next,m=J_(l,s);m===0?(l.next=null,a===null?Hu=f:a.next=f,f===null&&(oo=a)):(a=l,(t!==0||(m&3)!==0)&&(Fu=!0)),l=f}kl(t)}function J_(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var T=31-nn(m),b=1<<T,x=f[T];x===-1?((b&a)===0||(b&l)!==0)&&(f[T]=Ho(b,s)):x<=s&&(t.expiredLanes|=b),m&=~b}if(s=at,a=Fe,a=wa(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Rs(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Cr(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&Rs(l),ba(a)){case 2:case 8:a=Be;break;case 32:a=Oe;break;case 268435456:a=tn;break;default:a=Oe}return l=ev.bind(null,t),a=Ue(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&Rs(l),t.callbackPriority=2,t.callbackNode=null,2}function ev(t,s){if(Qt!==0&&Qt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(qu()&&t.callbackNode!==a)return null;var l=Fe;return l=wa(t,t===at?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(k_(t,l,s),J_(t,gn()),t.callbackNode!=null&&t.callbackNode===a?ev.bind(null,t):null)}function tv(t,s){if(qu())return null;k_(t,s,!0)}function jA(){FA(function(){(We&6)!==0?Ue(Ee,MA):Z_()})}function em(){return na===0&&(na=Fo()),na}function nv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:xa(""+t)}function iv(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function PA(t,s,a,l,f){if(s==="submit"&&a&&a.stateNode===f){var m=nv((f[Rt]||null).action),T=l.submitter;T&&(s=(s=T[Rt]||null)?nv(s.formAction):T.getAttribute("formAction"),s!==null&&(m=s,T=null));var b=new Na("action","action",null,l,f);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(na!==0){var x=T?iv(f,T):new FormData(f);Ed(a,{pending:!0,data:x,method:f.method,action:m},null,x)}}else typeof m=="function"&&(b.preventDefault(),x=T?iv(f,T):new FormData(f),Ed(a,{pending:!0,data:x,method:f.method,action:m},m,x))},currentTarget:f}]})}}for(var tm=0;tm<Uf.length;tm++){var nm=Uf[tm],kA=nm.toLowerCase(),VA=nm[0].toUpperCase()+nm.slice(1);Jn(kA,"on"+VA)}Jn(kg,"onAnimationEnd"),Jn(Vg,"onAnimationIteration"),Jn(Lg,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(eA,"onTransitionRun"),Jn(tA,"onTransitionStart"),Jn(nA,"onTransitionCancel"),Jn(Ug,"onTransitionEnd"),Fi("onMouseEnter",["mouseout","mouseover"]),Fi("onMouseLeave",["mouseout","mouseover"]),Fi("onPointerEnter",["pointerout","pointerover"]),Fi("onPointerLeave",["pointerout","pointerover"]),Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function sv(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var m=void 0;if(s)for(var T=l.length-1;0<=T;T--){var b=l[T],x=b.instance,F=b.currentTarget;if(b=b.listener,x!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=F;try{m(f)}catch(Q){Du(Q)}f.currentTarget=null,m=x}else for(T=0;T<l.length;T++){if(b=l[T],x=b.instance,F=b.currentTarget,b=b.listener,x!==m&&f.isPropagationStopped())break e;m=b,f.currentTarget=F;try{m(f)}catch(Q){Du(Q)}f.currentTarget=null,m=x}}}}function Pe(t,s){var a=s[Ko];a===void 0&&(a=s[Ko]=new Set);var l=t+"__bubble";a.has(l)||(rv(s,t,2,!1),a.add(l))}function im(t,s,a){var l=0;s&&(l|=4),rv(a,t,l,s)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function sm(t){if(!t[Gu]){t[Gu]=!0,Qo.forEach(function(a){a!=="selectionchange"&&(LA.has(a)||im(a,!1,t),im(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Gu]||(s[Gu]=!0,im("selectionchange",!1,s))}}function rv(t,s,a,l){switch(xv(s)){case 2:var f=hS;break;case 8:f=fS;break;default:f=_m}a=f.bind(null,s,a,t),f=void 0,!Un||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(s,a,{capture:!0,passive:f}):t.addEventListener(s,a,!0):f!==void 0?t.addEventListener(s,a,{passive:f}):t.addEventListener(s,a,!1)}function rm(t,s,a,l,f){var m=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var b=l.stateNode.containerInfo;if(b===f)break;if(T===4)for(T=l.return;T!==null;){var x=T.tag;if((x===3||x===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;b!==null;){if(T=Hi(b),T===null)return;if(x=T.tag,x===5||x===6||x===26||x===27){l=m=T;continue e}b=b.parentNode}}l=l.return}$c(function(){var F=m,Q=Ln(a),ee=[];e:{var G=Bg.get(t);if(G!==void 0){var Y=Na,Se=t;switch(t){case"keypress":if(yi(a)===0)break e;case"keydown":case"keyup":Y=ka;break;case"focusin":Se="focus",Y=Ma;break;case"focusout":Se="blur",Y=Ma;break;case"beforeblur":case"afterblur":Y=Ma;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Df;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=tu;break;case kg:case Vg:case Lg:Y=ja;break;case Ug:Y=iu;break;case"scroll":case"scrollend":Y=Kc;break;case"wheel":Y=Va;break;case"copy":case"cut":case"paste":Y=Pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=ol;break;case"toggle":case"beforetoggle":Y=ru}var ve=(s&4)!==0,st=!ve&&(t==="scroll"||t==="scrollend"),B=ve?G!==null?G+"Capture":null:G;ve=[];for(var V=F,q;V!==null;){var W=V;if(q=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||q===null||B===null||(W=Pr(V,B),W!=null&&ve.push(Ll(V,W,q))),st)break;V=V.return}0<ve.length&&(G=new Y(G,Se,null,a,Q),ee.push({event:G,listeners:ve}))}}if((s&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",G&&a!==$i&&(Se=a.relatedTarget||a.fromElement)&&(Hi(Se)||Se[kn]))break e;if((Y||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(Se=a.relatedTarget||a.toElement,Y=F,Se=Se?Hi(Se):null,Se!==null&&(st=c(Se),ve=Se.tag,Se!==st||ve!==5&&ve!==27&&ve!==6)&&(Se=null)):(Y=null,Se=F),Y!==Se)){if(ve=Bn,W="onMouseLeave",B="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(ve=ol,W="onPointerLeave",B="onPointerEnter",V="pointer"),st=Y==null?G:di(Y),q=Se==null?G:di(Se),G=new ve(W,V+"leave",Y,a,Q),G.target=st,G.relatedTarget=q,W=null,Hi(Q)===F&&(ve=new ve(B,V+"enter",Se,a,Q),ve.target=q,ve.relatedTarget=st,W=ve),st=W,Y&&Se)t:{for(ve=Y,B=Se,V=0,q=ve;q;q=lo(q))V++;for(q=0,W=B;W;W=lo(W))q++;for(;0<V-q;)ve=lo(ve),V--;for(;0<q-V;)B=lo(B),q--;for(;V--;){if(ve===B||B!==null&&ve===B.alternate)break t;ve=lo(ve),B=lo(B)}ve=null}else ve=null;Y!==null&&av(ee,G,Y,ve,!1),Se!==null&&st!==null&&av(ee,st,Se,ve,!0)}}e:{if(G=F?di(F):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var de=Sg;else if(kt(G))if(Rg)de=Wb;else{de=Qb;var Me=Kb}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&el(F.elementType)&&(de=Sg):de=Xb;if(de&&(de=de(t,F))){Zi(ee,de,a,Q);break e}Me&&Me(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Os(G,"number",G.value)}switch(Me=F?di(F):window,t){case"focusin":(kt(Me)||Me.contentEditable==="true")&&(La=Me,kf=F,ul=null);break;case"focusout":ul=kf=La=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,jg(ee,a,Q);break;case"selectionchange":if(Jb)break;case"keydown":case"keyup":jg(ee,a,Q)}var ye;if(Ei)e:{switch(t){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else qe?$(t,a)&&(Te="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(E&&a.locale!=="ko"&&(qe||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&qe&&(ye=nl()):(gi=Q,Ms="value"in gi?gi.value:gi.textContent,qe=!0)),Me=Yu(F,Te),0<Me.length&&(Te=new rl(Te,t,null,a,Q),ee.push({event:Te,listeners:Me}),ye?Te.data=ye:(ye=re(a),ye!==null&&(Te.data=ye)))),(ye=_?Pt(t,a):He(t,a))&&(Te=Yu(F,"onBeforeInput"),0<Te.length&&(Me=new rl("onBeforeInput","beforeinput",null,a,Q),ee.push({event:Me,listeners:Te}),Me.data=ye)),PA(ee,t,F,a,Q)}sv(ee,s)})}function Ll(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Yu(t,s){for(var a=s+"Capture",l=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Pr(t,a),f!=null&&l.unshift(Ll(t,f,m)),f=Pr(t,s),f!=null&&l.push(Ll(t,f,m))),t.tag===3)return l;t=t.return}return[]}function lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function av(t,s,a,l,f){for(var m=s._reactName,T=[];a!==null&&a!==l;){var b=a,x=b.alternate,F=b.stateNode;if(b=b.tag,x!==null&&x===l)break;b!==5&&b!==26&&b!==27||F===null||(x=F,f?(F=Pr(a,m),F!=null&&T.unshift(Ll(a,F,x))):f||(F=Pr(a,m),F!=null&&T.push(Ll(a,F,x)))),a=a.return}T.length!==0&&t.push({event:s,listeners:T})}var UA=/\r\n?/g,BA=/\u0000|\uFFFD/g;function ov(t){return(typeof t=="string"?t:""+t).replace(UA,`
`).replace(BA,"")}function lv(t,s){return s=ov(s),ov(t)===s}function $u(){}function it(t,s,a,l,f,m){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||Vn(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&Vn(t,""+l);break;case"className":mi(t,"class",l);break;case"tabIndex":mi(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":mi(t,a,l);break;case"style":Jo(t,l,m);break;case"data":if(s!=="object"){mi(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=xa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&it(t,s,"name",f.name,f,null),it(t,s,"formEncType",f.formEncType,f,null),it(t,s,"formMethod",f.formMethod,f,null),it(t,s,"formTarget",f.formTarget,f,null)):(it(t,s,"encType",f.encType,f,null),it(t,s,"method",f.method,f,null),it(t,s,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=xa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=$u);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=xa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Pe("beforetoggle",t),Pe("toggle",t),Ds(t,"popover",l);break;case"xlinkActuate":Yt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Yt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Yt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Yt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Yt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Yt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Yt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ds(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=xf.get(a)||a,Ds(t,a,l))}}function am(t,s,a,l,f,m){switch(a){case"style":Jo(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Vn(t,l):(typeof l=="number"||typeof l=="bigint")&&Vn(t,""+l);break;case"onScroll":l!=null&&Pe("scroll",t);break;case"onScrollEnd":l!=null&&Pe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=$u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Aa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),m=t[Rt]||null,m=m!=null?m[a]:null,typeof m=="function"&&t.removeEventListener(s,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ds(t,a,l)}}}function Xt(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",t),Pe("load",t);var l=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var T=a[m];if(T!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:it(t,s,m,T,a,null)}}f&&it(t,s,"srcSet",a.srcSet,a,null),l&&it(t,s,"src",a.src,a,null);return;case"input":Pe("invalid",t);var b=m=T=f=null,x=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var Q=a[l];if(Q!=null)switch(l){case"name":f=Q;break;case"type":T=Q;break;case"checked":x=Q;break;case"defaultChecked":F=Q;break;case"value":m=Q;break;case"defaultValue":b=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,s));break;default:it(t,s,l,Q,a,null)}}Or(t,m,b,x,F,T,f,!1),Ia(t);return;case"select":Pe("invalid",t),l=T=m=null;for(f in a)if(a.hasOwnProperty(f)&&(b=a[f],b!=null))switch(f){case"value":m=b;break;case"defaultValue":T=b;break;case"multiple":l=b;default:it(t,s,f,b,a,null)}s=m,a=T,t.multiple=!!l,s!=null?Yi(t,!!l,s,!1):a!=null&&Yi(t,!!l,a,!0);return;case"textarea":Pe("invalid",t),m=f=l=null;for(T in a)if(a.hasOwnProperty(T)&&(b=a[T],b!=null))switch(T){case"value":l=b;break;case"defaultValue":f=b;break;case"children":m=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:it(t,s,T,b,a,null)}Mr(t,l,f,m),Ia(t);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:it(t,s,x,l,a,null)}return;case"dialog":Pe("beforetoggle",t),Pe("toggle",t),Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":Pe("load",t);break;case"video":case"audio":for(l=0;l<Vl.length;l++)Pe(Vl[l],t);break;case"image":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"embed":case"source":case"link":Pe("error",t),Pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:it(t,s,F,l,a,null)}return;default:if(el(s)){for(Q in a)a.hasOwnProperty(Q)&&(l=a[Q],l!==void 0&&am(t,s,Q,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&it(t,s,b,l,a,null))}function zA(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,T=null,b=null,x=null,F=null,Q=null;for(Y in a){var ee=a[Y];if(a.hasOwnProperty(Y)&&ee!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":x=ee;default:l.hasOwnProperty(Y)||it(t,s,Y,null,l,ee)}}for(var G in l){var Y=l[G];if(ee=a[G],l.hasOwnProperty(G)&&(Y!=null||ee!=null))switch(G){case"type":m=Y;break;case"name":f=Y;break;case"checked":F=Y;break;case"defaultChecked":Q=Y;break;case"value":T=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:Y!==ee&&it(t,s,G,Y,l,ee)}}wn(t,T,b,x,F,Q,m,f);return;case"select":Y=T=b=G=null;for(m in a)if(x=a[m],a.hasOwnProperty(m)&&x!=null)switch(m){case"value":break;case"multiple":Y=x;default:l.hasOwnProperty(m)||it(t,s,m,null,l,x)}for(f in l)if(m=l[f],x=a[f],l.hasOwnProperty(f)&&(m!=null||x!=null))switch(f){case"value":G=m;break;case"defaultValue":b=m;break;case"multiple":T=m;default:m!==x&&it(t,s,f,m,l,x)}s=b,a=T,l=Y,G!=null?Yi(t,!!a,G,!1):!!l!=!!a&&(s!=null?Yi(t,!!a,s,!0):Yi(t,!!a,a?[]:"",!1));return;case"textarea":Y=G=null;for(b in a)if(f=a[b],a.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:it(t,s,b,null,l,f)}for(T in l)if(f=l[T],m=a[T],l.hasOwnProperty(T)&&(f!=null||m!=null))switch(T){case"value":G=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&it(t,s,T,f,l,m)}tt(t,G,Y);return;case"option":for(var Se in a)if(G=a[Se],a.hasOwnProperty(Se)&&G!=null&&!l.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:it(t,s,Se,null,l,G)}for(x in l)if(G=l[x],Y=a[x],l.hasOwnProperty(x)&&G!==Y&&(G!=null||Y!=null))switch(x){case"selected":t.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:it(t,s,x,G,l,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)G=a[ve],a.hasOwnProperty(ve)&&G!=null&&!l.hasOwnProperty(ve)&&it(t,s,ve,null,l,G);for(F in l)if(G=l[F],Y=a[F],l.hasOwnProperty(F)&&G!==Y&&(G!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:it(t,s,F,G,l,Y)}return;default:if(el(s)){for(var st in a)G=a[st],a.hasOwnProperty(st)&&G!==void 0&&!l.hasOwnProperty(st)&&am(t,s,st,void 0,l,G);for(Q in l)G=l[Q],Y=a[Q],!l.hasOwnProperty(Q)||G===Y||G===void 0&&Y===void 0||am(t,s,Q,G,l,Y);return}}for(var B in a)G=a[B],a.hasOwnProperty(B)&&G!=null&&!l.hasOwnProperty(B)&&it(t,s,B,null,l,G);for(ee in l)G=l[ee],Y=a[ee],!l.hasOwnProperty(ee)||G===Y||G==null&&Y==null||it(t,s,ee,G,l,Y)}var om=null,lm=null;function Ku(t){return t.nodeType===9?t:t.ownerDocument}function cv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uv(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function cm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var um=null;function qA(){var t=window.event;return t&&t.type==="popstate"?t===um?!1:(um=t,!0):(um=null,!1)}var hv=typeof setTimeout=="function"?setTimeout:void 0,HA=typeof clearTimeout=="function"?clearTimeout:void 0,fv=typeof Promise=="function"?Promise:void 0,FA=typeof queueMicrotask=="function"?queueMicrotask:typeof fv<"u"?function(t){return fv.resolve(null).then(t).catch(GA)}:hv;function GA(t){setTimeout(function(){throw t})}function Qs(t){return t==="head"}function dv(t,s){var a=s,l=0,f=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<l&&8>l){a=l;var T=t.ownerDocument;if(a&1&&Ul(T.documentElement),a&2&&Ul(T.body),a&4)for(a=T.head,Ul(a),T=a.firstChild;T;){var b=T.nextSibling,x=T.nodeName;T[Ir]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=b}}if(f===0){t.removeChild(m),$l(s);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=m}while(a);$l(s)}function hm(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":hm(a),Ns(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function YA(t,s,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ir])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ti(t.nextSibling),t===null)break}return null}function $A(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ti(t.nextSibling),t===null))return null;return t}function fm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function KA(t,s){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ti(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return t}var dm=null;function mv(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}function pv(t,s,a){switch(s=Ku(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Ul(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ns(t)}var $n=new Map,gv=new Set;function Qu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var hs=ae.d;ae.d={f:QA,r:XA,D:WA,C:ZA,L:JA,m:eS,X:nS,S:tS,M:iS};function QA(){var t=hs.f(),s=Bu();return t||s}function XA(t){var s=fi(t);s!==null&&s.tag===5&&s.type==="form"?ky(s):hs.r(t)}var co=typeof document>"u"?null:document;function yv(t,s,a){var l=co;if(l&&typeof s=="string"&&s){var f=Ct(s);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),gv.has(f)||(gv.add(f),t={rel:t,crossOrigin:a,href:s},l.querySelector(f)===null&&(s=l.createElement("link"),Xt(s,"link",t),Et(s),l.head.appendChild(s)))}}function WA(t){hs.D(t),yv("dns-prefetch",t,null)}function ZA(t,s){hs.C(t,s),yv("preconnect",t,s)}function JA(t,s,a){hs.L(t,s,a);var l=co;if(l&&t&&s){var f='link[rel="preload"][as="'+Ct(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Ct(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Ct(a.imageSizes)+'"]')):f+='[href="'+Ct(t)+'"]';var m=f;switch(s){case"style":m=uo(t);break;case"script":m=ho(t)}$n.has(m)||(t=v({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),$n.set(m,t),l.querySelector(f)!==null||s==="style"&&l.querySelector(Bl(m))||s==="script"&&l.querySelector(zl(m))||(s=l.createElement("link"),Xt(s,"link",t),Et(s),l.head.appendChild(s)))}}function eS(t,s){hs.m(t,s);var a=co;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Ct(l)+'"][href="'+Ct(t)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ho(t)}if(!$n.has(m)&&(t=v({rel:"modulepreload",href:t},s),$n.set(m,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(zl(m)))return}l=a.createElement("link"),Xt(l,"link",t),Et(l),a.head.appendChild(l)}}}function tS(t,s,a){hs.S(t,s,a);var l=co;if(l&&t){var f=fn(l).hoistableStyles,m=uo(t);s=s||"default";var T=f.get(m);if(!T){var b={loading:0,preload:null};if(T=l.querySelector(Bl(m)))b.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":s},a),(a=$n.get(m))&&mm(t,a);var x=T=l.createElement("link");Et(x),Xt(x,"link",t),x._p=new Promise(function(F,Q){x.onload=F,x.onerror=Q}),x.addEventListener("load",function(){b.loading|=1}),x.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Xu(T,s,l)}T={type:"stylesheet",instance:T,count:1,state:b},f.set(m,T)}}}function nS(t,s){hs.X(t,s);var a=co;if(a&&t){var l=fn(a).hoistableScripts,f=ho(t),m=l.get(f);m||(m=a.querySelector(zl(f)),m||(t=v({src:t,async:!0},s),(s=$n.get(f))&&pm(t,s),m=a.createElement("script"),Et(m),Xt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function iS(t,s){hs.M(t,s);var a=co;if(a&&t){var l=fn(a).hoistableScripts,f=ho(t),m=l.get(f);m||(m=a.querySelector(zl(f)),m||(t=v({src:t,async:!0,type:"module"},s),(s=$n.get(f))&&pm(t,s),m=a.createElement("script"),Et(m),Xt(m,"link",t),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function _v(t,s,a,l){var f=(f=Ae.current)?Qu(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=uo(a.href),a=fn(f).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=uo(a.href);var m=fn(f).hoistableStyles,T=m.get(t);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,T),(m=f.querySelector(Bl(t)))&&!m._p&&(T.instance=m,T.state.loading=5),$n.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},$n.set(t,a),m||sS(f,t,a,T.state))),s&&l===null)throw Error(r(528,""));return T}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ho(a),a=fn(f).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function uo(t){return'href="'+Ct(t)+'"'}function Bl(t){return'link[rel="stylesheet"]['+t+"]"}function vv(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function sS(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Xt(s,"link",a),Et(s),t.head.appendChild(s))}function ho(t){return'[src="'+Ct(t)+'"]'}function zl(t){return"script[async]"+t}function Ev(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+Ct(a.href)+'"]');if(l)return s.instance=l,Et(l),l;var f=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Et(l),Xt(l,"style",f),Xu(l,a.precedence,t),s.instance=l;case"stylesheet":f=uo(a.href);var m=t.querySelector(Bl(f));if(m)return s.state.loading|=4,s.instance=m,Et(m),m;l=vv(a),(f=$n.get(f))&&mm(l,f),m=(t.ownerDocument||t).createElement("link"),Et(m);var T=m;return T._p=new Promise(function(b,x){T.onload=b,T.onerror=x}),Xt(m,"link",l),s.state.loading|=4,Xu(m,a.precedence,t),s.instance=m;case"script":return m=ho(a.src),(f=t.querySelector(zl(m)))?(s.instance=f,Et(f),f):(l=a,(f=$n.get(m))&&(l=v({},a),pm(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Et(f),Xt(f,"link",l),t.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Xu(l,a.precedence,t));return s.instance}function Xu(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,T=0;T<l.length;T++){var b=l[T];if(b.dataset.precedence===s)m=b;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function mm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function pm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Wu=null;function Tv(t,s,a){if(Wu===null){var l=new Map,f=Wu=new Map;f.set(a,l)}else f=Wu,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var m=a[f];if(!(m[Ir]||m[jt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(s)||"";T=t+T;var b=l.get(T);b?b.push(m):l.set(T,[m])}}return l}function wv(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function rS(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function bv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ql=null;function aS(){}function oS(t,s,a){if(ql===null)throw Error(r(475));var l=ql;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=uo(a.href),m=t.querySelector(Bl(f));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Zu.bind(l),t.then(l,l)),s.state.loading|=4,s.instance=m,Et(m);return}m=t.ownerDocument||t,a=vv(a),(f=$n.get(f))&&mm(a,f),m=m.createElement("link"),Et(m);var T=m;T._p=new Promise(function(b,x){T.onload=b,T.onerror=x}),Xt(m,"link",a),s.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=Zu.bind(l),t.addEventListener("load",s),t.addEventListener("error",s))}}function lS(){if(ql===null)throw Error(r(475));var t=ql;return t.stylesheets&&t.count===0&&gm(t,t.stylesheets),0<t.count?function(s){var a=setTimeout(function(){if(t.stylesheets&&gm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Zu(){if(this.count--,this.count===0){if(this.stylesheets)gm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ju=null;function gm(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ju=new Map,s.forEach(cS,t),Ju=null,Zu.call(t))}function cS(t,s){if(!(s.state.loading&4)){var a=Ju.get(t);if(a)var l=a.get(null);else{a=new Map,Ju.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var T=f[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}f=s.instance,T=f.getAttribute("data-precedence"),m=a.get(T)||l,m===l&&a.set(null,f),a.set(T,f),this.count++,l=Zu.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),s.state.loading|=4}}var Hl={$$typeof:ie,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function uS(t,s,a,l,f,m,T,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.hiddenUpdates=zi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Av(t,s,a,l,f,m,T,b,x,F,Q,ee){return t=new uS(t,s,a,T,b,x,F,ee),s=1,m===!0&&(s|=24),m=An(3,null,null,s),t.current=m,m.stateNode=t,s=Wf(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:l,isDehydrated:a,cache:s},td(m),t}function Sv(t){return t?(t=qa,t):qa}function Rv(t,s,a,l,f,m){f=Sv(f),l.context===null?l.context=f:l.pendingContext=f,l=ks(s),l.payload={element:a},m=m===void 0?null:m,m!==null&&(l.callback=m),a=Vs(t,l,s),a!==null&&(xn(a,t,s),vl(a,t,s))}function Cv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function ym(t,s){Cv(t,s),(t=t.alternate)&&Cv(t,s)}function Iv(t){if(t.tag===13){var s=za(t,67108864);s!==null&&xn(s,t,67108864),ym(t,67108864)}}var eh=!0;function hS(t,s,a,l){var f=K.T;K.T=null;var m=ae.p;try{ae.p=2,_m(t,s,a,l)}finally{ae.p=m,K.T=f}}function fS(t,s,a,l){var f=K.T;K.T=null;var m=ae.p;try{ae.p=8,_m(t,s,a,l)}finally{ae.p=m,K.T=f}}function _m(t,s,a,l){if(eh){var f=vm(l);if(f===null)rm(t,s,l,th,a),Nv(t,l);else if(mS(f,t,s,a,l))l.stopPropagation();else if(Nv(t,l),s&4&&-1<dS.indexOf(t)){for(;f!==null;){var m=fi(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=Xn(m.pendingLanes);if(T!==0){var b=m;for(b.pendingLanes|=2,b.entangledLanes|=2;T;){var x=1<<31-nn(T);b.entanglements[1]|=x,T&=~x}Ri(m),(We&6)===0&&(Lu=gn()+500,kl(0))}}break;case 13:b=za(m,2),b!==null&&xn(b,m,2),Bu(),ym(m,2)}if(m=vm(l),m===null&&rm(t,s,l,th,a),m===f)break;f=m}f!==null&&l.stopPropagation()}else rm(t,s,l,null,a)}}function vm(t){return t=Ln(t),Em(t)}var th=null;function Em(t){if(th=null,t=Hi(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=h(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return th=t,null}function xv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ge()){case Ee:return 2;case Be:return 8;case Oe:case dt:return 32;case tn:return 268435456;default:return 32}default:return 32}}var Tm=!1,Xs=null,Ws=null,Zs=null,Fl=new Map,Gl=new Map,Js=[],dS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nv(t,s){switch(t){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":Fl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(s.pointerId)}}function Yl(t,s,a,l,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},s!==null&&(s=fi(s),s!==null&&Iv(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),t)}function mS(t,s,a,l,f){switch(s){case"focusin":return Xs=Yl(Xs,t,s,a,l,f),!0;case"dragenter":return Ws=Yl(Ws,t,s,a,l,f),!0;case"mouseover":return Zs=Yl(Zs,t,s,a,l,f),!0;case"pointerover":var m=f.pointerId;return Fl.set(m,Yl(Fl.get(m)||null,t,s,a,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Gl.set(m,Yl(Gl.get(m)||null,t,s,a,l,f)),!0}return!1}function Dv(t){var s=Hi(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=h(a),s!==null){t.blockedOn=s,Bc(t.priority,function(){if(a.tag===13){var l=In();l=Cs(l);var f=za(a,l);f!==null&&xn(f,a,l),ym(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=vm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);$i=l,a.target.dispatchEvent(l),$i=null}else return s=fi(a),s!==null&&Iv(s),t.blockedOn=a,!1;s.shift()}return!0}function Ov(t,s,a){nh(t)&&a.delete(s)}function pS(){Tm=!1,Xs!==null&&nh(Xs)&&(Xs=null),Ws!==null&&nh(Ws)&&(Ws=null),Zs!==null&&nh(Zs)&&(Zs=null),Fl.forEach(Ov),Gl.forEach(Ov)}function ih(t,s){t.blockedOn===s&&(t.blockedOn=null,Tm||(Tm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,pS)))}var sh=null;function Mv(t){sh!==t&&(sh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){sh===t&&(sh=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],f=t[s+2];if(typeof l!="function"){if(Em(l||a)===null)continue;break}var m=fi(a);m!==null&&(t.splice(s,3),s-=3,Ed(m,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function $l(t){function s(x){return ih(x,t)}Xs!==null&&ih(Xs,t),Ws!==null&&ih(Ws,t),Zs!==null&&ih(Zs,t),Fl.forEach(s),Gl.forEach(s);for(var a=0;a<Js.length;a++){var l=Js[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Js.length&&(a=Js[0],a.blockedOn===null);)Dv(a),a.blockedOn===null&&Js.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],m=a[l+1],T=f[Rt]||null;if(typeof m=="function")T||Mv(a);else if(T){var b=null;if(m&&m.hasAttribute("formAction")){if(f=m,T=m[Rt]||null)b=T.formAction;else if(Em(f)!==null)continue}else b=T.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),Mv(a)}}}function wm(t){this._internalRoot=t}rh.prototype.render=wm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=In();Rv(a,l,t,s,null,null)},rh.prototype.unmount=wm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Rv(t.current,2,null,t,null,null),Bu(),s[kn]=null}};function rh(t){this._internalRoot=t}rh.prototype.unstable_scheduleHydration=function(t){if(t){var s=Is();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Js.length&&s!==0&&s<Js[a].priority;a++);Js.splice(a,0,t),a===0&&Dv(t)}};var jv=e.version;if(jv!=="19.1.1")throw Error(r(527,jv,"19.1.1"));ae.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=g(s),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var gS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{ze=ah.inject(gS),Ne=ah}catch{}}return Ql.createRoot=function(t,s){if(!o(t))throw Error(r(299));var a=!1,l="",f=Xy,m=Wy,T=Zy,b=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks)),s=Av(t,1,!1,null,null,a,l,f,m,T,b,null),t[kn]=s.current,sm(t),new wm(s)},Ql.hydrateRoot=function(t,s,a){if(!o(t))throw Error(r(299));var l=!1,f="",m=Xy,T=Wy,b=Zy,x=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),s=Av(t,1,!0,s,a??null,l,f,m,T,b,x,F),s.context=Sv(null),a=s.current,l=In(),l=Cs(l),f=ks(l),f.callback=null,Vs(a,f,l),a=l,s.current.lanes=a,qi(s,a),Ri(s),t[kn]=s.current,sm(t),new rh(s)},Ql.version="19.1.1",Ql}var Fv;function RS(){if(Fv)return Sm.exports;Fv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Sm.exports=SS(),Sm.exports}var CS=RS();const IS=QT(CS);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Gv="popstate";function xS(i={}){function e(r,o){let{pathname:c,search:h,hash:p}=r.location;return Ym("",{pathname:c,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:hc(o)}return DS(e,n,null,i)}function pt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ri(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NS(){return Math.random().toString(36).substring(2,10)}function Yv(i,e){return{usr:i.state,key:i.key,idx:e}}function Ym(i,e,n=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Mo(e):e,state:n,key:e&&e.key||r||NS()}}function hc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Mo(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function DS(i,e,n,r={}){let{window:o=document.defaultView,v5Compat:c=!1}=r,h=o.history,p="POP",g=null,y=v();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function v(){return(h.state||{idx:null}).idx}function w(){p="POP";let L=v(),J=L==null?null:L-y;y=L,g&&g({action:p,location:H.location,delta:J})}function A(L,J){p="PUSH";let X=Ym(H.location,L,J);y=v()+1;let ie=Yv(X,y),ue=H.createHref(X);try{h.pushState(ie,"",ue)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;o.location.assign(ue)}c&&g&&g({action:p,location:H.location,delta:1})}function C(L,J){p="REPLACE";let X=Ym(H.location,L,J);y=v();let ie=Yv(X,y),ue=H.createHref(X);h.replaceState(ie,"",ue),c&&g&&g({action:p,location:H.location,delta:0})}function D(L){return OS(L)}let H={get action(){return p},get location(){return i(o,h)},listen(L){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Gv,w),g=L,()=>{o.removeEventListener(Gv,w),g=null}},createHref(L){return e(o,L)},createURL:D,encodeLocation(L){let J=D(L);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:A,replace:C,go(L){return h.go(L)}};return H}function OS(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),pt(n,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:hc(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function WT(i,e,n="/"){return MS(i,e,n,!1)}function MS(i,e,n,r){let o=typeof e=="string"?Mo(e):e,c=vs(o.pathname||"/",n);if(c==null)return null;let h=ZT(i);jS(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=GS(c);p=HS(h[g],y,r)}return p}function ZT(i,e=[],n=[],r="",o=!1){let c=(h,p,g=o,y)=>{let v={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&g)return;pt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let w=gs([r,v.relativePath]),A=n.concat(v);h.children&&h.children.length>0&&(pt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),ZT(h.children,e,A,w,g)),!(h.path==null&&!h.index)&&e.push({path:w,score:zS(w,h.index),routesMeta:A})};return i.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))c(h,p);else for(let g of JT(h.path))c(h,p,!0,g)}),e}function JT(i){let e=i.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let h=JT(r.join("/")),p=[];return p.push(...h.map(g=>g===""?c:[c,g].join("/"))),o&&p.push(...h),p.map(g=>i.startsWith("/")&&g===""?"/":g)}function jS(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:qS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var PS=/^:[\w-]+$/,kS=3,VS=2,LS=1,US=10,BS=-2,$v=i=>i==="*";function zS(i,e){let n=i.split("/"),r=n.length;return n.some($v)&&(r+=BS),e&&(r+=VS),n.filter(o=>!$v(o)).reduce((o,c)=>o+(PS.test(c)?kS:c===""?LS:US),r)}function qS(i,e){return i.length===e.length&&i.slice(0,-1).every((r,o)=>r===e[o])?i[i.length-1]-e[e.length-1]:0}function HS(i,e,n=!1){let{routesMeta:r}=i,o={},c="/",h=[];for(let p=0;p<r.length;++p){let g=r[p],y=p===r.length-1,v=c==="/"?e:e.slice(c.length)||"/",w=Nh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},v),A=g.route;if(!w&&y&&n&&!r[r.length-1].route.index&&(w=Nh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:gs([c,w.pathname]),pathnameBase:QS(gs([c,w.pathnameBase])),route:A}),w.pathnameBase!=="/"&&(c=gs([c,w.pathnameBase]))}return h}function Nh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,r]=FS(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],h=c.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((y,{paramName:v,isOptional:w},A)=>{if(v==="*"){let D=p[A]||"";h=c.slice(0,c.length-D.length).replace(/(.)\/+$/,"$1")}const C=p[A];return w&&!C?y[v]=void 0:y[v]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:h,pattern:i}}function FS(i,e=!1,n=!0){ri(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(r.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function GS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ri(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function vs(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=i.charAt(n);return r&&r!=="/"?null:i.slice(n)||"/"}function YS(i,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof i=="string"?Mo(i):i;return{pathname:n?n.startsWith("/")?n:$S(n,e):e,search:XS(r),hash:WS(o)}}function $S(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function xm(i,e,n,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KS(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ew(i){let e=KS(i);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function tw(i,e,n,r=!1){let o;typeof i=="string"?o=Mo(i):(o={...i},pt(!o.pathname||!o.pathname.includes("?"),xm("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),xm("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),xm("#","search","hash",o)));let c=i===""||o.pathname==="",h=c?"/":o.pathname,p;if(h==null)p=n;else{let w=e.length-1;if(!r&&h.startsWith("..")){let A=h.split("/");for(;A[0]==="..";)A.shift(),w-=1;o.pathname=A.join("/")}p=w>=0?e[w]:"/"}let g=YS(o,p),y=h&&h!=="/"&&h.endsWith("/"),v=(c||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||v)&&(g.pathname+="/"),g}var gs=i=>i.join("/").replace(/\/\/+/g,"/"),QS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),XS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,WS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function ZS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var nw=["POST","PUT","PATCH","DELETE"];new Set(nw);var JS=["GET",...nw];new Set(JS);var jo=M.createContext(null);jo.displayName="DataRouter";var Jh=M.createContext(null);Jh.displayName="DataRouterState";M.createContext(!1);var iw=M.createContext({isTransitioning:!1});iw.displayName="ViewTransition";var eR=M.createContext(new Map);eR.displayName="Fetchers";var tR=M.createContext(null);tR.displayName="Await";var Vi=M.createContext(null);Vi.displayName="Navigation";var wc=M.createContext(null);wc.displayName="Location";var li=M.createContext({outlet:null,matches:[],isDataRoute:!1});li.displayName="Route";var bp=M.createContext(null);bp.displayName="RouteError";function nR(i,{relative:e}={}){pt(bc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=M.useContext(Vi),{hash:o,pathname:c,search:h}=Ac(i,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:gs([n,c])),r.createHref({pathname:p,search:h,hash:o})}function bc(){return M.useContext(wc)!=null}function Er(){return pt(bc(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(wc).location}var sw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rw(i){M.useContext(Vi).static||M.useLayoutEffect(i)}function jn(){let{isDataRoute:i}=M.useContext(li);return i?_R():iR()}function iR(){pt(bc(),"useNavigate() may be used only in the context of a <Router> component.");let i=M.useContext(jo),{basename:e,navigator:n}=M.useContext(Vi),{matches:r}=M.useContext(li),{pathname:o}=Er(),c=JSON.stringify(ew(r)),h=M.useRef(!1);return rw(()=>{h.current=!0}),M.useCallback((g,y={})=>{if(ri(h.current,sw),!h.current)return;if(typeof g=="number"){n.go(g);return}let v=tw(g,JSON.parse(c),o,y.relative==="path");i==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:gs([e,v.pathname])),(y.replace?n.replace:n.push)(v,y.state,y)},[e,n,c,o,i])}var sR=M.createContext(null);function rR(i){let e=M.useContext(li).outlet;return e&&M.createElement(sR.Provider,{value:i},e)}function aR(){let{matches:i}=M.useContext(li),e=i[i.length-1];return e?e.params:{}}function Ac(i,{relative:e}={}){let{matches:n}=M.useContext(li),{pathname:r}=Er(),o=JSON.stringify(ew(n));return M.useMemo(()=>tw(i,JSON.parse(o),r,e==="path"),[i,o,r,e])}function oR(i,e){return aw(i,e)}function aw(i,e,n,r,o){pt(bc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=M.useContext(Vi),{matches:h}=M.useContext(li),p=h[h.length-1],g=p?p.params:{},y=p?p.pathname:"/",v=p?p.pathnameBase:"/",w=p&&p.route;{let X=w&&w.path||"";ow(y,!w||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let A=Er(),C;if(e){let X=typeof e=="string"?Mo(e):e;pt(v==="/"||X.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${X.pathname}" was given in the \`location\` prop.`),C=X}else C=A;let D=C.pathname||"/",H=D;if(v!=="/"){let X=v.replace(/^\//,"").split("/");H="/"+D.replace(/^\//,"").split("/").slice(X.length).join("/")}let L=WT(i,{pathname:H});ri(w||L!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),ri(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let J=fR(L&&L.map(X=>Object.assign({},X,{params:Object.assign({},g,X.params),pathname:gs([v,c.encodeLocation?c.encodeLocation(X.pathname).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?v:gs([v,c.encodeLocation?c.encodeLocation(X.pathnameBase).pathname:X.pathnameBase])})),h,n,r,o);return e&&J?M.createElement(wc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},J):J}function lR(){let i=yR(),e=ZS(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:c},"ErrorBoundary")," or"," ",M.createElement("code",{style:c},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:o},n):null,h)}var cR=M.createElement(lR,null),uR=class extends M.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.unstable_onError?this.props.unstable_onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?M.createElement(li.Provider,{value:this.props.routeContext},M.createElement(bp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hR({routeContext:i,match:e,children:n}){let r=M.useContext(jo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(li.Provider,{value:i},n)}function fR(i,e=[],n=null,r=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let c=i,h=n?.errors;if(h!=null){let y=c.findIndex(v=>v.route.id&&h?.[v.route.id]!==void 0);pt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let p=!1,g=-1;if(n)for(let y=0;y<c.length;y++){let v=c[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=y),v.route.id){let{loaderData:w,errors:A}=n,C=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!A||A[v.route.id]===void 0);if(v.route.lazy||C){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((y,v,w)=>{let A,C=!1,D=null,H=null;n&&(A=h&&v.route.id?h[v.route.id]:void 0,D=v.route.errorElement||cR,p&&(g<0&&w===0?(ow("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,H=null):g===w&&(C=!0,H=v.route.hydrateFallbackElement||null)));let L=e.concat(c.slice(0,w+1)),J=()=>{let X;return A?X=D:C?X=H:v.route.Component?X=M.createElement(v.route.Component,null):v.route.element?X=v.route.element:X=y,M.createElement(hR,{match:v,routeContext:{outlet:y,matches:L,isDataRoute:n!=null},children:X})};return n&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?M.createElement(uR,{location:n.location,revalidation:n.revalidation,component:D,error:A,children:J(),routeContext:{outlet:null,matches:L,isDataRoute:!0},unstable_onError:r}):J()},null)}function Ap(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dR(i){let e=M.useContext(jo);return pt(e,Ap(i)),e}function mR(i){let e=M.useContext(Jh);return pt(e,Ap(i)),e}function pR(i){let e=M.useContext(li);return pt(e,Ap(i)),e}function Sp(i){let e=pR(i),n=e.matches[e.matches.length-1];return pt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function gR(){return Sp("useRouteId")}function yR(){let i=M.useContext(bp),e=mR("useRouteError"),n=Sp("useRouteError");return i!==void 0?i:e.errors?.[n]}function _R(){let{router:i}=dR("useNavigate"),e=Sp("useNavigate"),n=M.useRef(!1);return rw(()=>{n.current=!0}),M.useCallback(async(o,c={})=>{ri(n.current,sw),n.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var Kv={};function ow(i,e,n){!e&&!Kv[i]&&(Kv[i]=!0,ri(!1,n))}M.memo(vR);function vR({routes:i,future:e,state:n,unstable_onError:r}){return aw(i,void 0,n,r,e)}function Rp(i){return rR(i.context)}function lt(i){pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ER({basename:i="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:c=!1}){pt(!bc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),p=M.useMemo(()=>({basename:h,navigator:o,static:c,future:{}}),[h,o,c]);typeof n=="string"&&(n=Mo(n));let{pathname:g="/",search:y="",hash:v="",state:w=null,key:A="default"}=n,C=M.useMemo(()=>{let D=vs(g,h);return D==null?null:{location:{pathname:D,search:y,hash:v,state:w,key:A},navigationType:r}},[h,g,y,v,w,A,r]);return ri(C!=null,`<Router basename="${h}"> is not able to match the URL "${g}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:M.createElement(Vi.Provider,{value:p},M.createElement(wc.Provider,{children:e,value:C}))}function TR({children:i,location:e}){return oR($m(i),e)}function $m(i,e=[]){let n=[];return M.Children.forEach(i,(r,o)=>{if(!M.isValidElement(r))return;let c=[...e,o];if(r.type===M.Fragment){n.push.apply(n,$m(r.props.children,c));return}pt(r.type===lt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=$m(r.props.children,c)),n.push(h)}),n}var yh="get",_h="application/x-www-form-urlencoded";function ef(i){return i!=null&&typeof i.tagName=="string"}function wR(i){return ef(i)&&i.tagName.toLowerCase()==="button"}function bR(i){return ef(i)&&i.tagName.toLowerCase()==="form"}function AR(i){return ef(i)&&i.tagName.toLowerCase()==="input"}function SR(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function RR(i,e){return i.button===0&&(!e||e==="_self")&&!SR(i)}function Km(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,n)=>{let r=i[n];return e.concat(Array.isArray(r)?r.map(o=>[n,o]):[[n,r]])},[]))}function CR(i,e){let n=Km(i);return e&&e.forEach((r,o)=>{n.has(o)||e.getAll(o).forEach(c=>{n.append(o,c)})}),n}var oh=null;function IR(){if(oh===null)try{new FormData(document.createElement("form"),0),oh=!1}catch{oh=!0}return oh}var xR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Nm(i){return i!=null&&!xR.has(i)?(ri(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_h}"`),null):i}function NR(i,e){let n,r,o,c,h;if(bR(i)){let p=i.getAttribute("action");r=p?vs(p,e):null,n=i.getAttribute("method")||yh,o=Nm(i.getAttribute("enctype"))||_h,c=new FormData(i)}else if(wR(i)||AR(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||p.getAttribute("action");if(r=g?vs(g,e):null,n=i.getAttribute("formmethod")||p.getAttribute("method")||yh,o=Nm(i.getAttribute("formenctype"))||Nm(p.getAttribute("enctype"))||_h,c=new FormData(p,i),!IR()){let{name:y,type:v,value:w}=i;if(v==="image"){let A=y?`${y}.`:"";c.append(`${A}x`,"0"),c.append(`${A}y`,"0")}else y&&c.append(y,w)}}else{if(ef(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=yh,r=null,o=_h,h=i}return c&&o==="text/plain"&&(h=c,c=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:c,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Cp(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function DR(i,e,n){let r=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&vs(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function OR(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function MR(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function jR(i,e,n){let r=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let h=await OR(c,n);return h.links?h.links():[]}return[]}));return LR(r.flat(1).filter(MR).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Qv(i,e,n,r,o,c){let h=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,y)=>h(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{let v=r.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function PR(i,e,{includeHydrateFallback:n}={}){return kR(i.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function kR(i){return[...new Set(i)]}function VR(i){let e={},n=Object.keys(i).sort();for(let r of n)e[r]=i[r];return e}function LR(i,e){let n=new Set;return new Set(e),i.reduce((r,o)=>{let c=JSON.stringify(VR(o));return n.has(c)||(n.add(c),r.push({key:c,link:o})),r},[])}function lw(){let i=M.useContext(jo);return Cp(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function UR(){let i=M.useContext(Jh);return Cp(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ip=M.createContext(void 0);Ip.displayName="FrameworkContext";function cw(){let i=M.useContext(Ip);return Cp(i,"You must render this element inside a <HydratedRouter> element"),i}function BR(i,e){let n=M.useContext(Ip),[r,o]=M.useState(!1),[c,h]=M.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:v,onTouchStart:w}=e,A=M.useRef(null);M.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let H=J=>{J.forEach(X=>{h(X.isIntersecting)})},L=new IntersectionObserver(H,{threshold:.5});return A.current&&L.observe(A.current),()=>{L.disconnect()}}},[i]),M.useEffect(()=>{if(r){let H=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(H)}}},[r]);let C=()=>{o(!0)},D=()=>{o(!1),h(!1)};return n?i!=="intent"?[c,A,{}]:[c,A,{onFocus:Xl(p,C),onBlur:Xl(g,D),onMouseEnter:Xl(y,C),onMouseLeave:Xl(v,D),onTouchStart:Xl(w,C)}]:[!1,A,{}]}function Xl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function zR({page:i,...e}){let{router:n}=lw(),r=M.useMemo(()=>WT(n.routes,i,n.basename),[n.routes,i,n.basename]);return r?M.createElement(HR,{page:i,matches:r,...e}):null}function qR(i){let{manifest:e,routeModules:n}=cw(),[r,o]=M.useState([]);return M.useEffect(()=>{let c=!1;return jR(i,e,n).then(h=>{c||o(h)}),()=>{c=!0}},[i,e,n]),r}function HR({page:i,matches:e,...n}){let r=Er(),{manifest:o,routeModules:c}=cw(),{basename:h}=lw(),{loaderData:p,matches:g}=UR(),y=M.useMemo(()=>Qv(i,e,g,o,r,"data"),[i,e,g,o,r]),v=M.useMemo(()=>Qv(i,e,g,o,r,"assets"),[i,e,g,o,r]),w=M.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let D=new Set,H=!1;if(e.forEach(J=>{let X=o.routes[J.route.id];!X||!X.hasLoader||(!y.some(ie=>ie.route.id===J.route.id)&&J.route.id in p&&c[J.route.id]?.shouldRevalidate||X.hasClientLoader?H=!0:D.add(J.route.id))}),D.size===0)return[];let L=DR(i,h,"data");return H&&D.size>0&&L.searchParams.set("_routes",e.filter(J=>D.has(J.route.id)).map(J=>J.route.id).join(",")),[L.pathname+L.search]},[h,p,r,o,y,e,i,c]),A=M.useMemo(()=>PR(v,o),[v,o]),C=qR(v);return M.createElement(M.Fragment,null,w.map(D=>M.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),A.map(D=>M.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),C.map(({key:D,link:H})=>M.createElement("link",{key:D,nonce:n.nonce,...H})))}function FR(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var uw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uw&&(window.__reactRouterVersion="7.8.2")}catch{}function GR({basename:i,children:e,window:n}){let r=M.useRef();r.current==null&&(r.current=xS({window:n,v5Compat:!0}));let o=r.current,[c,h]=M.useState({action:o.action,location:o.location}),p=M.useCallback(g=>{M.startTransition(()=>h(g))},[h]);return M.useLayoutEffect(()=>o.listen(p),[o,p]),M.createElement(ER,{basename:i,children:e,location:c.location,navigationType:c.action,navigator:o})}var hw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nn=M.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:c,replace:h,state:p,target:g,to:y,preventScrollReset:v,viewTransition:w,...A},C){let{basename:D}=M.useContext(Vi),H=typeof y=="string"&&hw.test(y),L,J=!1;if(typeof y=="string"&&H&&(L=y,uw))try{let I=new URL(window.location.href),O=y.startsWith("//")?new URL(I.protocol+y):new URL(y),k=vs(O.pathname,D);O.origin===I.origin&&k!=null?y=k+O.search+O.hash:J=!0}catch{ri(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=nR(y,{relative:o}),[ie,ue,ce]=BR(r,A),fe=KR(y,{replace:h,state:p,target:g,preventScrollReset:v,relative:o,viewTransition:w});function P(I){e&&e(I),I.defaultPrevented||fe(I)}let R=M.createElement("a",{...A,...ce,href:L||X,onClick:J||c?e:P,ref:FR(C,ue),target:g,"data-discover":!H&&n==="render"?"true":void 0});return ie&&!H?M.createElement(M.Fragment,null,R,M.createElement(zR,{page:X})):R});Nn.displayName="Link";var ni=M.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:c,to:h,viewTransition:p,children:g,...y},v){let w=Ac(h,{relative:y.relative}),A=Er(),C=M.useContext(Jh),{navigator:D,basename:H}=M.useContext(Vi),L=C!=null&&eC(w)&&p===!0,J=D.encodeLocation?D.encodeLocation(w).pathname:w.pathname,X=A.pathname,ie=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(X=X.toLowerCase(),ie=ie?ie.toLowerCase():null,J=J.toLowerCase()),ie&&H&&(ie=vs(ie,H)||ie);const ue=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let ce=X===J||!o&&X.startsWith(J)&&X.charAt(ue)==="/",fe=ie!=null&&(ie===J||!o&&ie.startsWith(J)&&ie.charAt(J.length)==="/"),P={isActive:ce,isPending:fe,isTransitioning:L},R=ce?e:void 0,I;typeof r=="function"?I=r(P):I=[r,ce?"active":null,fe?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let O=typeof c=="function"?c(P):c;return M.createElement(Nn,{...y,"aria-current":R,className:I,ref:v,style:O,to:h,viewTransition:p},typeof g=="function"?g(P):g)});ni.displayName="NavLink";var YR=M.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:c,method:h=yh,action:p,onSubmit:g,relative:y,preventScrollReset:v,viewTransition:w,...A},C)=>{let D=ZR(),H=JR(p,{relative:y}),L=h.toLowerCase()==="get"?"get":"post",J=typeof p=="string"&&hw.test(p),X=ie=>{if(g&&g(ie),ie.defaultPrevented)return;ie.preventDefault();let ue=ie.nativeEvent.submitter,ce=ue?.getAttribute("formmethod")||h;D(ue||ie.currentTarget,{fetcherKey:e,method:ce,navigate:n,replace:o,state:c,relative:y,preventScrollReset:v,viewTransition:w})};return M.createElement("form",{ref:C,method:L,action:H,onSubmit:r?g:X,...A,"data-discover":!J&&i==="render"?"true":void 0})});YR.displayName="Form";function $R(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fw(i){let e=M.useContext(jo);return pt(e,$R(i)),e}function KR(i,{target:e,replace:n,state:r,preventScrollReset:o,relative:c,viewTransition:h}={}){let p=jn(),g=Er(),y=Ac(i,{relative:c});return M.useCallback(v=>{if(RR(v,e)){v.preventDefault();let w=n!==void 0?n:hc(g)===hc(y);p(i,{replace:w,state:r,preventScrollReset:o,relative:c,viewTransition:h})}},[g,p,y,n,r,e,i,o,c,h])}function QR(i){ri(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=M.useRef(Km(i)),n=M.useRef(!1),r=Er(),o=M.useMemo(()=>CR(r.search,n.current?null:e.current),[r.search]),c=jn(),h=M.useCallback((p,g)=>{const y=Km(typeof p=="function"?p(new URLSearchParams(o)):p);n.current=!0,c("?"+y,g)},[c,o]);return[o,h]}var XR=0,WR=()=>`__${String(++XR)}__`;function ZR(){let{router:i}=fw("useSubmit"),{basename:e}=M.useContext(Vi),n=gR();return M.useCallback(async(r,o={})=>{let{action:c,method:h,encType:p,formData:g,body:y}=NR(r,e);if(o.navigate===!1){let v=o.fetcherKey||WR();await i.fetch(v,n,o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||p,flushSync:o.flushSync})}else await i.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,n])}function JR(i,{relative:e}={}){let{basename:n}=M.useContext(Vi),r=M.useContext(li);pt(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),c={...Ac(i||".",{relative:e})},h=Er();if(i==null){c.search=h.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(v=>v==="")){p.delete("index"),g.filter(w=>w).forEach(w=>p.append("index",w));let v=p.toString();c.search=v?`?${v}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:gs([n,c.pathname])),hc(c)}function eC(i,{relative:e}={}){let n=M.useContext(iw);pt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=fw("useViewTransitionState"),o=Ac(i,{relative:e});if(!n.isTransitioning)return!1;let c=vs(n.currentLocation.pathname,r)||n.currentLocation.pathname,h=vs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Nh(o.pathname,h)!=null||Nh(o.pathname,c)!=null}const tC=()=>{};var Xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},nC=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],h=i[n++],p=i[n++],g=((o&7)<<18|(c&63)<<12|(h&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=i[n++],h=i[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|h&63)}}return e.join("")},mw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],h=o+1<i.length,p=h?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,v=c>>2,w=(c&3)<<4|p>>4;let A=(p&15)<<2|y>>6,C=y&63;g||(C=64,h||(A=64)),r.push(n[v],n[w],n[A],n[C])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(dw(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):nC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const w=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||p==null||y==null||w==null)throw new iC;const A=c<<2|p>>4;if(r.push(A),y!==64){const C=p<<4&240|y>>2;if(r.push(C),w!==64){const D=y<<6&192|w;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class iC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sC=function(i){const e=dw(i);return mw.encodeByteArray(e,!0)},Dh=function(i){return sC(i).replace(/\./g,"")},pw=function(i){try{return mw.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=()=>rC().__FIREBASE_DEFAULTS__,oC=()=>{if(typeof process>"u"||typeof Xv>"u")return;const i=Xv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},lC=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&pw(i[1]);return e&&JSON.parse(e)},tf=()=>{try{return tC()||aC()||oC()||lC()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},gw=i=>tf()?.emulatorHosts?.[i],yw=i=>{const e=gw(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_w=()=>tf()?.config,vw=i=>tf()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xp(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Dh(JSON.stringify(n)),Dh(JSON.stringify(h)),""].join(".")}const sc={};function uC(){const i={prod:[],emulator:[]};for(const e of Object.keys(sc))sc[e]?i.emulator.push(e):i.prod.push(e);return i}function hC(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Wv=!1;function Np(i,e){if(typeof window>"u"||typeof document>"u"||!pa(window.location.host)||sc[i]===e||sc[i]||Wv)return;sc[i]=e;function n(A){return`__firebase__banner__${A}`}const r="__firebase__banner",c=uC().prod.length>0;function h(){const A=document.getElementById(r);A&&A.remove()}function p(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,C){A.setAttribute("width","24"),A.setAttribute("id",C),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Wv=!0,h()},A}function v(A,C){A.setAttribute("id",C),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function w(){const A=hC(r),C=n("text"),D=document.getElementById(C)||document.createElement("span"),H=n("learnmore"),L=document.getElementById(H)||document.createElement("a"),J=n("preprendIcon"),X=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ie=A.element;p(ie),v(L,H);const ue=y();g(X,J),ie.append(X,D,L,ue),document.body.appendChild(ie)}c?(D.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function dC(){const i=tf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pC(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function gC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yC(){const i=un();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function _C(){return!dC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vC(){try{return typeof indexedDB=="object"}catch{return!1}}function EC(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="FirebaseError";class Li extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TC,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sc.prototype.create)}}class Sc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],h=c?wC(c,r):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new Li(o,p,r)}}function wC(i,e){return i.replace(bC,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const bC=/\{\$([^}]+)}/g;function AC(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function la(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=i[o],h=e[o];if(Zv(c)&&Zv(h)){if(!la(c,h))return!1}else if(c!==h)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Zv(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Jl(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function SC(i,e){const n=new RC(i,e);return n.subscribe.bind(n)}class RC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Dm),o.error===void 0&&(o.error=Dm),o.complete===void 0&&(o.complete=Dm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CC(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Dm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(i){return i&&i._delegate?i._delegate:i}class dr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NC(e))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ra){return this.instances.has(e)}getOptions(e=ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&h.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ra){return this.component?this.component.multipleInstances?e:ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xC(i){return i===ra?void 0:i}function NC(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ke||(ke={}));const OC={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},MC=ke.INFO,jC={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},PC=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=jC[e];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dp{constructor(e){this.name=e,this._logLevel=MC,this._logHandler=PC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const kC=(i,e)=>e.some(n=>i instanceof n);let Jv,eE;function VC(){return Jv||(Jv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LC(){return eE||(eE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tw=new WeakMap,Qm=new WeakMap,ww=new WeakMap,Om=new WeakMap,Op=new WeakMap;function UC(i){const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{n(lr(i.result)),o()},h=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Tw.set(n,i)}).catch(()=>{}),Op.set(e,i),e}function BC(i){if(Qm.has(i))return;const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{n(),o()},h=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});Qm.set(i,e)}let Xm={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Qm.get(i);if(e==="objectStoreNames")return i.objectStoreNames||ww.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function zC(i){Xm=i(Xm)}function qC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(Mm(this),e,...n);return ww.set(r,e.sort?e.sort():[e]),lr(r)}:LC().includes(i)?function(...e){return i.apply(Mm(this),e),lr(Tw.get(this))}:function(...e){return lr(i.apply(Mm(this),e))}}function HC(i){return typeof i=="function"?qC(i):(i instanceof IDBTransaction&&BC(i),kC(i,VC())?new Proxy(i,Xm):i)}function lr(i){if(i instanceof IDBRequest)return UC(i);if(Om.has(i))return Om.get(i);const e=HC(i);return e!==i&&(Om.set(i,e),Op.set(e,i)),e}const Mm=i=>Op.get(i);function FC(i,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const h=indexedDB.open(i,e),p=lr(h);return r&&h.addEventListener("upgradeneeded",g=>{r(lr(h.result),g.oldVersion,g.newVersion,lr(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const GC=["get","getKey","getAll","getAllKeys","count"],YC=["put","add","delete","clear"],jm=new Map;function tE(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(jm.get(e))return jm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=YC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||GC.includes(n)))return;const c=async function(h,...p){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return jm.set(e,c),c}zC(i=>({...i,get:(e,n,r)=>tE(e,n)||i.get(e,n,r),has:(e,n)=>!!tE(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KC(i){return i.getComponent()?.type==="VERSION"}const Wm="@firebase/app",nE="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Dp("@firebase/app"),QC="@firebase/app-compat",XC="@firebase/analytics-compat",WC="@firebase/analytics",ZC="@firebase/app-check-compat",JC="@firebase/app-check",eI="@firebase/auth",tI="@firebase/auth-compat",nI="@firebase/database",iI="@firebase/data-connect",sI="@firebase/database-compat",rI="@firebase/functions",aI="@firebase/functions-compat",oI="@firebase/installations",lI="@firebase/installations-compat",cI="@firebase/messaging",uI="@firebase/messaging-compat",hI="@firebase/performance",fI="@firebase/performance-compat",dI="@firebase/remote-config",mI="@firebase/remote-config-compat",pI="@firebase/storage",gI="@firebase/storage-compat",yI="@firebase/firestore",_I="@firebase/ai",vI="@firebase/firestore-compat",EI="firebase",TI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="[DEFAULT]",wI={[Wm]:"fire-core",[QC]:"fire-core-compat",[WC]:"fire-analytics",[XC]:"fire-analytics-compat",[JC]:"fire-app-check",[ZC]:"fire-app-check-compat",[eI]:"fire-auth",[tI]:"fire-auth-compat",[nI]:"fire-rtdb",[iI]:"fire-data-connect",[sI]:"fire-rtdb-compat",[rI]:"fire-fn",[aI]:"fire-fn-compat",[oI]:"fire-iid",[lI]:"fire-iid-compat",[cI]:"fire-fcm",[uI]:"fire-fcm-compat",[hI]:"fire-perf",[fI]:"fire-perf-compat",[dI]:"fire-rc",[mI]:"fire-rc-compat",[pI]:"fire-gcs",[gI]:"fire-gcs-compat",[yI]:"fire-fst",[vI]:"fire-fst-compat",[_I]:"fire-vertex","fire-js":"fire-js",[EI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=new Map,bI=new Map,Jm=new Map;function iE(i,e){try{i.container.addComponent(e)}catch(n){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function ca(i){const e=i.name;if(Jm.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;Jm.set(e,i);for(const n of Oh.values())iE(n,i);for(const n of bI.values())iE(n,i);return!0}function nf(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Dn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cr=new Sc("app","Firebase",AI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=TI;function bw(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:Zm,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw cr.create("bad-app-name",{appName:String(o)});if(n||(n=_w()),!n)throw cr.create("no-options");const c=Oh.get(o);if(c){if(la(n,c.options)&&la(r,c.config))return c;throw cr.create("duplicate-app",{appName:o})}const h=new DC(o);for(const g of Jm.values())h.addComponent(g);const p=new SI(n,r,h);return Oh.set(o,p),p}function Mp(i=Zm){const e=Oh.get(i);if(!e&&i===Zm&&_w())return bw();if(!e)throw cr.create("no-app",{appName:i});return e}function Ii(i,e,n){let r=wI[i]??i;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const h=[`Unable to register library "${r}" with version "${e}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(h.join(" "));return}ca(new dr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="firebase-heartbeat-database",CI=1,fc="firebase-heartbeat-store";let Pm=null;function Aw(){return Pm||(Pm=FC(RI,CI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(fc)}catch(n){console.warn(n)}}}}).catch(i=>{throw cr.create("idb-open",{originalErrorMessage:i.message})})),Pm}async function II(i){try{const n=(await Aw()).transaction(fc),r=await n.objectStore(fc).get(Sw(i));return await n.done,r}catch(e){if(e instanceof Li)Es.warn(e.message);else{const n=cr.create("idb-get",{originalErrorMessage:e?.message});Es.warn(n.message)}}}async function sE(i,e){try{const r=(await Aw()).transaction(fc,"readwrite");await r.objectStore(fc).put(e,Sw(i)),await r.done}catch(n){if(n instanceof Li)Es.warn(n.message);else{const r=cr.create("idb-set",{originalErrorMessage:n?.message});Es.warn(r.message)}}}function Sw(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=1024,NI=30;class DI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=rE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>NI){const o=jI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Es.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=rE(),{heartbeatsToSend:n,unsentEntries:r}=OI(this._heartbeatsCache.heartbeats),o=Dh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Es.warn(e),""}}}function rE(){return new Date().toISOString().substring(0,10)}function OI(i,e=xI){const n=[];let r=i.slice();for(const o of i){const c=n.find(h=>h.agent===o.agent);if(c){if(c.dates.push(o.date),aE(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),aE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class MI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vC()?EC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await II(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function aE(i){return Dh(JSON.stringify({version:2,heartbeats:i})).length}function jI(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(i){ca(new dr("platform-logger",e=>new $C(e),"PRIVATE")),ca(new dr("heartbeat",e=>new DI(e),"PRIVATE")),Ii(Wm,nE,i),Ii(Wm,nE,"esm2020"),Ii("fire-js","")}PI("");function Rw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kI=Rw,Cw=new Sc("auth","Firebase",Rw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh=new Dp("@firebase/auth");function VI(i,...e){Mh.logLevel<=ke.WARN&&Mh.warn(`Auth (${ga}): ${i}`,...e)}function vh(i,...e){Mh.logLevel<=ke.ERROR&&Mh.error(`Auth (${ga}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(i,...e){throw jp(i,...e)}function xi(i,...e){return jp(i,...e)}function Iw(i,e,n){const r={...kI(),[e]:n};return new Sc("auth","Firebase",r).create(e,{appName:i.name})}function ys(i){return Iw(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jp(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return Cw.create(i,...e)}function we(i,e,...n){if(!i)throw jp(e,...n)}function ms(i){const e="INTERNAL ASSERTION FAILED: "+i;throw vh(e),new Error(e)}function Ts(i,e){i||ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(){return typeof self<"u"&&self.location?.href||""}function LI(){return oE()==="http:"||oE()==="https:"}function oE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LI()||pC()||"connection"in navigator)?navigator.onLine:!0}function BI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ts(n>e,"Short delay should be less than long delay!"),this.isMobile=fC()||gC()}get(){return UI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(i,e){Ts(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HI=new Cc(3e4,6e4);function Tr(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Ss(i,e,n,r,o={}){return Nw(i,o,async()=>{let c={},h={};r&&(e==="GET"?h=r:c={body:JSON.stringify(r)});const p=Rc({key:i.config.apiKey,...h}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:g,...c};return mC()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&pa(i.emulatorConfig.host)&&(y.credentials="include"),xw.fetch()(await Dw(i,i.config.apiHost,n,p),y)})}async function Nw(i,e,n){i._canInitEmulator=!1;const r={...zI,...e};try{const o=new GI(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw lh(i,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const p=c.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw lh(i,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw lh(i,"email-already-in-use",h);if(g==="USER_DISABLED")throw lh(i,"user-disabled",h);const v=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Iw(i,v,y);ai(i,v)}}catch(o){if(o instanceof Li)throw o;ai(i,"network-request-failed",{message:String(o)})}}async function Ic(i,e,n,r,o={}){const c=await Ss(i,e,n,r,o);return"mfaPendingCredential"in c&&ai(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function Dw(i,e,n,r){const o=`${e}${n}?${r}`,c=i,h=c.config.emulator?Pp(i.config,o):`${i.config.apiScheme}://${o}`;return qI.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function FI(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xi(this.auth,"network-request-failed")),HI.get())})}}function lh(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=xi(i,e,r);return o.customData._tokenResponse=n,o}function lE(i){return i!==void 0&&i.enterprise!==void 0}class YI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return FI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $I(i,e){return Ss(i,"GET","/v2/recaptchaConfig",Tr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(i,e){return Ss(i,"POST","/v1/accounts:delete",e)}async function jh(i,e){return Ss(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QI(i,e=!1){const n=At(i),r=await n.getIdToken(e),o=kp(r);we(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,h=c?.sign_in_provider;return{claims:o,token:r,authTime:rc(km(o.auth_time)),issuedAtTime:rc(km(o.iat)),expirationTime:rc(km(o.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function km(i){return Number(i)*1e3}function kp(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return vh("JWT malformed, contained fewer than 3 sections"),null;try{const o=pw(n);return o?JSON.parse(o):(vh("Failed to decode base64 JWT payload"),null)}catch(o){return vh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function cE(i){const e=kp(i);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Li&&XI(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function XI({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rc(this.lastLoginAt),this.creationTime=rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ph(i){const e=i.auth,n=await i.getIdToken(),r=await Ro(i,jh(e,{idToken:n}));we(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?Ow(o.providerUserInfo):[],h=JI(i.providerData,c),p=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!h?.length,y=p?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new tp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,v)}async function ZI(i){const e=At(i);await Ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JI(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Ow(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e1(i,e){const n=await Nw(i,{},async()=>{const r=Rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,h=await Dw(i,o,"/v1/token",`key=${c}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return i.emulatorConfig&&pa(i.emulatorConfig.host)&&(g.credentials="include"),xw.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function t1(i,e){return Ss(i,"POST","/v2/accounts:revokeToken",Tr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=cE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await e1(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,h=new To;return r&&(we(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(we(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),c&&(we(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(i,e){we(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ii{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new WI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new tp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ro(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QI(this,e)}reload(){return ZI(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ii({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ph(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(ys(this.auth));const e=await this.getIdToken();return await Ro(this,KI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:w,emailVerified:A,isAnonymous:C,providerData:D,stsTokenManager:H}=n;we(w&&H,e,"internal-error");const L=To.fromJSON(this.name,H);we(typeof w=="string",e,"internal-error"),tr(r,e.name),tr(o,e.name),we(typeof A=="boolean",e,"internal-error"),we(typeof C=="boolean",e,"internal-error"),tr(c,e.name),tr(h,e.name),tr(p,e.name),tr(g,e.name),tr(y,e.name),tr(v,e.name);const J=new ii({uid:w,auth:e,email:o,emailVerified:A,displayName:r,isAnonymous:C,photoURL:h,phoneNumber:c,tenantId:p,stsTokenManager:L,createdAt:y,lastLoginAt:v});return D&&Array.isArray(D)&&(J.providerData=D.map(X=>({...X}))),g&&(J._redirectEventId=g),J}static async _fromIdTokenResponse(e,n,r=!1){const o=new To;o.updateFromServerResponse(n);const c=new ii({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Ph(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];we(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Ow(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!c?.length,p=new To;p.updateFromIdToken(r);const g=new ii({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new tp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map;function ps(i){Ts(i instanceof Function,"Expected a class definition");let e=uE.get(i);return e?(Ts(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,uE.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Mw.type="NONE";const hE=Mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(i,e,n){return`firebase:${i}:${e}:${n}`}class wo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=Eh(this.userKey,o.apiKey,c),this.fullPersistenceKey=Eh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await jh(this.auth,{idToken:e}).catch(()=>{});return n?ii._fromGetAccountInfoResponse(this.auth,n,e):null}return ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wo(ps(hE),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||ps(hE);const h=Eh(r,e.config.apiKey,e.name);let p=null;for(const y of n)try{const v=await y._get(h);if(v){let w;if(typeof v=="string"){const A=await jh(e,{idToken:v}).catch(()=>{});if(!A)break;w=await ii._fromGetAccountInfoResponse(e,A,v)}else w=ii._fromJSON(e,v);y!==c&&(p=w),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new wo(c,e,r):(c=g[0],p&&await c._set(h,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(h)}catch{}})),new wo(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Uw(e))return"Blackberry";if(Bw(e))return"Webos";if(Pw(e))return"Safari";if((e.includes("chrome/")||kw(e))&&!e.includes("edge/"))return"Chrome";if(Lw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if(r?.length===2)return r[1]}return"Other"}function jw(i=un()){return/firefox\//i.test(i)}function Pw(i=un()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kw(i=un()){return/crios\//i.test(i)}function Vw(i=un()){return/iemobile/i.test(i)}function Lw(i=un()){return/android/i.test(i)}function Uw(i=un()){return/blackberry/i.test(i)}function Bw(i=un()){return/webos/i.test(i)}function Vp(i=un()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function n1(i=un()){return Vp(i)&&!!window.navigator?.standalone}function i1(){return yC()&&document.documentMode===10}function zw(i=un()){return Vp(i)||Lw(i)||Bw(i)||Uw(i)||/windows phone/i.test(i)||Vw(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(i,e=[]){let n;switch(i){case"Browser":n=fE(un());break;case"Worker":n=`${fE(un())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ga}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((h,p)=>{try{const g=e(c);h(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(i,e={}){return Ss(i,"GET","/v2/passwordPolicy",Tr(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=6;class o1{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??a1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dE(this),this.idTokenSubscription=new dE(this),this.beforeStateQueue=new s1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ps(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jh(this,{idToken:e}),r=await ii._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Dn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,h=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&p?.user&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ph(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(ys(this));const n=e?At(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(ys(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(ys(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await r1(this),n=new o1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await t1(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ps(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[ps(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(p,this,"internal-error"),p.then(()=>{h||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&VI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ya(i){return At(i)}class dE{constructor(e){this.auth=e,this.observer=null,this.addObserver=SC(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function c1(i){sf=i}function Hw(i){return sf.loadJS(i)}function u1(){return sf.recaptchaEnterpriseScript}function h1(){return sf.gapiScript}function f1(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class d1{constructor(){this.enterprise=new m1}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class m1{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const p1="recaptcha-enterprise",Fw="NO_RECAPTCHA";class g1{constructor(e){this.type=p1,this.auth=ya(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,p)=>{$I(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new YI(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,h(y.siteKey)}}).catch(g=>{p(g)})})}function o(c,h,p){const g=window.grecaptcha;lE(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{h(y)}).catch(()=>{h(Fw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new d1().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{r(this.auth).then(p=>{if(!n&&lE(window.grecaptcha))o(p,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=u1();g.length!==0&&(g+=p),Hw(g).then(()=>{o(p,c,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function mE(i,e,n,r=!1,o=!1){const c=new g1(i);let h;if(o)h=Fw;else try{h=await c.verify(n)}catch{h=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function np(i,e,n,r,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await mE(i,e,n,n==="getOobCode");return r(i,c)}else return r(i,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await mE(i,e,n,n==="getOobCode");return r(i,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(i,e){const n=nf(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(la(c,e??{}))return o;ai(o,"already-initialized")}return n.initialize({options:e})}function _1(i,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ps);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function v1(i,e,n){const r=ya(i);we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=Gw(e),{host:h,port:p}=E1(e),g=p===null?"":`:${p}`,y={url:`${c}//${h}${g}/`},v=Object.freeze({host:h,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){we(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),we(la(y,r.config.emulator)&&la(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,pa(h)?(xp(`${c}//${h}${g}`),Np("Auth",!0)):T1()}function Gw(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function E1(i){const e=Gw(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:pE(r.substr(c.length+1))}}else{const[c,h]=r.split(":");return{host:c,port:pE(h)}}}function pE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function T1(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,n){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}}async function w1(i,e){return Ss(i,"POST","/v1/accounts:update",e)}async function b1(i,e){return Ss(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A1(i,e){return Ic(i,"POST","/v1/accounts:signInWithPassword",Tr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(i,e){return Ic(i,"POST","/v1/accounts:signInWithEmailLink",Tr(i,e))}async function R1(i,e){return Ic(i,"POST","/v1/accounts:signInWithEmailLink",Tr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends Lp{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new dc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new dc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return np(e,n,"signInWithPassword",A1);case"emailLink":return S1(e,{email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return np(e,r,"signUpPassword",b1);case"emailLink":return R1(e,{idToken:n,email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(i,e){return Ic(i,"POST","/v1/accounts:signInWithIdp",Tr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="http://localhost";class ua extends Lp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ua(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ai("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const h=new ua(r,o);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return bo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,bo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bo(e,n)}buildRequest(){const e={requestUri:C1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function x1(i){const e=Zl(Jl(i)).link,n=e?Zl(Jl(e)).deep_link_id:null,r=Zl(Jl(i)).deep_link_id;return(r?Zl(Jl(r)).link:null)||r||n||e||i}class Up{constructor(e){const n=Zl(Jl(e)),r=n.apiKey??null,o=n.oobCode??null,c=I1(n.mode??null);we(r&&o&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=x1(e);try{return new Up(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.providerId=Po.PROVIDER_ID}static credential(e,n){return dc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Up.parseLink(n);return we(r,"argument-error"),dc._fromEmailAndCode(e,r.code,r.tenantId)}}Po.PROVIDER_ID="password";Po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends Yw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends xc{constructor(){super("facebook.com")}static credential(e){return ua._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ua._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com";sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends xc{constructor(){super("github.com")}static credential(e){return ua._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.GITHUB_SIGN_IN_METHOD="github.com";rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends xc{constructor(){super("twitter.com")}static credential(e,n){return ua._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ar.credential(n,r)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N1(i,e){return Ic(i,"POST","/v1/accounts:signUp",Tr(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await ii._fromIdTokenResponse(e,r,o),h=gE(r);return new ha({user:c,providerId:h,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=gE(r);return new ha({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function gE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends Li{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,kh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new kh(e,n,r,o)}}function $w(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?kh._fromErrorAndOperation(i,c,e,r):c})}async function D1(i,e,n=!1){const r=await Ro(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return ha._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1(i,e,n=!1){const{auth:r}=i;if(Dn(r.app))return Promise.reject(ys(r));const o="reauthenticate";try{const c=await Ro(i,$w(r,o,e,i),n);we(c.idToken,r,"internal-error");const h=kp(c.idToken);we(h,r,"internal-error");const{sub:p}=h;return we(i.uid===p,r,"user-mismatch"),ha._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&ai(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(i,e,n=!1){if(Dn(i.app))return Promise.reject(ys(i));const r="signIn",o=await $w(i,r,e),c=await ha._fromIdTokenResponse(i,r,o);return n||await i._updateCurrentUser(c.user),c}async function M1(i,e){return Kw(ya(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qw(i){const e=ya(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function j1(i,e,n){if(Dn(i.app))return Promise.reject(ys(i));const r=ya(i),h=await np(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",N1).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Qw(i),g}),p=await ha._fromIdTokenResponse(r,"signIn",h);return await r._updateCurrentUser(p.user),p}function P1(i,e,n){return Dn(i.app)?Promise.reject(ys(i)):M1(At(i),Po.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Qw(i),r})}function k1(i,e){return V1(At(i),null,e)}async function V1(i,e,n){const{auth:r}=i,c={idToken:await i.getIdToken(),returnSecureToken:!0};n&&(c.password=n);const h=await Ro(i,w1(r,c));await i._updateTokensIfNecessary(h,!0)}function L1(i,e,n,r){return At(i).onIdTokenChanged(e,n,r)}function U1(i,e,n){return At(i).beforeAuthStateChanged(e,n)}function B1(i,e,n,r){return At(i).onAuthStateChanged(e,n,r)}function yE(i){return At(i).signOut()}const Vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=1e3,q1=10;class Ww extends Xw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!n&&this.localCache[r]===h||this.notifyListeners(r,h)},c=this.storage.getItem(r);i1()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,q1):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},z1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ww.type="LOCAL";const H1=Ww;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw extends Xw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Zw.type="SESSION";const Jw=Zw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new rf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(h).map(async y=>y(n.origin,c)),g=await F1(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,h;return new Promise((p,g)=>{const y=Bp("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(w){const A=w;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(A.data.response);break;default:clearTimeout(v),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(){return window}function Y1(i){Ni().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(){return typeof Ni().WorkerGlobalScope<"u"&&typeof Ni().importScripts=="function"}async function $1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function K1(){return navigator?.serviceWorker?.controller||null}function Q1(){return e0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="firebaseLocalStorageDb",X1=1,Lh="firebaseLocalStorage",n0="fbase_key";class Nc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function af(i,e){return i.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function W1(){const i=indexedDB.deleteDatabase(t0);return new Nc(i).toPromise()}function ip(){const i=indexedDB.open(t0,X1);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Lh,{keyPath:n0})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Lh)?e(r):(r.close(),await W1(),e(await ip()))})})}async function _E(i,e,n){const r=af(i,!0).put({[n0]:e,value:n});return new Nc(r).toPromise()}async function Z1(i,e){const n=af(i,!1).get(e),r=await new Nc(n).toPromise();return r===void 0?null:r.value}function vE(i,e){const n=af(i,!0).delete(e);return new Nc(n).toPromise()}const J1=800,ex=3;class i0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ip(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ex)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return e0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rf._getInstance(Q1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $1(),!this.activeServiceWorker)return;this.sender=new G1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||K1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ip();return await _E(e,Vh,"1"),await vE(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_E(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Z1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>vE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=af(o,!1).getAll();return new Nc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),J1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}i0.type="LOCAL";const tx=i0;new Cc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(i,e){return e?ps(e):(we(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp extends Lp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ix(i){return Kw(i.auth,new zp(i),i.bypassAuthState)}function sx(i){const{auth:e,user:n}=i;return we(n,e,"internal-error"),O1(n,new zp(i),i.bypassAuthState)}async function rx(i){const{auth:e,user:n}=i;return we(n,e,"internal-error"),D1(n,new zp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ix;case"linkViaPopup":case"linkViaRedirect":return rx;case"reauthViaPopup":case"reauthViaRedirect":return sx;default:ai(this.auth,"internal-error")}}resolve(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=new Cc(2e3,1e4);class _o extends s0{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Ts(this.filter.length===1,"Popup operations only handle one event");const e=Bp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ax.get())};e()}}_o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="pendingRedirect",Th=new Map;class lx extends s0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Th.get(this.auth._key());if(!e){try{const r=await cx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Th.set(this.auth._key(),e)}return this.bypassAuthState||Th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cx(i,e){const n=fx(e),r=hx(i);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function ux(i,e){Th.set(i._key(),e)}function hx(i){return ps(i._redirectPersistence)}function fx(i){return Eh(ox,i.config.apiKey,i.name)}async function dx(i,e,n=!1){if(Dn(i.app))return Promise.reject(ys(i));const r=ya(i),o=nx(r,e),h=await new lx(r,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=600*1e3;class px{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gx(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!r0(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(xi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mx&&this.cachedEventUids.clear(),this.cachedEventUids.has(EE(e))}saveEventToCache(e){this.cachedEventUids.add(EE(e)),this.lastProcessedEventTime=Date.now()}}function EE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function r0({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function gx(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r0(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yx(i,e={}){return Ss(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vx=/^https?/;async function Ex(i){if(i.config.emulator)return;const{authorizedDomains:e}=await yx(i);for(const n of e)try{if(Tx(n))return}catch{}ai(i,"unauthorized-domain")}function Tx(i){const e=ep(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===r}if(!vx.test(n))return!1;if(_x.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=new Cc(3e4,6e4);function TE(){const i=Ni().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function bx(i){return new Promise((e,n)=>{function r(){TE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TE(),n(xi(i,"network-request-failed"))},timeout:wx.get()})}if(Ni().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ni().gapi?.load)r();else{const o=f1("iframefcb");return Ni()[o]=()=>{gapi.load?r():n(xi(i,"network-request-failed"))},Hw(`${h1()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw wh=null,e})}let wh=null;function Ax(i){return wh=wh||bx(i),wh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=new Cc(5e3,15e3),Rx="__/auth/iframe",Cx="emulator/auth/iframe",Ix={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Nx(i){const e=i.config;we(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Pp(e,Cx):`https://${i.config.authDomain}/${Rx}`,r={apiKey:e.apiKey,appName:i.name,v:ga},o=xx.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Rc(r).slice(1)}`}async function Dx(i){const e=await Ax(i),n=Ni().gapi;return we(n,i,"internal-error"),e.open({where:document.body,url:Nx(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ix,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const h=xi(i,"network-request-failed"),p=Ni().setTimeout(()=>{c(h)},Sx.get());function g(){Ni().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{c(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Mx=500,jx=600,Px="_blank",kx="http://localhost";class wE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Vx(i,e,n,r=Mx,o=jx){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={...Ox,width:r.toString(),height:o.toString(),top:c,left:h},y=un().toLowerCase();n&&(p=kw(y)?Px:n),jw(y)&&(e=e||kx,g.scrollbars="yes");const v=Object.entries(g).reduce((A,[C,D])=>`${A}${C}=${D},`,"");if(n1(y)&&p!=="_self")return Lx(e||"",p),new wE(null);const w=window.open(e||"",p,v);we(w,i,"popup-blocked");try{w.focus()}catch{}return new wE(w)}function Lx(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="__/auth/handler",Bx="emulator/auth/handler",zx=encodeURIComponent("fac");async function bE(i,e,n,r,o,c){we(i.config.authDomain,i,"auth-domain-config-required"),we(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:ga,eventId:o};if(e instanceof Yw){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",AC(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))h[v]=w}if(e instanceof xc){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(h.scopes=v.join(","))}i.tenantId&&(h.tid=i.tenantId);const p=h;for(const v of Object.keys(p))p[v]===void 0&&delete p[v];const g=await i._getAppCheckToken(),y=g?`#${zx}=${encodeURIComponent(g)}`:"";return`${qx(i)}?${Rc(p).slice(1)}${y}`}function qx({config:i}){return i.emulator?Pp(i,Bx):`https://${i.authDomain}/${Ux}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="webStorageSupport";class Hx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jw,this._completeRedirectFn=dx,this._overrideRedirectResult=ux}async _openPopup(e,n,r,o){Ts(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await bE(e,n,r,ep(),o);return Vx(e,c,Bp())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await bE(e,n,r,ep(),o);return Y1(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Ts(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Dx(e),r=new px(e);return n.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vm,{type:Vm},o=>{const c=o?.[0]?.[Vm];c!==void 0&&n(!!c),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ex(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zw()||Pw()||Vp()}}const Fx=Hx;var AE="@firebase/auth",SE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $x(i){ca(new dr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=r.options;we(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:h,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qw(i)},y=new l1(r,o,c,g);return _1(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ca(new dr("auth-internal",e=>{const n=ya(e.getProvider("auth").getImmediate());return(r=>new Gx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(AE,SE,Yx(i)),Ii(AE,SE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=300,Qx=vw("authIdTokenMaxAge")||Kx;let RE=null;const Xx=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Qx)return;const o=n?.token;RE!==o&&(RE=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Wx(i=Mp()){const e=nf(i,"auth");if(e.isInitialized())return e.getImmediate();const n=y1(i,{popupRedirectResolver:Fx,persistence:[tx,H1,Jw]}),r=vw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const h=Xx(c.toString());U1(n,h,()=>h(n.currentUser)),L1(n,p=>h(p))}}const o=gw("auth");return o&&v1(n,`http://${o}`),n}function Zx(){return document.getElementsByTagName("head")?.[0]??document}c1({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=xi("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",Zx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$x("Browser");var CE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ur,a0;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function I(){}I.prototype=R.prototype,P.D=R.prototype,P.prototype=new I,P.prototype.constructor=P,P.C=function(O,k,U){for(var N=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)N[yt-2]=arguments[yt];return R.prototype[k].apply(O,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,R,I){I||(I=0);var O=Array(16);if(typeof R=="string")for(var k=0;16>k;++k)O[k]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(k=0;16>k;++k)O[k]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=P.g[0],I=P.g[1],k=P.g[2];var U=P.g[3],N=R+(U^I&(k^U))+O[0]+3614090360&4294967295;R=I+(N<<7&4294967295|N>>>25),N=U+(k^R&(I^k))+O[1]+3905402710&4294967295,U=R+(N<<12&4294967295|N>>>20),N=k+(I^U&(R^I))+O[2]+606105819&4294967295,k=U+(N<<17&4294967295|N>>>15),N=I+(R^k&(U^R))+O[3]+3250441966&4294967295,I=k+(N<<22&4294967295|N>>>10),N=R+(U^I&(k^U))+O[4]+4118548399&4294967295,R=I+(N<<7&4294967295|N>>>25),N=U+(k^R&(I^k))+O[5]+1200080426&4294967295,U=R+(N<<12&4294967295|N>>>20),N=k+(I^U&(R^I))+O[6]+2821735955&4294967295,k=U+(N<<17&4294967295|N>>>15),N=I+(R^k&(U^R))+O[7]+4249261313&4294967295,I=k+(N<<22&4294967295|N>>>10),N=R+(U^I&(k^U))+O[8]+1770035416&4294967295,R=I+(N<<7&4294967295|N>>>25),N=U+(k^R&(I^k))+O[9]+2336552879&4294967295,U=R+(N<<12&4294967295|N>>>20),N=k+(I^U&(R^I))+O[10]+4294925233&4294967295,k=U+(N<<17&4294967295|N>>>15),N=I+(R^k&(U^R))+O[11]+2304563134&4294967295,I=k+(N<<22&4294967295|N>>>10),N=R+(U^I&(k^U))+O[12]+1804603682&4294967295,R=I+(N<<7&4294967295|N>>>25),N=U+(k^R&(I^k))+O[13]+4254626195&4294967295,U=R+(N<<12&4294967295|N>>>20),N=k+(I^U&(R^I))+O[14]+2792965006&4294967295,k=U+(N<<17&4294967295|N>>>15),N=I+(R^k&(U^R))+O[15]+1236535329&4294967295,I=k+(N<<22&4294967295|N>>>10),N=R+(k^U&(I^k))+O[1]+4129170786&4294967295,R=I+(N<<5&4294967295|N>>>27),N=U+(I^k&(R^I))+O[6]+3225465664&4294967295,U=R+(N<<9&4294967295|N>>>23),N=k+(R^I&(U^R))+O[11]+643717713&4294967295,k=U+(N<<14&4294967295|N>>>18),N=I+(U^R&(k^U))+O[0]+3921069994&4294967295,I=k+(N<<20&4294967295|N>>>12),N=R+(k^U&(I^k))+O[5]+3593408605&4294967295,R=I+(N<<5&4294967295|N>>>27),N=U+(I^k&(R^I))+O[10]+38016083&4294967295,U=R+(N<<9&4294967295|N>>>23),N=k+(R^I&(U^R))+O[15]+3634488961&4294967295,k=U+(N<<14&4294967295|N>>>18),N=I+(U^R&(k^U))+O[4]+3889429448&4294967295,I=k+(N<<20&4294967295|N>>>12),N=R+(k^U&(I^k))+O[9]+568446438&4294967295,R=I+(N<<5&4294967295|N>>>27),N=U+(I^k&(R^I))+O[14]+3275163606&4294967295,U=R+(N<<9&4294967295|N>>>23),N=k+(R^I&(U^R))+O[3]+4107603335&4294967295,k=U+(N<<14&4294967295|N>>>18),N=I+(U^R&(k^U))+O[8]+1163531501&4294967295,I=k+(N<<20&4294967295|N>>>12),N=R+(k^U&(I^k))+O[13]+2850285829&4294967295,R=I+(N<<5&4294967295|N>>>27),N=U+(I^k&(R^I))+O[2]+4243563512&4294967295,U=R+(N<<9&4294967295|N>>>23),N=k+(R^I&(U^R))+O[7]+1735328473&4294967295,k=U+(N<<14&4294967295|N>>>18),N=I+(U^R&(k^U))+O[12]+2368359562&4294967295,I=k+(N<<20&4294967295|N>>>12),N=R+(I^k^U)+O[5]+4294588738&4294967295,R=I+(N<<4&4294967295|N>>>28),N=U+(R^I^k)+O[8]+2272392833&4294967295,U=R+(N<<11&4294967295|N>>>21),N=k+(U^R^I)+O[11]+1839030562&4294967295,k=U+(N<<16&4294967295|N>>>16),N=I+(k^U^R)+O[14]+4259657740&4294967295,I=k+(N<<23&4294967295|N>>>9),N=R+(I^k^U)+O[1]+2763975236&4294967295,R=I+(N<<4&4294967295|N>>>28),N=U+(R^I^k)+O[4]+1272893353&4294967295,U=R+(N<<11&4294967295|N>>>21),N=k+(U^R^I)+O[7]+4139469664&4294967295,k=U+(N<<16&4294967295|N>>>16),N=I+(k^U^R)+O[10]+3200236656&4294967295,I=k+(N<<23&4294967295|N>>>9),N=R+(I^k^U)+O[13]+681279174&4294967295,R=I+(N<<4&4294967295|N>>>28),N=U+(R^I^k)+O[0]+3936430074&4294967295,U=R+(N<<11&4294967295|N>>>21),N=k+(U^R^I)+O[3]+3572445317&4294967295,k=U+(N<<16&4294967295|N>>>16),N=I+(k^U^R)+O[6]+76029189&4294967295,I=k+(N<<23&4294967295|N>>>9),N=R+(I^k^U)+O[9]+3654602809&4294967295,R=I+(N<<4&4294967295|N>>>28),N=U+(R^I^k)+O[12]+3873151461&4294967295,U=R+(N<<11&4294967295|N>>>21),N=k+(U^R^I)+O[15]+530742520&4294967295,k=U+(N<<16&4294967295|N>>>16),N=I+(k^U^R)+O[2]+3299628645&4294967295,I=k+(N<<23&4294967295|N>>>9),N=R+(k^(I|~U))+O[0]+4096336452&4294967295,R=I+(N<<6&4294967295|N>>>26),N=U+(I^(R|~k))+O[7]+1126891415&4294967295,U=R+(N<<10&4294967295|N>>>22),N=k+(R^(U|~I))+O[14]+2878612391&4294967295,k=U+(N<<15&4294967295|N>>>17),N=I+(U^(k|~R))+O[5]+4237533241&4294967295,I=k+(N<<21&4294967295|N>>>11),N=R+(k^(I|~U))+O[12]+1700485571&4294967295,R=I+(N<<6&4294967295|N>>>26),N=U+(I^(R|~k))+O[3]+2399980690&4294967295,U=R+(N<<10&4294967295|N>>>22),N=k+(R^(U|~I))+O[10]+4293915773&4294967295,k=U+(N<<15&4294967295|N>>>17),N=I+(U^(k|~R))+O[1]+2240044497&4294967295,I=k+(N<<21&4294967295|N>>>11),N=R+(k^(I|~U))+O[8]+1873313359&4294967295,R=I+(N<<6&4294967295|N>>>26),N=U+(I^(R|~k))+O[15]+4264355552&4294967295,U=R+(N<<10&4294967295|N>>>22),N=k+(R^(U|~I))+O[6]+2734768916&4294967295,k=U+(N<<15&4294967295|N>>>17),N=I+(U^(k|~R))+O[13]+1309151649&4294967295,I=k+(N<<21&4294967295|N>>>11),N=R+(k^(I|~U))+O[4]+4149444226&4294967295,R=I+(N<<6&4294967295|N>>>26),N=U+(I^(R|~k))+O[11]+3174756917&4294967295,U=R+(N<<10&4294967295|N>>>22),N=k+(R^(U|~I))+O[2]+718787259&4294967295,k=U+(N<<15&4294967295|N>>>17),N=I+(U^(k|~R))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,P.g[2]=P.g[2]+k&4294967295,P.g[3]=P.g[3]+U&4294967295}r.prototype.u=function(P,R){R===void 0&&(R=P.length);for(var I=R-this.blockSize,O=this.B,k=this.h,U=0;U<R;){if(k==0)for(;U<=I;)o(this,P,U),U+=this.blockSize;if(typeof P=="string"){for(;U<R;)if(O[k++]=P.charCodeAt(U++),k==this.blockSize){o(this,O),k=0;break}}else for(;U<R;)if(O[k++]=P[U++],k==this.blockSize){o(this,O),k=0;break}}this.h=k,this.o+=R},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;var I=8*this.o;for(R=P.length-8;R<P.length;++R)P[R]=I&255,I/=256;for(this.u(P),P=Array(16),R=I=0;4>R;++R)for(var O=0;32>O;O+=8)P[I++]=this.g[R]>>>O&255;return P};function c(P,R){var I=p;return Object.prototype.hasOwnProperty.call(I,P)?I[P]:I[P]=R(P)}function h(P,R){this.h=R;for(var I=[],O=!0,k=P.length-1;0<=k;k--){var U=P[k]|0;O&&U==R||(I[k]=U,O=!1)}this.g=I}var p={};function g(P){return-128<=P&&128>P?c(P,function(R){return new h([R|0],0>R?-1:0)}):new h([P|0],0>P?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return w;if(0>P)return L(y(-P));for(var R=[],I=1,O=0;P>=I;O++)R[O]=P/I|0,I*=4294967296;return new h(R,0)}function v(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return L(v(P.substring(1),R));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=y(Math.pow(R,8)),O=w,k=0;k<P.length;k+=8){var U=Math.min(8,P.length-k),N=parseInt(P.substring(k,k+U),R);8>U?(U=y(Math.pow(R,U)),O=O.j(U).add(y(N))):(O=O.j(I),O=O.add(y(N)))}return O}var w=g(0),A=g(1),C=g(16777216);i=h.prototype,i.m=function(){if(H(this))return-L(this).m();for(var P=0,R=1,I=0;I<this.g.length;I++){var O=this.i(I);P+=(0<=O?O:4294967296+O)*R,R*=4294967296}return P},i.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(D(this))return"0";if(H(this))return"-"+L(this).toString(P);for(var R=y(Math.pow(P,6)),I=this,O="";;){var k=ue(I,R).g;I=J(I,k.j(R));var U=((0<I.g.length?I.g[0]:I.h)>>>0).toString(P);if(I=k,D(I))return U+O;for(;6>U.length;)U="0"+U;O=U+O}},i.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function D(P){if(P.h!=0)return!1;for(var R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function H(P){return P.h==-1}i.l=function(P){return P=J(this,P),H(P)?-1:D(P)?0:1};function L(P){for(var R=P.g.length,I=[],O=0;O<R;O++)I[O]=~P.g[O];return new h(I,~P.h).add(A)}i.abs=function(){return H(this)?L(this):this},i.add=function(P){for(var R=Math.max(this.g.length,P.g.length),I=[],O=0,k=0;k<=R;k++){var U=O+(this.i(k)&65535)+(P.i(k)&65535),N=(U>>>16)+(this.i(k)>>>16)+(P.i(k)>>>16);O=N>>>16,U&=65535,N&=65535,I[k]=N<<16|U}return new h(I,I[I.length-1]&-2147483648?-1:0)};function J(P,R){return P.add(L(R))}i.j=function(P){if(D(this)||D(P))return w;if(H(this))return H(P)?L(this).j(L(P)):L(L(this).j(P));if(H(P))return L(this.j(L(P)));if(0>this.l(C)&&0>P.l(C))return y(this.m()*P.m());for(var R=this.g.length+P.g.length,I=[],O=0;O<2*R;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var k=0;k<P.g.length;k++){var U=this.i(O)>>>16,N=this.i(O)&65535,yt=P.i(k)>>>16,ut=P.i(k)&65535;I[2*O+2*k]+=N*ut,X(I,2*O+2*k),I[2*O+2*k+1]+=U*ut,X(I,2*O+2*k+1),I[2*O+2*k+1]+=N*yt,X(I,2*O+2*k+1),I[2*O+2*k+2]+=U*yt,X(I,2*O+2*k+2)}for(O=0;O<R;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=R;O<2*R;O++)I[O]=0;return new h(I,0)};function X(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function ie(P,R){this.g=P,this.h=R}function ue(P,R){if(D(R))throw Error("division by zero");if(D(P))return new ie(w,w);if(H(P))return R=ue(L(P),R),new ie(L(R.g),L(R.h));if(H(R))return R=ue(P,L(R)),new ie(L(R.g),R.h);if(30<P.g.length){if(H(P)||H(R))throw Error("slowDivide_ only works with positive integers.");for(var I=A,O=R;0>=O.l(P);)I=ce(I),O=ce(O);var k=fe(I,1),U=fe(O,1);for(O=fe(O,2),I=fe(I,2);!D(O);){var N=U.add(O);0>=N.l(P)&&(k=k.add(I),U=N),O=fe(O,1),I=fe(I,1)}return R=J(P,k.j(R)),new ie(k,R)}for(k=w;0<=P.l(R);){for(I=Math.max(1,Math.floor(P.m()/R.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),U=y(I),N=U.j(R);H(N)||0<N.l(P);)I-=O,U=y(I),N=U.j(R);D(U)&&(U=A),k=k.add(U),P=J(P,N)}return new ie(k,P)}i.A=function(P){return ue(this,P).h},i.and=function(P){for(var R=Math.max(this.g.length,P.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)&P.i(O);return new h(I,this.h&P.h)},i.or=function(P){for(var R=Math.max(this.g.length,P.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)|P.i(O);return new h(I,this.h|P.h)},i.xor=function(P){for(var R=Math.max(this.g.length,P.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)^P.i(O);return new h(I,this.h^P.h)};function ce(P){for(var R=P.g.length+1,I=[],O=0;O<R;O++)I[O]=P.i(O)<<1|P.i(O-1)>>>31;return new h(I,P.h)}function fe(P,R){var I=R>>5;R%=32;for(var O=P.g.length-I,k=[],U=0;U<O;U++)k[U]=0<R?P.i(U+I)>>>R|P.i(U+I+1)<<32-R:P.i(U+I);return new h(k,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,a0=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,ur=h}).apply(typeof CE<"u"?CE:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var o0,ec,l0,bh,sp,c0,u0,h0;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,_,E){return u==Array.prototype||u==Object.prototype||(u[_]=E.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var _=0;_<u.length;++_){var E=u[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function o(u,_){if(_)e:{var E=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var z=u[S];if(!(z in E))break e;E=E[z]}u=u[u.length-1],S=E[u],_=_(S),_!=S&&_!=null&&e(E,u,{configurable:!0,writable:!0,value:_})}}function c(u,_){u instanceof String&&(u+="");var E=0,S=!1,z={next:function(){if(!S&&E<u.length){var $=E++;return{value:_($,u[$]),done:!1}}return S=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(u){return u||function(){return c(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function g(u){var _=typeof u;return _=_!="object"?_:u?Array.isArray(u)?"array":_:"null",_=="array"||_=="object"&&typeof u.length=="number"}function y(u){var _=typeof u;return _=="object"&&u!=null||_=="function"}function v(u,_,E){return u.call.apply(u.bind,arguments)}function w(u,_,E){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,S),u.apply(_,z)}}return function(){return u.apply(_,arguments)}}function A(u,_,E){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,A.apply(null,arguments)}function C(u,_){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function D(u,_){function E(){}E.prototype=_.prototype,u.aa=_.prototype,u.prototype=new E,u.prototype.constructor=u,u.Qb=function(S,z,$){for(var re=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)re[qe-2]=arguments[qe];return _.prototype[z].apply(S,re)}}function H(u){const _=u.length;if(0<_){const E=Array(_);for(let S=0;S<_;S++)E[S]=u[S];return E}return[]}function L(u,_){for(let E=1;E<arguments.length;E++){const S=arguments[E];if(g(S)){const z=u.length||0,$=S.length||0;u.length=z+$;for(let re=0;re<$;re++)u[z+re]=S[re]}else u.push(S)}}class J{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function X(u){return/^[\s\xa0]*$/.test(u)}function ie(){var u=p.navigator;return u&&(u=u.userAgent)?u:""}function ue(u){return ue[" "](u),u}ue[" "]=function(){};var ce=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function fe(u,_,E){for(const S in u)_.call(E,u[S],S,u)}function P(u,_){for(const E in u)_.call(void 0,u[E],E,u)}function R(u){const _={};for(const E in u)_[E]=u[E];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,_){let E,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(E in S)u[E]=S[E];for(let $=0;$<I.length;$++)E=I[$],Object.prototype.hasOwnProperty.call(S,E)&&(u[E]=S[E])}}function k(u){var _=1;u=u.split(":");const E=[];for(;0<_&&u.length;)E.push(u.shift()),_--;return u.length&&E.push(u.join(":")),E}function U(u){p.setTimeout(()=>{throw u},0)}function N(){var u=Ye;let _=null;return u.g&&(_=u.g,u.g=u.g.next,u.g||(u.h=null),_.next=null),_}class yt{constructor(){this.h=this.g=null}add(_,E){const S=ut.get();S.set(_,E),this.h?this.h.next=S:this.g=S,this.h=S}}var ut=new J(()=>new K,u=>u.reset());class K{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,me=!1,Ye=new yt,j=()=>{const u=p.Promise.resolve(void 0);ae=()=>{u.then(ne)}};var ne=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(E){U(E)}var _=ut;_.j(u),100>_.h&&(_.h++,u.next=_.g,_.g=u)}me=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(u,_){this.type=u,this.g=this.target=_,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var pe=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var u=!1,_=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};p.addEventListener("test",E,_),p.removeEventListener("test",E,_)}catch{}return u})();function xe(u,_){if(se.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var E=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=_,_=u.relatedTarget){if(ce){e:{try{ue(_.nodeName);var z=!0;break e}catch{}z=!1}z||(_=null)}}else E=="mouseover"?_=u.fromElement:E=="mouseout"&&(_=u.toElement);this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ae[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xe.aa.h.call(this)}}D(xe,se);var Ae={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var St="closure_listenable_"+(1e6*Math.random()|0),et=0;function Pn(u,_,E,S,z){this.listener=u,this.proxy=null,this.src=_,this.type=E,this.capture=!!S,this.ha=z,this.key=++et,this.da=this.fa=!1}function ci(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Qn(u){this.src=u,this.g={},this.h=0}Qn.prototype.add=function(u,_,E,S,z){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var re=Ue(u,_,S,z);return-1<re?(_=u[re],E||(_.fa=!1)):(_=new Pn(_,this.src,$,!!S,z),_.fa=E,u.push(_)),_};function Bi(u,_){var E=_.type;if(E in u.g){var S=u.g[E],z=Array.prototype.indexOf.call(S,_,void 0),$;($=0<=z)&&Array.prototype.splice.call(S,z,1),$&&(ci(_),u.g[E].length==0&&(delete u.g[E],u.h--))}}function Ue(u,_,E,S){for(var z=0;z<u.length;++z){var $=u[z];if(!$.da&&$.listener==_&&$.capture==!!E&&$.ha==S)return z}return-1}var Rs="closure_lm_"+(1e6*Math.random()|0),Ea={};function qo(u,_,E,S,z){if(Array.isArray(_)){for(var $=0;$<_.length;$++)qo(u,_[$],E,S,z);return null}return E=Ta(E),u&&u[St]?u.K(_,E,y(S)?!!S.capture:!1,z):gn(u,_,E,!1,S,z)}function gn(u,_,E,S,z,$){if(!_)throw Error("Invalid event type");var re=y(z)?!!z.capture:!!z,qe=tn(u);if(qe||(u[Rs]=qe=new Qn(u)),E=qe.add(_,E,S,re,$),E.proxy)return E;if(S=ge(),E.proxy=S,S.src=u,S.listener=E,u.addEventListener)pe||(z=re),z===void 0&&(z=!1),u.addEventListener(_.toString(),S,z);else if(u.attachEvent)u.attachEvent(Oe(_.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ge(){function u(E){return _.call(u.src,u.listener,E)}const _=dt;return u}function Ee(u,_,E,S,z){if(Array.isArray(_))for(var $=0;$<_.length;$++)Ee(u,_[$],E,S,z);else S=y(S)?!!S.capture:!!S,E=Ta(E),u&&u[St]?(u=u.i,_=String(_).toString(),_ in u.g&&($=u.g[_],E=Ue($,E,S,z),-1<E&&(ci($[E]),Array.prototype.splice.call($,E,1),$.length==0&&(delete u.g[_],u.h--)))):u&&(u=tn(u))&&(_=u.g[_.toString()],u=-1,_&&(u=Ue(_,E,S,z)),(E=-1<u?_[u]:null)&&Be(E))}function Be(u){if(typeof u!="number"&&u&&!u.da){var _=u.src;if(_&&_[St])Bi(_.i,u);else{var E=u.type,S=u.proxy;_.removeEventListener?_.removeEventListener(E,S,u.capture):_.detachEvent?_.detachEvent(Oe(E),S):_.addListener&&_.removeListener&&_.removeListener(S),(E=tn(_))?(Bi(E,u),E.h==0&&(E.src=null,_[Rs]=null)):ci(u)}}}function Oe(u){return u in Ea?Ea[u]:Ea[u]="on"+u}function dt(u,_){if(u.da)u=!0;else{_=new xe(_,this);var E=u.listener,S=u.ha||u.src;u.fa&&Be(u),u=E.call(S,_)}return u}function tn(u){return u=u[Rs],u instanceof Qn?u:null}var ui="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ta(u){return typeof u=="function"?u:(u[ui]||(u[ui]=function(_){return u.handleEvent(_)}),u[ui])}function ze(){oe.call(this),this.i=new Qn(this),this.M=this,this.F=null}D(ze,oe),ze.prototype[St]=!0,ze.prototype.removeEventListener=function(u,_,E,S){Ee(this,u,_,E,S)};function Ne(u,_){var E,S=u.F;if(S)for(E=[];S;S=S.F)E.push(S);if(u=u.M,S=_.type||_,typeof _=="string")_=new se(_,u);else if(_ instanceof se)_.target=_.target||u;else{var z=_;_=new se(S,u),O(_,z)}if(z=!0,E)for(var $=E.length-1;0<=$;$--){var re=_.g=E[$];z=hn(re,S,!0,_)&&z}if(re=_.g=u,z=hn(re,S,!0,_)&&z,z=hn(re,S,!1,_)&&z,E)for($=0;$<E.length;$++)re=_.g=E[$],z=hn(re,S,!1,_)&&z}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var u=this.i,_;for(_ in u.g){for(var E=u.g[_],S=0;S<E.length;S++)ci(E[S]);delete u.g[_],u.h--}}this.F=null},ze.prototype.K=function(u,_,E,S){return this.i.add(String(u),_,!1,E,S)},ze.prototype.L=function(u,_,E,S){return this.i.add(String(u),_,!0,E,S)};function hn(u,_,E,S){if(_=u.i.g[String(_)],!_)return!0;_=_.concat();for(var z=!0,$=0;$<_.length;++$){var re=_[$];if(re&&!re.da&&re.capture==E){var qe=re.listener,Pt=re.ha||re.src;re.fa&&Bi(u.i,re),z=qe.call(Pt,S)!==!1&&z}}return z&&!S.defaultPrevented}function nn(u,_,E){if(typeof u=="function")E&&(u=A(u,E));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:p.setTimeout(u,_||0)}function Uc(u){u.g=nn(()=>{u.g=null,u.i&&(u.i=!1,Uc(u))},u.l);const _=u.h;u.h=null,u.m.apply(null,_)}class Sf extends oe{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Uc(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ar(u){oe.call(this),this.h=u,this.g={}}D(Ar,oe);var Sr=[];function Rr(u){fe(u.g,function(_,E){this.g.hasOwnProperty(E)&&Be(_)},u),u.g={}}Ar.prototype.N=function(){Ar.aa.N.call(this),Rr(this)},Ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xn=p.JSON.stringify,wa=p.JSON.parse,Cr=class{stringify(u){return p.JSON.stringify(u,void 0)}parse(u){return p.JSON.parse(u,void 0)}};function Ho(){}Ho.prototype.h=null;function Fo(u){return u.h||(u.h=u.i())}function Go(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qi(){se.call(this,"d")}D(qi,se);function Yo(){se.call(this,"c")}D(Yo,se);var hi={},$o=null;function Cs(){return $o=$o||new ze}hi.La="serverreachability";function ba(u){se.call(this,hi.La,u)}D(ba,se);function Is(u){const _=Cs();Ne(_,new ba(_))}hi.STAT_EVENT="statevent";function Bc(u,_){se.call(this,hi.STAT_EVENT,u),this.stat=_}D(Bc,se);function ht(u){const _=Cs();Ne(_,new Bc(_,u))}hi.Ma="timingevent";function jt(u,_){se.call(this,hi.Ma,u),this.size=_}D(jt,se);function Rt(u,_){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){u()},_)}function kn(){this.g=!0}kn.prototype.xa=function(){this.g=!1};function Ko(u,_,E,S,z,$){u.info(function(){if(u.g)if($)for(var re="",qe=$.split("&"),Pt=0;Pt<qe.length;Pt++){var He=qe[Pt].split("=");if(1<He.length){var zt=He[0];He=He[1];var kt=zt.split("_");re=2<=kt.length&&kt[1]=="type"?re+(zt+"="+He+"&"):re+(zt+"=redacted&")}}else re=null;else re=$;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+_+`
`+E+`
`+re})}function Rf(u,_,E,S,z,$,re){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+_+`
`+E+`
`+$+" "+re})}function xs(u,_,E,S){u.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ir(u,E)+(S?" "+S:"")})}function zc(u,_){u.info(function(){return"TIMEOUT: "+_})}kn.prototype.info=function(){};function Ir(u,_){if(!u.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(u=0;u<E.length;u++)if(Array.isArray(E[u])){var S=E[u];if(!(2>S.length)){var z=S[1];if(Array.isArray(z)&&!(1>z.length)){var $=z[0];if($!="noop"&&$!="stop"&&$!="close")for(var re=1;re<z.length;re++)z[re]=""}}}}return Xn(E)}catch{return _}}var Ns={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fi;function di(){}D(di,Ho),di.prototype.g=function(){return new XMLHttpRequest},di.prototype.i=function(){return{}},fi=new di;function fn(u,_,E,S){this.j=u,this.i=_,this.l=E,this.R=S||1,this.U=new Ar(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Et}function Et(){this.i=null,this.g="",this.h=!1}var Qo={},Aa={};function Wn(u,_,E){u.L=1,u.v=Mr(wn(_)),u.m=E,u.P=!0,Fi(u,null)}function Fi(u,_){u.F=Date.now(),xr(u),u.A=wn(u.v);var E=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),tl(E.i,"t",S),u.C=0,E=u.j.J,u.h=new Et,u.g=iu(u.j,E?_:null,!u.m),0<u.O&&(u.M=new Sf(A(u.Y,u,u.g),u.O)),_=u.U,E=u.g,S=u.ca;var z="readystatechange";Array.isArray(z)||(z&&(Sr[0]=z.toString()),z=Sr);for(var $=0;$<z.length;$++){var re=qo(E,z[$],S||_.handleEvent,!1,_.h||_);if(!re)break;_.g[re.key]=re}_=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,_)):(u.u="GET",u.g.ea(u.A,u.u,null,_)),Is(),Ko(u.i,u.u,u.A,u.l,u.R,u.m)}fn.prototype.ca=function(u){u=u.target;const _=this.M;_&&Bn(u)==3?_.j():this.Y(u)},fn.prototype.Y=function(u){try{if(u==this.g)e:{const kt=Bn(this.g);var _=this.g.Ba();const Zi=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Qc(this.g)))){this.J||kt!=4||_==7||(_==8||0>=Zi?Is(3):Is(2)),Ds(this);var E=this.g.Z();this.X=E;t:if(qc(this)){var S=Qc(this.g);u="";var z=S.length,$=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),mi(this);var re="";break t}this.h.i=new p.TextDecoder}for(_=0;_<z;_++)this.h.h=!0,u+=this.h.i.decode(S[_],{stream:!($&&_==z-1)});S.length=0,this.h.g+=u,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=E==200,Rf(this.i,this.u,this.A,this.l,this.R,kt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Pt=this.g;if((qe=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(qe)){var He=qe;break t}}He=null}if(E=He)xs(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nr(this,E);else{this.o=!1,this.s=3,ht(12),Yt(this),mi(this);break e}}if(this.P){E=!0;let $t;for(;!this.J&&this.C<re.length;)if($t=Hc(this,re),$t==Aa){kt==4&&(this.s=4,ht(14),E=!1),xs(this.i,this.l,null,"[Incomplete Response]");break}else if($t==Qo){this.s=4,ht(15),xs(this.i,this.l,re,"[Invalid Chunk]"),E=!1;break}else xs(this.i,this.l,$t,null),Nr(this,$t);if(qc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||re.length!=0||this.h.h||(this.s=1,ht(16),E=!1),this.o=this.o&&E,!E)xs(this.i,this.l,re,"[Invalid Chunked Response]"),Yt(this),mi(this);else if(0<re.length&&!this.W){this.W=!0;var zt=this.j;zt.g==this&&zt.ba&&!zt.M&&(zt.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),zr(zt),zt.M=!0,ht(11))}}else xs(this.i,this.l,re,null),Nr(this,re);kt==4&&Yt(this),this.o&&!this.J&&(kt==4?eu(this.j,this):(this.o=!1,xr(this)))}else Df(this.g),E==400&&0<re.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),Yt(this),mi(this)}}}catch{}finally{}};function qc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Hc(u,_){var E=u.C,S=_.indexOf(`
`,E);return S==-1?Aa:(E=Number(_.substring(E,S)),isNaN(E)?Qo:(S+=1,S+E>_.length?Aa:(_=_.slice(S,S+E),u.C=S+E,_)))}fn.prototype.cancel=function(){this.J=!0,Yt(this)};function xr(u){u.S=Date.now()+u.I,Fc(u,u.I)}function Fc(u,_){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Rt(A(u.ba,u),_)}function Ds(u){u.B&&(p.clearTimeout(u.B),u.B=null)}fn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(zc(this.i,this.A),this.L!=2&&(Is(),ht(17)),Yt(this),this.s=2,mi(this)):Fc(this,this.S-u)};function mi(u){u.j.G==0||u.J||eu(u.j,u)}function Yt(u){Ds(u);var _=u.M;_&&typeof _.ma=="function"&&_.ma(),u.M=null,Rr(u.U),u.g&&(_=u.g,u.g=null,_.abort(),_.ma())}function Nr(u,_){try{var E=u.j;if(E.G!=0&&(E.g==u||Xo(E.h,u))){if(!u.K&&Xo(E.h,u)&&E.G==3){try{var S=E.Da.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<u.F)ka(E),ja(E);else break e;al(E),ht(18)}}else E.za=z[1],0<E.za-E.T&&37500>z[2]&&E.F&&E.v==0&&!E.C&&(E.C=Rt(A(E.Za,E),6e3));if(1>=Ra(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Wi(E,11)}else if((u.K||E.g==u)&&ka(E),!X(_))for(z=E.Da.g.parse(_),_=0;_<z.length;_++){let He=z[_];if(E.T=He[0],He=He[1],E.G==2)if(He[0]=="c"){E.K=He[1],E.ia=He[2];const zt=He[3];zt!=null&&(E.la=zt,E.j.info("VER="+E.la));const kt=He[4];kt!=null&&(E.Aa=kt,E.j.info("SVER="+E.Aa));const Zi=He[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(S=1.5*Zi,E.L=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const $t=u.g;if($t){const Ti=$t.g?$t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ti){var $=S.h;$.g||Ti.indexOf("spdy")==-1&&Ti.indexOf("quic")==-1&&Ti.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Ca($,$.h),$.h=null))}if(S.D){const ll=$t.g?$t.g.getResponseHeader("X-HTTP-Session-Id"):null;ll&&(S.ya=ll,tt(S.I,S.D,ll))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-u.F,E.j.info("Handshake RTT: "+E.R+"ms")),S=E;var re=u;if(S.qa=nu(S,S.J?S.ia:null,S.W),re.K){dn(S.h,re);var qe=re,Pt=S.L;Pt&&(qe.I=Pt),qe.B&&(Ds(qe),xr(qe)),S.g=re}else Zc(S);0<E.i.length&&Pa(E)}else He[0]!="stop"&&He[0]!="close"||Wi(E,7);else E.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Wi(E,7):sl(E):He[0]!="noop"&&E.l&&E.l.ta(He),E.v=0)}}Is(4)}catch{}}var Gc=class{constructor(u,_){this.g=u,this.map=_}};function Gi(u){this.l=u||10,p.PerformanceNavigationTiming?(u=p.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ra(u){return u.h?1:u.g?u.g.size:0}function Xo(u,_){return u.h?u.h==_:u.g?u.g.has(_):!1}function Ca(u,_){u.g?u.g.add(_):u.h=_}function dn(u,_){u.h&&u.h==_?u.h=null:u.g&&u.g.has(_)&&u.g.delete(_)}Gi.prototype.cancel=function(){if(this.i=Wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Wo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let _=u.i;for(const E of u.g.values())_=_.concat(E.D);return _}return H(u.i)}function Cf(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var _=[],E=u.length,S=0;S<E;S++)_.push(u[S]);return _}_=[],E=0;for(S in u)_[E++]=u[S];return _}function Ia(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var _=[];u=u.length;for(var E=0;E<u;E++)_.push(E);return _}_=[],E=0;for(const S in u)_[E++]=S;return _}}}function Zo(u,_){if(u.forEach&&typeof u.forEach=="function")u.forEach(_,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,_,void 0);else for(var E=Ia(u),S=Cf(u),z=S.length,$=0;$<z;$++)_.call(void 0,S[$],E&&E[$],u)}var Dr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function If(u,_){if(u){u=u.split("&");for(var E=0;E<u.length;E++){var S=u[E].indexOf("="),z=null;if(0<=S){var $=u[E].substring(0,S);z=u[E].substring(S+1)}else $=u[E];_($,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Ct(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ct){this.h=u.h,Or(this,u.j),this.o=u.o,this.g=u.g,Os(this,u.s),this.l=u.l;var _=u.i,E=new $i;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Yi(this,E),this.m=u.m}else u&&(_=String(u).match(Dr))?(this.h=!1,Or(this,_[1]||"",!0),this.o=Vn(_[2]||""),this.g=Vn(_[3]||"",!0),Os(this,_[4]),this.l=Vn(_[5]||"",!0),Yi(this,_[6]||"",!0),this.m=Vn(_[7]||"")):(this.h=!1,this.i=new $i(null,this.h))}Ct.prototype.toString=function(){var u=[],_=this.j;_&&u.push(jr(_,Jo,!0),":");var E=this.g;return(E||_=="file")&&(u.push("//"),(_=this.o)&&u.push(jr(_,Jo,!0),"@"),u.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&u.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(jr(E,E.charAt(0)=="/"?xf:el,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",jr(E,xa)),u.join("")};function wn(u){return new Ct(u)}function Or(u,_,E){u.j=E?Vn(_,!0):_,u.j&&(u.j=u.j.replace(/:$/,""))}function Os(u,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);u.s=_}else u.s=null}function Yi(u,_,E){_ instanceof $i?(u.i=_,$c(u.i,u.h)):(E||(_=jr(_,Nf)),u.i=new $i(_,u.h))}function tt(u,_,E){u.i.set(_,E)}function Mr(u){return tt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Vn(u,_){return u?_?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function jr(u,_,E){return typeof u=="string"?(u=encodeURI(u).replace(_,Yc),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Yc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Jo=/[#\/\?@]/g,el=/[#\?:]/g,xf=/[#\?]/g,Nf=/[#\?@]/g,xa=/#/g;function $i(u,_){this.h=this.g=null,this.i=u||null,this.j=!!_}function Ln(u){u.g||(u.g=new Map,u.h=0,u.i&&If(u.i,function(_,E){u.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}i=$i.prototype,i.add=function(u,_){Ln(this),this.i=null,u=pi(this,u);var E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(_),this.h+=1,this};function Ki(u,_){Ln(u),_=pi(u,_),u.g.has(_)&&(u.i=null,u.h-=u.g.get(_).length,u.g.delete(_))}function Qi(u,_){return Ln(u),_=pi(u,_),u.g.has(_)}i.forEach=function(u,_){Ln(this),this.g.forEach(function(E,S){E.forEach(function(z){u.call(_,z,S,this)},this)},this)},i.na=function(){Ln(this);const u=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let S=0;S<_.length;S++){const z=u[S];for(let $=0;$<z.length;$++)E.push(_[S])}return E},i.V=function(u){Ln(this);let _=[];if(typeof u=="string")Qi(this,u)&&(_=_.concat(this.g.get(pi(this,u))));else{u=Array.from(this.g.values());for(let E=0;E<u.length;E++)_=_.concat(u[E])}return _},i.set=function(u,_){return Ln(this),this.i=null,u=pi(this,u),Qi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[_]),this.h+=1,this},i.get=function(u,_){return u?(u=this.V(u),0<u.length?String(u[0]):_):_};function tl(u,_,E){Ki(u,_),0<E.length&&(u.i=null,u.g.set(pi(u,_),H(E)),u.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var S=_[E];const $=encodeURIComponent(String(S)),re=this.V(S);for(S=0;S<re.length;S++){var z=$;re[S]!==""&&(z+="="+encodeURIComponent(String(re[S]))),u.push(z)}}return this.i=u.join("&")};function pi(u,_){return _=String(_),u.j&&(_=_.toLowerCase()),_}function $c(u,_){_&&!u.j&&(Ln(u),u.i=null,u.g.forEach(function(E,S){var z=S.toLowerCase();S!=z&&(Ki(this,S),tl(this,z,E))},u)),u.j=_}function Pr(u,_){const E=new kn;if(p.Image){const S=new Image;S.onload=C(Un,E,"TestLoadImage: loaded",!0,_,S),S.onerror=C(Un,E,"TestLoadImage: error",!1,_,S),S.onabort=C(Un,E,"TestLoadImage: abort",!1,_,S),S.ontimeout=C(Un,E,"TestLoadImage: timeout",!1,_,S),p.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else _(!1)}function Zn(u,_){const E=new kn,S=new AbortController,z=setTimeout(()=>{S.abort(),Un(E,"TestPingServer: timeout",!1,_)},1e4);fetch(u,{signal:S.signal}).then($=>{clearTimeout(z),$.ok?Un(E,"TestPingServer: ok",!0,_):Un(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(z),Un(E,"TestPingServer: error",!1,_)})}function Un(u,_,E,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(E)}catch{}}function kr(){this.g=new Cr}function gi(u,_,E){const S=E||"";try{Zo(u,function(z,$){let re=z;y(z)&&(re=Xn(z)),_.push(S+$+"="+encodeURIComponent(re))})}catch(z){throw _.push(S+"type="+encodeURIComponent("_badmap")),z}}function Ms(u){this.l=u.Ub||null,this.j=u.eb||!1}D(Ms,Ho),Ms.prototype.g=function(){return new Xi(this.l,this.j)},Ms.prototype.i=(function(u){return function(){return u}})({});function Xi(u,_){ze.call(this),this.D=u,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Xi,ze),i=Xi.prototype,i.open=function(u,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=_,this.readyState=1,_i(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(_.body=u),(this.D||p).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yi(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,_i(this)),this.g&&(this.readyState=3,_i(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function nl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var _=u.value?u.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!u.done}))&&(this.response=this.responseText+=_)}u.done?yi(this):_i(this),this.readyState==3&&nl(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,yi(this))},i.Qa=function(u){this.g&&(this.response=u,yi(this))},i.ga=function(){this.g&&yi(this)};function yi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,_i(u)}i.setRequestHeader=function(u,_){this.u.append(u,_)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=_.next();return u.join(`\r
`)};function _i(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function il(u){let _="";return fe(u,function(E,S){_+=S,_+=":",_+=E,_+=`\r
`}),_}function Bt(u,_,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=il(E),typeof u=="string"?E!=null&&encodeURIComponent(String(E)):tt(u,_,E))}function Qe(u){ze.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Qe,ze);var Na=/^https?$/i,Vr=["POST","PUT"];i=Qe.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,_,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);_=_?_.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fi.g(),this.v=this.o?Fo(this.o):Fo(fi),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(_,String(u),!0),this.B=!1}catch($){Kc(this,$);return}if(u=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)E.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const $ of S.keys())E.set($,S.get($));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find($=>$.toLowerCase()=="content-type"),z=p.FormData&&u instanceof p.FormData,!(0<=Array.prototype.indexOf.call(Vr,_,void 0))||S||z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,re]of E)this.g.setRequestHeader($,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lr(this),this.u=!0,this.g.send(u),this.u=!1}catch($){Kc(this,$)}};function Kc(u,_){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=_,u.m=5,Da(u),vi(u)}function Da(u){u.A||(u.A=!0,Ne(u,"complete"),Ne(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ne(this,"complete"),Ne(this,"abort"),vi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vi(this,!0)),Qe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Oa(this):this.bb())},i.bb=function(){Oa(this)};function Oa(u){if(u.h&&typeof h<"u"&&(!u.v[1]||Bn(u)!=4||u.Z()!=2)){if(u.u&&Bn(u)==4)nn(u.Ea,0,u);else if(Ne(u,"readystatechange"),Bn(u)==4){u.h=!1;try{const re=u.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var S;if(S=re===0){var z=String(u.D).match(Dr)[1]||null;!z&&p.self&&p.self.location&&(z=p.self.location.protocol.slice(0,-1)),S=!Na.test(z?z.toLowerCase():"")}E=S}if(E)Ne(u,"complete"),Ne(u,"success");else{u.m=6;try{var $=2<Bn(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",Da(u)}}finally{vi(u)}}}}function vi(u,_){if(u.g){Lr(u);const E=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,_||Ne(u,"ready");try{E.onreadystatechange=S}catch{}}}function Lr(u){u.I&&(p.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function Bn(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var _=this.g.responseText;return u&&_.indexOf(u)==0&&(_=_.substring(u.length)),wa(_)}};function Qc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Df(u){const _={};u=(u.g&&2<=Bn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(X(u[S]))continue;var E=k(u[S]);const z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const $=_[z]||[];_[z]=$,$.push(E)}P(_,function(S){return S.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ur(u,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||_}function Ma(u){this.Aa=0,this.i=[],this.j=new kn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ur("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ur("baseRetryDelayMs",5e3,u),this.cb=Ur("retryDelaySeedMs",1e4,u),this.Wa=Ur("forwardChannelMaxRetries",2,u),this.wa=Ur("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Gi(u&&u.concurrentRequestLimit),this.Da=new kr,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ma.prototype,i.la=8,i.G=1,i.connect=function(u,_,E,S){ht(0),this.W=u,this.H=_||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.I=nu(this,null,this.W),Pa(this)};function sl(u){if(Xc(u),u.G==3){var _=u.U++,E=wn(u.I);if(tt(E,"SID",u.K),tt(E,"RID",_),tt(E,"TYPE","terminate"),Br(u,E),_=new fn(u,u.j,_),_.L=2,_.v=Mr(wn(E)),E=!1,p.navigator&&p.navigator.sendBeacon)try{E=p.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&p.Image&&(new Image().src=_.v,E=!0),E||(_.g=iu(_.j,null),_.g.ea(_.v)),_.F=Date.now(),xr(_)}tu(u)}function ja(u){u.g&&(zr(u),u.g.cancel(),u.g=null)}function Xc(u){ja(u),u.u&&(p.clearTimeout(u.u),u.u=null),ka(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&p.clearTimeout(u.s),u.s=null)}function Pa(u){if(!Sa(u.h)&&!u.s){u.s=!0;var _=u.Ga;ae||j(),me||(ae(),me=!0),Ye.add(_,u),u.B=0}}function Of(u,_){return Ra(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=_.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Rt(A(u.Ga,u,_),ol(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const z=new fn(this,this.j,u);let $=this.o;if(this.S&&($?($=R($),O($,this.S)):$=this.S),this.m!==null||this.O||(z.H=$,$=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Wc(this,z,_),E=wn(this.I),tt(E,"RID",u),tt(E,"CVER",22),this.D&&tt(E,"X-HTTP-Session-Id",this.D),Br(this,E),$&&(this.O?_="headers="+encodeURIComponent(String(il($)))+"&"+_:this.m&&Bt(E,this.m,$)),Ca(this.h,z),this.Ua&&tt(E,"TYPE","init"),this.P?(tt(E,"$req",_),tt(E,"SID","null"),z.T=!0,Wn(z,E,null)):Wn(z,E,_),this.G=2}}else this.G==3&&(u?rl(this,u):this.i.length==0||Sa(this.h)||rl(this))};function rl(u,_){var E;_?E=_.l:E=u.U++;const S=wn(u.I);tt(S,"SID",u.K),tt(S,"RID",E),tt(S,"AID",u.T),Br(u,S),u.m&&u.o&&Bt(S,u.m,u.o),E=new fn(u,u.j,E,u.B+1),u.m===null&&(E.H=u.o),_&&(u.i=_.D.concat(u.i)),_=Wc(u,E,1e3),E.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ca(u.h,E),Wn(E,S,_)}function Br(u,_){u.H&&fe(u.H,function(E,S){tt(_,S,E)}),u.l&&Zo({},function(E,S){tt(_,S,E)})}function Wc(u,_,E){E=Math.min(u.i.length,E);var S=u.l?A(u.l.Na,u.l,u):null;e:{var z=u.i;let $=-1;for(;;){const re=["count="+E];$==-1?0<E?($=z[0].g,re.push("ofs="+$)):$=0:re.push("ofs="+$);let qe=!0;for(let Pt=0;Pt<E;Pt++){let He=z[Pt].g;const zt=z[Pt].map;if(He-=$,0>He)$=Math.max(0,z[Pt].g-100),qe=!1;else try{gi(zt,re,"req"+He+"_")}catch{S&&S(zt)}}if(qe){S=re.join("&");break e}}}return u=u.i.splice(0,E),_.D=u,S}function Zc(u){if(!u.g&&!u.u){u.Y=1;var _=u.Fa;ae||j(),me||(ae(),me=!0),Ye.add(_,u),u.v=0}}function al(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Rt(A(u.Fa,u),ol(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,Jc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Rt(A(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),ja(this),Jc(this))};function zr(u){u.A!=null&&(p.clearTimeout(u.A),u.A=null)}function Jc(u){u.g=new fn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var _=wn(u.qa);tt(_,"RID","rpc"),tt(_,"SID",u.K),tt(_,"AID",u.T),tt(_,"CI",u.F?"0":"1"),!u.F&&u.ja&&tt(_,"TO",u.ja),tt(_,"TYPE","xmlhttp"),Br(u,_),u.m&&u.o&&Bt(_,u.m,u.o),u.L&&(u.g.I=u.L);var E=u.g;u=u.ia,E.L=1,E.v=Mr(wn(_)),E.m=null,E.P=!0,Fi(E,u)}i.Za=function(){this.C!=null&&(this.C=null,ja(this),al(this),ht(19))};function ka(u){u.C!=null&&(p.clearTimeout(u.C),u.C=null)}function eu(u,_){var E=null;if(u.g==_){ka(u),zr(u),u.g=null;var S=2}else if(Xo(u.h,_))E=_.D,dn(u.h,_),S=1;else return;if(u.G!=0){if(_.o)if(S==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var z=u.B;S=Cs(),Ne(S,new jt(S,E)),Pa(u)}else Zc(u);else if(z=_.s,z==3||z==0&&0<_.X||!(S==1&&Of(u,_)||S==2&&al(u)))switch(E&&0<E.length&&(_=u.h,_.i=_.i.concat(E)),z){case 1:Wi(u,5);break;case 4:Wi(u,10);break;case 3:Wi(u,6);break;default:Wi(u,2)}}}function ol(u,_){let E=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(E*=2),E*_}function Wi(u,_){if(u.j.info("Error code "+_),_==2){var E=A(u.fb,u),S=u.Xa;const z=!S;S=new Ct(S||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Or(S,"https"),Mr(S),z?Pr(S.toString(),E):Zn(S.toString(),E)}else ht(2);u.G=0,u.l&&u.l.sa(_),tu(u),Xc(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function tu(u){if(u.G=0,u.ka=[],u.l){const _=Wo(u.h);(_.length!=0||u.i.length!=0)&&(L(u.ka,_),L(u.ka,u.i),u.h.i.length=0,H(u.i),u.i.length=0),u.l.ra()}}function nu(u,_,E){var S=E instanceof Ct?wn(E):new Ct(E);if(S.g!="")_&&(S.g=_+"."+S.g),Os(S,S.s);else{var z=p.location;S=z.protocol,_=_?_+"."+z.hostname:z.hostname,z=+z.port;var $=new Ct(null);S&&Or($,S),_&&($.g=_),z&&Os($,z),E&&($.l=E),S=$}return E=u.D,_=u.ya,E&&_&&tt(S,E,_),tt(S,"VER",u.la),Br(u,S),S}function iu(u,_,E){if(_&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=u.Ca&&!u.pa?new Qe(new Ms({eb:E})):new Qe(u.pa),_.Ha(u.J),_}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function su(){}i=su.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Va(){}Va.prototype.g=function(u,_){return new mn(u,_)};function mn(u,_){ze.call(this),this.g=new Ma(_),this.l=u,this.h=_&&_.messageUrlParams||null,u=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(u?u["X-WebChannel-Content-Type"]=_.messageContentType:u={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(u?u["X-WebChannel-Client-Profile"]=_.va:u={"X-WebChannel-Client-Profile":_.va}),this.g.S=u,(u=_&&_.Sb)&&!X(u)&&(this.g.m=u),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!X(_)&&(this.g.D=_,u=this.h,u!==null&&_ in u&&(u=this.h,_ in u&&delete u[_])),this.j=new Ei(this)}D(mn,ze),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){sl(this.g)},mn.prototype.o=function(u){var _=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.u&&(E={},E.__data__=Xn(u),u=E);_.i.push(new Gc(_.Ya++,u)),_.G==3&&Pa(_)},mn.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,mn.aa.N.call(this)};function ru(u){qi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var _=u.__sm__;if(_){e:{for(const E in _){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,_=_!==null&&u in _?_[u]:void 0),this.data=_}else this.data=u}D(ru,qi);function au(){Yo.call(this),this.status=1}D(au,Yo);function Ei(u){this.g=u}D(Ei,su),Ei.prototype.ua=function(){Ne(this.g,"a")},Ei.prototype.ta=function(u){Ne(this.g,new ru(u))},Ei.prototype.sa=function(u){Ne(this.g,new au)},Ei.prototype.ra=function(){Ne(this.g,"b")},Va.prototype.createWebChannel=Va.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,h0=function(){return new Va},u0=function(){return Cs()},c0=hi,sp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,bh=Ns,Hi.COMPLETE="complete",l0=Hi,Go.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",ze.prototype.listen=ze.prototype.K,ec=Go,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,o0=Qe}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});const IE="@firebase/firestore",xE="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new Dp("@firebase/firestore");function mo(){return fa.logLevel}function he(i,...e){if(fa.logLevel<=ke.DEBUG){const n=e.map(qp);fa.debug(`Firestore (${ko}): ${i}`,...n)}}function ws(i,...e){if(fa.logLevel<=ke.ERROR){const n=e.map(qp);fa.error(`Firestore (${ko}): ${i}`,...n)}}function Co(i,...e){if(fa.logLevel<=ke.WARN){const n=e.map(qp);fa.warn(`Firestore (${ko}): ${i}`,...n)}}function qp(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,f0(i,r,n)}function f0(i,e,n){let r=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ws(r),new Error(r)}function Xe(i,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||f0(e,o,r)}function Ce(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(on.UNAUTHENTICATED)))}shutdown(){}}class eN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class tN{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let c=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new _s,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new _s)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new d0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class nN{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class iN{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new nN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class NE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);const r=c=>{c.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.m;return this.m=c.token,he("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new NE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new NE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=rN(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Ve(i,e){return i<e?-1:i>e?1:0}function rp(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const o=i.charAt(r),c=e.charAt(r);if(o!==c)return Lm(o)===Lm(c)?Ve(o,c):Lm(o)?1:-1}return Ve(i.length,e.length)}const aN=55296,oN=57343;function Lm(i){const e=i.charCodeAt(0);return e>=aN&&e<=oN}function Io(i,e,n){return i.length===e.length&&i.every(((r,o)=>n(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="__name__";class Ci{constructor(e,n,r){n===void 0?n=0:n>e.length&&be(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&be(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ci.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ci?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=Ci.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Ve(e.length,n.length)}static compareSegments(e,n){const r=Ci.isNumericId(e),o=Ci.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Ci.extractNumericId(e).compare(Ci.extractNumericId(n)):rp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ur.fromString(e.substring(4,e.length-2))}}class ot extends Ci{construct(e,n,r){return new ot(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new ot(n)}static emptyPath(){return new ot([])}}const lN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends Ci{construct(e,n,r){return new Jt(e,n,r)}static isValidIdentifier(e){return lN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DE}static keyField(){return new Jt([DE])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new le(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new le(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new le(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(r+=p,o++):(c(),o++)}if(c(),h)throw new le(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(n)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(ot.fromString(e))}static fromName(e){return new _e(ot.fromString(e).popFirst(5))}static empty(){return new _e(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(i,e,n){if(!n)throw new le(Z.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function cN(i,e,n,r){if(e===!0&&r===!0)throw new le(Z.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function OE(i){if(!_e.isDocumentKey(i))throw new le(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ME(i){if(_e.isDocumentKey(i))throw new le(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function p0(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function of(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":be(12329,{type:typeof i})}function bs(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new le(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=of(i);throw new le(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(i,e){const n={typeString:i};return e&&(n.value=e),n}function Dc(i,e){if(!p0(i))throw new le(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const h=i[r];if(o&&typeof h!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&h!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new le(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=-62135596800,PE=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*PE);return new ct(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<jE)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PE}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Dc(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Ot("string",ct._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ct(0,0))}static max(){return new Re(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=-1;function uN(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new mr(o,_e.empty(),e)}function hN(i){return new mr(i.readTime,i.key,mc)}class mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mr(Re.min(),_e.empty(),mc)}static max(){return new mr(Re.max(),_e.empty(),mc)}}function fN(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(i.documentKey,e.documentKey),n!==0?n:Ve(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(i){if(i.code!==Z.FAILED_PRECONDITION||i.message!==dN)throw i;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):te.reject(n)}static resolve(e){return new te(((n,r)=>{n(e)}))}static reject(e){return new te(((n,r)=>{r(e)}))}static waitFor(e){return new te(((n,r)=>{let o=0,c=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++c,h&&c===o&&n()}),(g=>r(g)))})),h=!0,c===o&&n()}))}static or(e){let n=te.resolve(!1);for(const r of e)n=n.next((o=>o?te.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new te(((r,o)=>{const c=e.length,h=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((v=>{h[y]=v,++p,p===c&&r(h)}),(v=>o(v)))}}))}static doWhile(e,n){return new te(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function pN(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}lf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp=-1;function cf(i){return i==null}function Uh(i){return i===0&&1/i==-1/0}function gN(i){return typeof i=="number"&&Number.isInteger(i)&&!Uh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="";function yN(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=kE(e)),e=_N(i.get(n),e);return kE(e)}function _N(i,e){let n=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case g0:n+="";break;default:n+=c}}return n}function kE(i){return i+g0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function wr(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function y0(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??Zt.RED,this.left=o??Zt.EMPTY,this.right=c??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new Zt(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new LE(this.data.getIterator())}getIteratorFrom(e){return new LE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ut(this.comparator);return n.data=e,n}}class LE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new On([])}unionWith(e){let n=new Ut(Jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new _0("Invalid base64 string: "+c):c}})(e);return new en(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let h=0;h<o.length;++h)c+=String.fromCharCode(o[h]);return c})(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const vN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(i){if(Xe(!!i,39018),typeof i=="string"){let e=0;const n=vN.exec(i);if(Xe(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(i.seconds),nanos:bt(i.nanos)}}function bt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function gr(i){return typeof i=="string"?en.fromBase64String(i):en.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="server_timestamp",E0="__type__",T0="__previous_value__",w0="__local_write_time__";function Gp(i){return(i?.mapValue?.fields||{})[E0]?.stringValue===v0}function uf(i){const e=i.mapValue.fields[T0];return Gp(e)?uf(e):e}function pc(i){const e=pr(i.mapValue.fields[w0].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,n,r,o,c,h,p,g,y,v){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const Bh="(default)";class gc{constructor(e,n){this.projectId=e,this.database=n||Bh}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database===Bh}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="__type__",TN="__max__",hh={mapValue:{}},A0="__vector__",zh="value";function yr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Gp(i)?4:bN(i)?9007199254740991:wN(i)?10:11:be(28295,{value:i})}function Pi(i,e){if(i===e)return!0;const n=yr(i);if(n!==yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return pc(i).isEqual(pc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const h=pr(o.timestampValue),p=pr(c.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return gr(o.bytesValue).isEqual(gr(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return bt(o.geoPointValue.latitude)===bt(c.geoPointValue.latitude)&&bt(o.geoPointValue.longitude)===bt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return bt(o.integerValue)===bt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const h=bt(o.doubleValue),p=bt(c.doubleValue);return h===p?Uh(h)===Uh(p):isNaN(h)&&isNaN(p)}return!1})(i,e);case 9:return Io(i.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return(function(o,c){const h=o.mapValue.fields||{},p=c.mapValue.fields||{};if(VE(h)!==VE(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!Pi(h[g],p[g])))return!1;return!0})(i,e);default:return be(52216,{left:i})}}function yc(i,e){return(i.values||[]).find((n=>Pi(n,e)))!==void 0}function xo(i,e){if(i===e)return 0;const n=yr(i),r=yr(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(i.booleanValue,e.booleanValue);case 2:return(function(c,h){const p=bt(c.integerValue||c.doubleValue),g=bt(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(i,e);case 3:return UE(i.timestampValue,e.timestampValue);case 4:return UE(pc(i),pc(e));case 5:return rp(i.stringValue,e.stringValue);case 6:return(function(c,h){const p=gr(c),g=gr(h);return p.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,h){const p=c.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const v=Ve(p[y],g[y]);if(v!==0)return v}return Ve(p.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,h){const p=Ve(bt(c.latitude),bt(h.latitude));return p!==0?p:Ve(bt(c.longitude),bt(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return BE(i.arrayValue,e.arrayValue);case 10:return(function(c,h){const p=c.fields||{},g=h.fields||{},y=p[zh]?.arrayValue,v=g[zh]?.arrayValue,w=Ve(y?.values?.length||0,v?.values?.length||0);return w!==0?w:BE(y,v)})(i.mapValue,e.mapValue);case 11:return(function(c,h){if(c===hh.mapValue&&h===hh.mapValue)return 0;if(c===hh.mapValue)return 1;if(h===hh.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=h.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let w=0;w<g.length&&w<v.length;++w){const A=rp(g[w],v[w]);if(A!==0)return A;const C=xo(p[g[w]],y[v[w]]);if(C!==0)return C}return Ve(g.length,v.length)})(i.mapValue,e.mapValue);default:throw be(23264,{he:n})}}function UE(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ve(i,e);const n=pr(i),r=pr(e),o=Ve(n.seconds,r.seconds);return o!==0?o:Ve(n.nanos,r.nanos)}function BE(i,e){const n=i.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=xo(n[o],r[o]);if(c)return c}return Ve(n.length,r.length)}function No(i){return ap(i)}function ap(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=pr(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return gr(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return _e.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=ap(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const h of r)c?c=!1:o+=",",o+=`${h}:${ap(n.fields[h])}`;return o+"}"})(i.mapValue):be(61005,{value:i})}function Ah(i){switch(yr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=uf(i);return e?16+Ah(e):16;case 5:return 2*i.stringValue.length;case 6:return gr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+Ah(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return wr(r.fields,((c,h)=>{o+=c.length+Ah(h)})),o})(i.mapValue);default:throw be(13486,{value:i})}}function zE(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function op(i){return!!i&&"integerValue"in i}function Yp(i){return!!i&&"arrayValue"in i}function qE(i){return!!i&&"nullValue"in i}function HE(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Sh(i){return!!i&&"mapValue"in i}function wN(i){return(i?.mapValue?.fields||{})[b0]?.stringValue===A0}function ac(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return wr(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ac(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ac(i.arrayValue.values[n]);return e}return{...i}}function bN(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===TN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Sh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ac(n)}setAll(e){let n=Jt.emptyPath(),r={},o=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=p.popLast()}h?r[p.lastSegment()]=ac(h):o.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Sh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Sh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){wr(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new Tn(ac(this.value))}}function S0(i){const e=[];return wr(i.fields,((n,r)=>{const o=new Jt([n]);if(Sh(r)){const c=S0(r.mapValue).fields;if(c.length===0)e.push(o);else for(const h of c)e.push(o.child(h))}else e.push(o)})),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n,r,o,c,h,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=h,this.documentState=p}static newInvalidDocument(e){return new ln(e,0,Re.min(),Re.min(),Re.min(),Tn.empty(),0)}static newFoundDocument(e,n,r,o){return new ln(e,1,n,Re.min(),r,o,0)}static newNoDocument(e,n){return new ln(e,2,n,Re.min(),Re.min(),Tn.empty(),0)}static newUnknownDocument(e,n){return new ln(e,3,n,Re.min(),Re.min(),Tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.position=e,this.inclusive=n}}function FE(i,e,n){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],h=i.position[o];if(c.field.isKeyField()?r=_e.comparator(_e.fromName(h.referenceValue),n.key):r=xo(h,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function GE(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Pi(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n="asc"){this.field=e,this.dir=n}}function AN(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{}class Dt extends R0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new RN(e,n,r):n==="array-contains"?new xN(e,r):n==="in"?new NN(e,r):n==="not-in"?new DN(e,r):n==="array-contains-any"?new ON(e,r):new Dt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CN(e,r):new IN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(xo(n,this.value)):n!==null&&yr(this.value)===yr(n)&&this.matchesComparison(xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends R0{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new oi(e,n)}matches(e){return C0(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function C0(i){return i.op==="and"}function I0(i){return SN(i)&&C0(i)}function SN(i){for(const e of i.filters)if(e instanceof oi)return!1;return!0}function lp(i){if(i instanceof Dt)return i.field.canonicalString()+i.op.toString()+No(i.value);if(I0(i))return i.filters.map((e=>lp(e))).join(",");{const e=i.filters.map((n=>lp(n))).join(",");return`${i.op}(${e})`}}function x0(i,e){return i instanceof Dt?(function(r,o){return o instanceof Dt&&r.op===o.op&&r.field.isEqual(o.field)&&Pi(r.value,o.value)})(i,e):i instanceof oi?(function(r,o){return o instanceof oi&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,h,p)=>c&&x0(h,o.filters[p])),!0):!1})(i,e):void be(19439)}function N0(i){return i instanceof Dt?(function(n){return`${n.field.canonicalString()} ${n.op} ${No(n.value)}`})(i):i instanceof oi?(function(n){return n.op.toString()+" {"+n.getFilters().map(N0).join(" ,")+"}"})(i):"Filter"}class RN extends Dt{constructor(e,n,r){super(e,n,r),this.key=_e.fromName(r.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class CN extends Dt{constructor(e,n){super(e,"in",n),this.keys=D0("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class IN extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=D0("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function D0(i,e){return(e.arrayValue?.values||[]).map((n=>_e.fromName(n.referenceValue)))}class xN extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yp(n)&&yc(n.arrayValue,this.value)}}class NN extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yc(this.value.arrayValue,n)}}class DN extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yc(this.value.arrayValue,n)}}class ON extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>yc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n=null,r=[],o=[],c=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=h,this.endAt=p,this.Te=null}}function YE(i,e=null,n=[],r=[],o=null,c=null,h=null){return new MN(i,e,n,r,o,c,h)}function $p(i){const e=Ce(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>lp(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),cf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>No(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>No(r))).join(",")),e.Te=n}return e.Te}function Kp(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!AN(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!x0(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!GE(i.startAt,e.startAt)&&GE(i.endAt,e.endAt)}function cp(i){return _e.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n=null,r=[],o=[],c=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jN(i,e,n,r,o,c,h,p){return new Oc(i,e,n,r,o,c,h,p)}function Qp(i){return new Oc(i)}function $E(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function O0(i){return i.collectionGroup!==null}function oc(i){const e=Ce(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Ut(Jt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Hh(c,r))})),n.has(Jt.keyField().canonicalString())||e.Ie.push(new Hh(Jt.keyField(),r))}return e.Ie}function Di(i){const e=Ce(i);return e.Ee||(e.Ee=PN(e,oc(i))),e.Ee}function PN(i,e){if(i.limitType==="F")return YE(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Hh(o.field,c)}));const n=i.endAt?new qh(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new qh(i.startAt.position,i.startAt.inclusive):null;return YE(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function up(i,e){const n=i.filters.concat([e]);return new Oc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function hp(i,e,n){return new Oc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function hf(i,e){return Kp(Di(i),Di(e))&&i.limitType===e.limitType}function M0(i){return`${$p(Di(i))}|lt:${i.limitType}`}function po(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>N0(o))).join(", ")}]`),cf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>No(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>No(o))).join(",")),`Target(${r})`})(Di(i))}; limitType=${i.limitType})`}function ff(i,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):_e.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,o){for(const c of oc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(h,p,g){const y=FE(h,p,g);return h.inclusive?y<=0:y<0})(r.startAt,oc(r),o)||r.endAt&&!(function(h,p,g){const y=FE(h,p,g);return h.inclusive?y>=0:y>0})(r.endAt,oc(r),o))})(i,e)}function kN(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function j0(i){return(e,n)=>{let r=!1;for(const o of oc(i)){const c=VN(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function VN(i,e,n){const r=i.field.isKeyField()?_e.comparator(e.key,n.key):(function(c,h,p){const g=h.data.field(c),y=p.data.field(c);return g!==null&&y!==null?xo(g,y):be(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return be(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){wr(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return y0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new gt(_e.comparator);function As(){return LN}const P0=new gt(_e.comparator);function tc(...i){let e=P0;for(const n of i)e=e.insert(n.key,n);return e}function k0(i){let e=P0;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function aa(){return lc()}function V0(){return lc()}function lc(){return new _a((i=>i.toString()),((i,e)=>i.isEqual(e)))}const UN=new gt(_e.comparator),BN=new Ut(_e.comparator);function Le(...i){let e=BN;for(const n of i)e=e.add(n);return e}const zN=new Ut(Ve);function qN(){return zN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function L0(i){return{integerValue:""+i}}function HN(i,e){return gN(e)?L0(e):Xp(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(){this._=void 0}}function FN(i,e,n){return i instanceof Fh?(function(o,c){const h={fields:{[E0]:{stringValue:v0},[w0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Gp(c)&&(c=uf(c)),c&&(h.fields[T0]=c),{mapValue:h}})(n,e):i instanceof _c?B0(i,e):i instanceof vc?z0(i,e):(function(o,c){const h=U0(o,c),p=KE(h)+KE(o.Ae);return op(h)&&op(o.Ae)?L0(p):Xp(o.serializer,p)})(i,e)}function GN(i,e,n){return i instanceof _c?B0(i,e):i instanceof vc?z0(i,e):n}function U0(i,e){return i instanceof Gh?(function(r){return op(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class Fh extends df{}class _c extends df{constructor(e){super(),this.elements=e}}function B0(i,e){const n=q0(e);for(const r of i.elements)n.some((o=>Pi(o,r)))||n.push(r);return{arrayValue:{values:n}}}class vc extends df{constructor(e){super(),this.elements=e}}function z0(i,e){let n=q0(e);for(const r of i.elements)n=n.filter((o=>!Pi(o,r)));return{arrayValue:{values:n}}}class Gh extends df{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function KE(i){return bt(i.integerValue||i.doubleValue)}function q0(i){return Yp(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function YN(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof _c&&o instanceof _c||r instanceof vc&&o instanceof vc?Io(r.elements,o.elements,Pi):r instanceof Gh&&o instanceof Gh?Pi(r.Ae,o.Ae):r instanceof Fh&&o instanceof Fh})(i.transform,e.transform)}class $N{constructor(e,n){this.version=e,this.transformResults=n}}class Mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Mn}static exists(e){return new Mn(void 0,e)}static updateTime(e){return new Mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class mf{}function H0(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new pf(i.key,Mn.none()):new Mc(i.key,i.data,Mn.none());{const n=i.data,r=Tn.empty();let o=new Ut(Jt.comparator);for(let c of e.fields)if(!o.has(c)){let h=n.field(c);h===null&&c.length>1&&(c=c.popLast(),h=n.field(c)),h===null?r.delete(c):r.set(c,h),o=o.add(c)}return new br(i.key,r,new On(o.toArray()),Mn.none())}}function KN(i,e,n){i instanceof Mc?(function(o,c,h){const p=o.value.clone(),g=XE(o.fieldTransforms,c,h.transformResults);p.setAll(g),c.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(i,e,n):i instanceof br?(function(o,c,h){if(!Rh(o.precondition,c))return void c.convertToUnknownDocument(h.version);const p=XE(o.fieldTransforms,c,h.transformResults),g=c.data;g.setAll(F0(o)),g.setAll(p),c.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(i,e,n):(function(o,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function cc(i,e,n,r){return i instanceof Mc?(function(c,h,p,g){if(!Rh(c.precondition,h))return p;const y=c.value.clone(),v=WE(c.fieldTransforms,g,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(i,e,n,r):i instanceof br?(function(c,h,p,g){if(!Rh(c.precondition,h))return p;const y=WE(c.fieldTransforms,g,h),v=h.data;return v.setAll(F0(c)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(i,e,n,r):(function(c,h,p){return Rh(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(i,e,n)}function QN(i,e){let n=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=U0(r.transform,o||null);c!=null&&(n===null&&(n=Tn.empty()),n.set(r.field,c))}return n||null}function QE(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Io(r,o,((c,h)=>YN(c,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Mc extends mf{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class br extends mf{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function F0(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function XE(i,e,n){const r=new Map;Xe(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let o=0;o<n.length;o++){const c=i[o],h=c.transform,p=e.data.field(c.field);r.set(c.field,GN(h,p,n[o]))}return r}function WE(i,e,n){const r=new Map;for(const o of i){const c=o.transform,h=n.data.field(o.field);r.set(o.field,FN(c,h,e))}return r}class pf extends mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XN extends mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&KN(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=V0();return this.mutations.forEach((o=>{const c=e.get(o.key),h=c.overlayedDocument;let p=this.applyToLocalView(h,c.mutatedFields);p=n.has(o.key)?null:p;const g=H0(h,p);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Re.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,((n,r)=>QE(n,r)))&&Io(this.baseMutations,e.baseMutations,((n,r)=>QE(n,r)))}}class Wp{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return UN})();const c=e.mutations;for(let h=0;h<c.length;h++)o=o.insert(c[h].key,r[h].version);return new Wp(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Ge;function eD(i){switch(i){case Z.OK:return be(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return be(15467,{code:i})}}function G0(i){if(i===void 0)return ws("GRPC error has no .code"),Z.UNKNOWN;switch(i){case Nt.OK:return Z.OK;case Nt.CANCELLED:return Z.CANCELLED;case Nt.UNKNOWN:return Z.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return Z.INTERNAL;case Nt.UNAVAILABLE:return Z.UNAVAILABLE;case Nt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Nt.NOT_FOUND:return Z.NOT_FOUND;case Nt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Nt.ABORTED:return Z.ABORTED;case Nt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Nt.DATA_LOSS:return Z.DATA_LOSS;default:return be(39323,{code:i})}}(Ge=Nt||(Nt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=new ur([4294967295,4294967295],0);function ZE(i){const e=tD().encode(i),n=new a0;return n.update(e),new Uint8Array(n.digest())}function JE(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ur([n,r],0),new ur([o,c],0)]}class Zp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nc(`Invalid padding: ${n}`);if(r<0)throw new nc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new nc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ur.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(ur.fromNumber(r)));return o.compare(nD)===1&&(o=new ur([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ZE(e),[r,o]=JE(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);if(!this.we(h))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new Zp(c,o,n);return r.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=ZE(e),[r,o]=JE(n);for(let c=0;c<this.hashCount;c++){const h=this.ye(r,o,c);this.Se(h)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,jc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gf(Re.min(),o,new gt(Ve),As(),Le())}}class jc{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new jc(r,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class Y0{constructor(e,n){this.targetId=e,this.Ce=n}}class $0{constructor(e,n,r=en.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class eT{constructor(){this.ve=0,this.Fe=tT(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),n=Le(),r=Le();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:be(38017,{changeType:c})}})),new jc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=tT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iD{constructor(e){this.Ge=e,this.ze=new Map,this.je=As(),this.Je=fh(),this.He=fh(),this.Ye=new gt(Ve)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(cp(c))if(r===0){const h=new _e(c.path);this.et(n,h,ln.newNoDocument(h,Re.min()))}else Xe(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let h,p;try{h=gr(r).toUint8Array()}catch(g){if(g instanceof _0)return Co("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Zp(h,o,c)}catch(g){return Co(g instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,h)=>{const p=this.ot(h);if(p){if(c.current&&cp(p.target)){const g=new _e(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,ln.newNoDocument(g,e))}c.Be&&(n.set(h,c.ke()),c.qe())}}));let r=Le();this.He.forEach(((c,h)=>{let p=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,h)=>h.setReadTime(e)));const o=new gf(e,n,this.Ye,this.je,r);return this.je=As(),this.Je=fh(),this.He=fh(),this.Ye=new gt(Ve),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new eT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ut(Ve),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ut(Ve),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eT),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function fh(){return new gt(_e.comparator)}function tT(){return new gt(_e.comparator)}const sD={asc:"ASCENDING",desc:"DESCENDING"},rD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aD={and:"AND",or:"OR"};class oD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fp(i,e){return i.useProto3Json||cf(e)?e:{value:e}}function Yh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K0(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function lD(i,e){return Yh(i,e.toTimestamp())}function Oi(i){return Xe(!!i,49232),Re.fromTimestamp((function(n){const r=pr(n);return new ct(r.seconds,r.nanos)})(i))}function Jp(i,e){return dp(i,e).canonicalString()}function dp(i,e){const n=(function(o){return new ot(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function Q0(i){const e=ot.fromString(i);return Xe(eb(e),10190,{key:e.toString()}),e}function mp(i,e){return Jp(i.databaseId,e.path)}function Um(i,e){const n=Q0(e);if(n.get(1)!==i.databaseId.projectId)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new _e(W0(n))}function X0(i,e){return Jp(i.databaseId,e)}function cD(i){const e=Q0(i);return e.length===4?ot.emptyPath():W0(e)}function pp(i){return new ot(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function W0(i){return Xe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function nT(i,e,n){return{name:mp(i,e),fields:n.value.mapValue.fields}}function uD(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:be(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,v){return y.useProto3Json?(Xe(v===void 0||typeof v=="string",58123),en.fromBase64String(v||"")):(Xe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),en.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(y){const v=y.code===void 0?Z.UNKNOWN:G0(y.code);return new le(v,y.message||"")})(h);n=new $0(r,o,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Um(i,r.document.name),c=Oi(r.document.updateTime),h=r.document.createTime?Oi(r.document.createTime):Re.min(),p=new Tn({mapValue:{fields:r.document.fields}}),g=ln.newFoundDocument(o,c,h,p),y=r.targetIds||[],v=r.removedTargetIds||[];n=new Ch(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Um(i,r.document),c=r.readTime?Oi(r.readTime):Re.min(),h=ln.newNoDocument(o,c),p=r.removedTargetIds||[];n=new Ch([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Um(i,r.document),c=r.removedTargetIds||[];n=new Ch([],c,o,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,h=new JN(o,c),p=r.targetId;n=new Y0(p,h)}}return n}function hD(i,e){let n;if(e instanceof Mc)n={update:nT(i,e.key,e.value)};else if(e instanceof pf)n={delete:mp(i,e.key)};else if(e instanceof br)n={update:nT(i,e.key,e.data),updateMask:ED(e.fieldMask)};else{if(!(e instanceof XN))return be(16599,{Vt:e.type});n={verify:mp(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,h){const p=h.transform;if(p instanceof Fh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof _c)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof vc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Gh)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw be(20930,{transform:h.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:lD(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:be(27497)})(i,e.precondition)),n}function fD(i,e){return i&&i.length>0?(Xe(e!==void 0,14353),i.map((n=>(function(o,c){let h=o.updateTime?Oi(o.updateTime):Oi(c);return h.isEqual(Re.min())&&(h=Oi(c)),new $N(h,o.transformResults||[])})(n,e)))):[]}function dD(i,e){return{documents:[X0(i,e.path)]}}function mD(i,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=X0(i,o);const c=(function(y){if(y.length!==0)return J0(oi.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const h=(function(y){if(y.length!==0)return y.map((v=>(function(A){return{field:go(A.field),direction:yD(A.dir)}})(v)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=fp(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function pD(i){let e=cD(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Xe(r===1,65062);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let c=[];n.where&&(c=(function(w){const A=Z0(w);return A instanceof oi&&I0(A)?A.getFilters():[A]})(n.where));let h=[];n.orderBy&&(h=(function(w){return w.map((A=>(function(D){return new Hh(yo(D.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(A)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let A;return A=typeof w=="object"?w.value:w,cf(A)?null:A})(n.limit));let g=null;n.startAt&&(g=(function(w){const A=!!w.before,C=w.values||[];return new qh(C,A)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const A=!w.before,C=w.values||[];return new qh(C,A)})(n.endAt)),jN(e,o,h,c,p,"F",g,y)}function gD(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Z0(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=yo(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=yo(n.unaryFilter.field);return Dt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=yo(n.unaryFilter.field);return Dt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=yo(n.unaryFilter.field);return Dt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Dt.create(yo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return oi.create(n.compositeFilter.filters.map((r=>Z0(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(n.compositeFilter.op))})(i):be(30097,{filter:i})}function yD(i){return sD[i]}function _D(i){return rD[i]}function vD(i){return aD[i]}function go(i){return{fieldPath:i.canonicalString()}}function yo(i){return Jt.fromServerFormat(i.fieldPath)}function J0(i){return i instanceof Dt?(function(n){if(n.op==="=="){if(HE(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NAN"}};if(qE(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(HE(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NAN"}};if(qE(n.value))return{unaryFilter:{field:go(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(n.field),op:_D(n.op),value:n.value}}})(i):i instanceof oi?(function(n){const r=n.getFilters().map((o=>J0(o)));return r.length===1?r[0]:{compositeFilter:{op:vD(n.op),filters:r}}})(i):be(54877,{filter:i})}function ED(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function eb(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n,r,o,c=Re.min(),h=Re.min(),p=en.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.yt=e}}function wD(i){const e=pD({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?hp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(){this.Cn=new AD}addToCollectionParentIndex(e,n){return this.Cn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(mr.min())}updateCollectionGroup(e,n,r){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class AD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Ut(ot.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Ut(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tb=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(tb,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Do(0)}static cr(){return new Do(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="LruGarbageCollector",SD=1048576;function rT([i,e],[n,r]){const o=Ve(i,n);return o===0?Ve(e,r):o}class RD{constructor(e){this.Ir=e,this.buffer=new Ut(rT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();rT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class CD{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(sT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Lo(n)?he(sT,"Ignoring IndexedDB error during garbage collection: ",n):await Vo(n)}await this.Vr(3e5)}))}}class ID{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return te.resolve(lf.ce);const r=new RD(n);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(iT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iT):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,c,h,p,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(r=w,p=Date.now(),this.removeTargets(e,r,n)))).next((w=>(c=w,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(y=Date.now(),mo()<=ke.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:w}))))}}function xD(i,e){return new ID(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this.changes=new _a((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?te.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&cc(r.mutation,o,On.empty(),ct.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Le()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Le()){const o=aa();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let h=tc();return c.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const r=aa();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Le())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,r,o){let c=As();const h=lc(),p=(function(){return lc()})();return n.forEach(((g,y)=>{const v=r.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof br)?c=c.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),cc(v.mutation,y,v.mutation.getFieldMask(),ct.now())):h.set(y.key,On.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,v)=>h.set(y,v))),n.forEach(((y,v)=>p.set(y,new DD(v,h.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=lc();let o=new gt(((h,p)=>h-p)),c=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let v=r.get(g)||On.empty();v=p.applyToLocalView(y,v),r.set(g,v);const w=(o.get(p.batchId)||Le()).add(g);o=o.insert(p.batchId,w)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,v=g.value,w=V0();v.forEach((A=>{if(!c.has(A)){const C=H0(n.get(A),r.get(A));C!==null&&w.set(A,C),c=c.add(A)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,w))}return te.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return(function(h){return _e.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):O0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const h=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):te.resolve(aa());let p=mc,g=c;return h.next((y=>te.forEach(y,((v,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),c.get(v)?te.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{g=g.insert(v,A)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Le()))).next((v=>({batchId:p,changes:k0(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next((r=>{let o=tc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let h=tc();return this.indexManager.getCollectionParents(e,c).next((p=>te.forEach(p,(g=>{const y=(function(w,A){return new Oc(A,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((v=>{v.forEach(((w,A)=>{h=h.insert(w,A)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((h=>{c.forEach(((g,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,ln.newInvalidDocument(v)))}));let p=tc();return h.forEach(((g,y)=>{const v=c.get(g);v!==void 0&&cc(v.mutation,y,On.empty(),ct.now()),ff(n,y)&&(p=p.insert(g,y))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return te.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Oi(o.createTime)}})(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:wD(o.bundledQuery),readTime:Oi(o.readTime)}})(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.overlays=new gt(_e.comparator),this.qr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const r=aa();return te.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.St(e,n,c)})),te.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),te.resolve()}getOverlaysForCollection(e,n,r){const o=aa(),c=n.length+1,h=new _e(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return te.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new gt(((y,v)=>y-v));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let v=c.get(y.largestBatchId);v===null&&(v=aa(),c=c.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const p=aa(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>p.set(y,v))),!(p.size()>=o)););return te.resolve(p)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new ZN(n,r));let c=this.qr.get(n);c===void 0&&(c=Le(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(){this.Qr=new Ut(Gt.$r),this.Ur=new Ut(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Gt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Gt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new _e(new ot([])),r=new Gt(n,e),o=new Gt(n,e+1),c=[];return this.Ur.forEachInRange([r,o],(h=>{this.Gr(h),c.push(h.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new _e(new ot([])),r=new Gt(n,e),o=new Gt(n,e+1);let c=Le();return this.Ur.forEachInRange([r,o],(h=>{c=c.add(h.key)})),c}containsKey(e){const n=new Gt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Gt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return _e.comparator(e.key,n.key)||Ve(e.Yr,n.Yr)}static Kr(e,n){return Ve(e.Yr,n.Yr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(Gt.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new WN(c,n,r,o);this.mutationQueue.push(h);for(const p of o)this.Zr=this.Zr.add(new Gt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return te.resolve(h)}lookupMutationBatch(e,n){return te.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),c=o<0?0:o;return te.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Fp:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Gt(n,0),o=new Gt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,o],(h=>{const p=this.Xr(h.Yr);c.push(p)})),te.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(Ve);return n.forEach((o=>{const c=new Gt(o,0),h=new Gt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,h],(p=>{r=r.add(p.Yr)}))})),te.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;_e.isDocumentKey(c)||(c=c.child(""));const h=new Gt(new _e(c),0);let p=new Ut(Ve);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Yr)),!0)}),h),te.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return te.forEach(n.mutations,(o=>{const c=new Gt(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Gt(n,0),o=this.Zr.firstAfterOrEqual(r);return te.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.ri=e,this.docs=(function(){return new gt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return te.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(n))}getEntries(e,n){let r=As();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():ln.newInvalidDocument(o))})),te.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=As();const h=n.path,p=new _e(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||fN(hN(v),r)<=0||(o.has(v.key)||ff(n,v))&&(c=c.insert(v.key,v.mutableCopy()))}return te.resolve(c)}getAllFromCollectionGroup(e,n,r,o){be(9500)}ii(e,n){return te.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new LD(this)}getSize(e){return te.resolve(this.size)}}class LD extends ND{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),te.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.persistence=e,this.si=new _a((n=>$p(n)),Kp),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new eg,this.targetCount=0,this.ai=Do.ur()}forEachTarget(e,n){return this.si.forEach(((r,o)=>n(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),te.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Do(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.Pr(n),te.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.si.forEach(((h,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(h),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),te.waitFor(c).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return te.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),te.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((h=>{c.push(o.markPotentiallyOrphaned(e,h))})),te.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),te.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return te.resolve(r)}containsKey(e,n){return te.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,n){this.ui={},this.overlays={},this.ci=new lf(0),this.li=!1,this.li=!0,this.hi=new PD,this.referenceDelegate=e(this),this.Pi=new UD(this),this.indexManager=new bD,this.remoteDocumentCache=(function(o){return new VD(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new TD(n),this.Ii=new MD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new kD(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const o=new BD(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return te.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class BD extends mN{constructor(e){super(),this.currentSequenceNumber=e}}class tg{constructor(e){this.persistence=e,this.Ri=new eg,this.Vi=null}static mi(e){return new tg(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),te.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),te.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(r=>{const o=_e.fromPath(r);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return te.or([()=>te.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class $h{constructor(e,n){this.persistence=e,this.pi=new _a((r=>yN(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=xD(this,n)}static mi(e,n){return new $h(e,n)}Ei(){}di(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return te.forEach(this.pi,((r,o)=>this.br(e,r,o).next((c=>c?te.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((p=>{p||(r++,c.removeEntry(h,Re.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ah(e.data.value)),n}br(e,n,r){return te.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return te.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=Le(),o=Le();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new ng(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return _C()?8:pN(un())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.ys(e,n).next((h=>{c.result=h})).next((()=>{if(!c.result)return this.ws(e,n,o,r).next((h=>{c.result=h}))})).next((()=>{if(c.result)return;const h=new zD;return this.Ss(e,n,h).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,h,p.size)}))})).next((()=>c.result))}bs(e,n,r,o){return r.documentReadCount<this.fs?(mo()<=ke.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(mo()<=ke.DEBUG&&he("QueryEngine","Query:",po(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(mo()<=ke.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Di(n))):te.resolve())}ys(e,n){if($E(n))return te.resolve(null);let r=Di(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=hp(n,null,"F"),r=Di(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const h=Le(...c);return this.ps.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const y=this.Ds(n,p);return this.Cs(n,y,h,g.readTime)?this.ys(e,hp(n,null,"F")):this.vs(e,y,n,g)}))))})))))}ws(e,n,r,o){return $E(n)||o.isEqual(Re.min())?te.resolve(null):this.ps.getDocuments(e,r).next((c=>{const h=this.Ds(n,c);return this.Cs(n,h,r,o)?te.resolve(null):(mo()<=ke.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),po(n)),this.vs(e,h,n,uN(o,mc)).next((p=>p)))}))}Ds(e,n){let r=new Ut(j0(e));return n.forEach(((o,c)=>{ff(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,r){return mo()<=ke.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",po(n)),this.ps.getDocumentsMatchingQuery(e,n,mr.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((h=>{c=c.insert(h.key,h)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="LocalStore",HD=3e8;class FD{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new gt(Ve),this.xs=new _a((c=>$p(c)),Kp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function GD(i,e,n,r){return new FD(i,e,n,r)}async function ib(i,e){const n=Ce(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const h=[],p=[];let g=Le();for(const y of o){h.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of c){p.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return n.localDocuments.getDocuments(r,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:p})))}))}))}function YD(i,e){const n=Ce(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,v){const w=y.batch,A=w.keys();let C=te.resolve();return A.forEach((D=>{C=C.next((()=>v.getEntry(g,D))).next((H=>{const L=y.docVersions.get(D);Xe(L!==null,48541),H.version.compareTo(L)<0&&(w.applyToRemoteDocument(H,y),H.isValidDocument()&&(H.setReadTime(y.commitVersion),v.addEntry(H)))}))})),C.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=Le();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function sb(i){const e=Ce(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function $D(i,e){const n=Ce(i),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const p=[];e.targetChanges.forEach(((v,w)=>{const A=o.get(w);if(!A)return;p.push(n.Pi.removeMatchingKeys(c,v.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(c,v.addedDocuments,w))));let C=A.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(en.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,r)),o=o.insert(w,C),(function(H,L,J){return H.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=HD?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(A,C,v)&&p.push(n.Pi.updateTargetData(c,C))}));let g=As(),y=Le();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,v))})),p.push(KD(c,h,e.documentUpdates).next((v=>{g=v.ks,y=v.qs}))),!r.isEqual(Re.min())){const v=n.Pi.getLastRemoteSnapshotVersion(c).next((w=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(v)}return te.waitFor(p).next((()=>h.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.Ms=o,c)))}function KD(i,e,n){let r=Le(),o=Le();return n.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let h=As();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):he(ig,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function QD(i,e){const n=Ce(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Fp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function XD(i,e){const n=Ce(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,e).next((c=>c?(o=c,te.resolve(o)):n.Pi.allocateTargetId(r).next((h=>(o=new or(e,h,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function gp(i,e,n){const r=Ce(i),o=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Lo(h))throw h;he(ig,`Failed to update sequence numbers for target ${e}: ${h}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function aT(i,e,n){const r=Ce(i);let o=Re.min(),c=Le();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,v){const w=Ce(g),A=w.xs.get(v);return A!==void 0?te.resolve(w.Ms.get(A)):w.Pi.getTargetData(y,v)})(r,h,Di(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,p.targetId).next((g=>{c=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,e,n?o:Re.min(),n?c:Le()))).next((p=>(WD(r,kN(e),p),{documents:p,Qs:c})))))}function WD(i,e,n){let r=i.Os.get(e)||Re.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Os.set(e,r)}class oT{constructor(){this.activeTargetIds=qN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZD{constructor(){this.Mo=new oT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new oT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="ConnectivityMonitor";class cT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(lT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(lT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dh=null;function yp(){return dh===null?dh=(function(){return 268435456+Math.round(2147483648*Math.random())})():dh++,"0x"+dh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="RestConnection",eO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Bh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,c){const h=yp(),p=this.zo(e,n.toUriEncodedString());he(Bm,`Sending RPC '${e}' ${h}:`,p,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:y}=new URL(p),v=pa(y);return this.Jo(e,p,g,r,v).then((w=>(he(Bm,`Received RPC '${e}' ${h}: `,w),w)),(w=>{throw Co(Bm,`RPC '${e}' ${h} failed with error: `,w,"url: ",p,"request:",r),w}))}Ho(e,n,r,o,c,h){return this.Go(e,n,r,o,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ko})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const r=eO[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class iO extends tO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,c){const h=yp();return new Promise(((p,g)=>{const y=new o0;y.setWithCredentials(!0),y.listenOnce(l0.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case bh.NO_ERROR:const w=y.getResponseJson();he(an,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),p(w);break;case bh.TIMEOUT:he(an,`RPC '${e}' ${h} timed out`),g(new le(Z.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const A=y.getStatus();if(he(an,`RPC '${e}' ${h} failed with status:`,A,"response text:",y.getResponseText()),A>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const D=C?.error;if(D&&D.status&&D.message){const H=(function(J){const X=J.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(X)>=0?X:Z.UNKNOWN})(D.status);g(new le(H,D.message))}else g(new le(Z.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new le(Z.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(an,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);he(an,`RPC '${e}' ${h} sending request:`,o),y.send(n,"POST",v,r,15)}))}T_(e,n,r){const o=yp(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=h0(),p=u0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const v=c.join("");he(an,`Creating RPC '${e}' stream ${o}: ${v}`,g);const w=h.createWebChannel(v,g);this.I_(w);let A=!1,C=!1;const D=new nO({Yo:L=>{C?he(an,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(A||(he(an,`Opening RPC '${e}' stream ${o} transport.`),w.open(),A=!0),he(an,`RPC '${e}' stream ${o} sending:`,L),w.send(L))},Zo:()=>w.close()}),H=(L,J,X)=>{L.listen(J,(ie=>{try{X(ie)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return H(w,ec.EventType.OPEN,(()=>{C||(he(an,`RPC '${e}' stream ${o} transport opened.`),D.o_())})),H(w,ec.EventType.CLOSE,(()=>{C||(C=!0,he(an,`RPC '${e}' stream ${o} transport closed`),D.a_(),this.E_(w))})),H(w,ec.EventType.ERROR,(L=>{C||(C=!0,Co(an,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),D.a_(new le(Z.UNAVAILABLE,"The operation could not be completed")))})),H(w,ec.EventType.MESSAGE,(L=>{if(!C){const J=L.data[0];Xe(!!J,16349);const X=J,ie=X?.error||X[0]?.error;if(ie){he(an,`RPC '${e}' stream ${o} received error:`,ie);const ue=ie.status;let ce=(function(R){const I=Nt[R];if(I!==void 0)return G0(I)})(ue),fe=ie.message;ce===void 0&&(ce=Z.INTERNAL,fe="Unknown error status: "+ue+" with message "+ie.message),C=!0,D.a_(new le(ce,fe)),w.close()}else he(an,`RPC '${e}' stream ${o} received:`,J),D.u_(J)}})),H(p,c0.STAT_EVENT,(L=>{L.stat===sp.PROXY?he(an,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===sp.NOPROXY&&he(an,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{D.__()}),0),D}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function zm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(i){return new oD(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="PersistentStream";class ab{constructor(e,n,r,o,c,h,p,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new rb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(ws(n.toString()),ws("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new le(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(uT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(he(uT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sO extends ab{constructor(e,n,r,o,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=uD(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Re.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?Re.min():h.readTime?Oi(h.readTime):Re.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=pp(this.serializer),n.addTarget=(function(c,h){let p;const g=h.target;if(p=cp(g)?{documents:dD(c,g)}:{query:mD(c,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=K0(c,h.resumeToken);const y=fp(c,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo(Re.min())>0){p.readTime=Yh(c,h.snapshotVersion.toTimestamp());const y=fp(c,h.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const r=gD(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=pp(this.serializer),n.removeTarget=e,this.q_(n)}}class rO extends ab{constructor(e,n,r,o,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,h),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=fD(e.writeResults,e.commitTime),r=Oi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=pp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>hD(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{}class oO extends aO{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Go(e,dp(n,r),o,c,h))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new le(Z.UNKNOWN,c.toString())}))}Ho(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Ho(e,dp(n,r),o,h,p,c))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new le(Z.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class lO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ws(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="RemoteStore";class cO{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{va(this)&&(he(da,"Restarting streams for network reachability change."),await(async function(g){const y=Ce(g);y.Ea.add(4),await Pc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await _f(y)})(this))}))})),this.Ra=new lO(r,o)}}async function _f(i){if(va(i))for(const e of i.da)await e(!0)}async function Pc(i){for(const e of i.da)await e(!1)}function ob(i,e){const n=Ce(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),og(n)?ag(n):Uo(n).O_()&&rg(n,e))}function sg(i,e){const n=Ce(i),r=Uo(n);n.Ia.delete(e),r.O_()&&lb(n,e),n.Ia.size===0&&(r.O_()?r.L_():va(n)&&n.Ra.set("Unknown"))}function rg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Uo(i).Y_(e)}function lb(i,e){i.Va.Ue(e),Uo(i).Z_(e)}function ag(i){i.Va=new iD({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Uo(i).start(),i.Ra.ua()}function og(i){return va(i)&&!Uo(i).x_()&&i.Ia.size>0}function va(i){return Ce(i).Ea.size===0}function cb(i){i.Va=void 0}async function uO(i){i.Ra.set("Online")}async function hO(i){i.Ia.forEach(((e,n)=>{rg(i,e)}))}async function fO(i,e){cb(i),og(i)?(i.Ra.ha(e),ag(i)):i.Ra.set("Unknown")}async function dO(i,e,n){if(i.Ra.set("Online"),e instanceof $0&&e.state===2&&e.cause)try{await(async function(o,c){const h=c.cause;for(const p of c.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.Va.removeTarget(p))})(i,e)}catch(r){he(da,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kh(i,r)}else if(e instanceof Ch?i.Va.Ze(e):e instanceof Y0?i.Va.st(e):i.Va.tt(e),!n.isEqual(Re.min()))try{const r=await sb(i.localStore);n.compareTo(r)>=0&&await(function(c,h){const p=c.Va.Tt(h);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=c.Ia.get(y);v&&c.Ia.set(y,v.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,y)=>{const v=c.Ia.get(g);if(!v)return;c.Ia.set(g,v.withResumeToken(en.EMPTY_BYTE_STRING,v.snapshotVersion)),lb(c,g);const w=new or(v.target,g,y,v.sequenceNumber);rg(c,w)})),c.remoteSyncer.applyRemoteEvent(p)})(i,n)}catch(r){he(da,"Failed to raise snapshot:",r),await Kh(i,r)}}async function Kh(i,e,n){if(!Lo(e))throw e;i.Ea.add(1),await Pc(i),i.Ra.set("Offline"),n||(n=()=>sb(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{he(da,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await _f(i)}))}function ub(i,e){return e().catch((n=>Kh(i,n,e)))}async function vf(i){const e=Ce(i),n=_r(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fp;for(;mO(e);)try{const o=await QD(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,pO(e,o)}catch(o){await Kh(e,o)}hb(e)&&fb(e)}function mO(i){return va(i)&&i.Ta.length<10}function pO(i,e){i.Ta.push(e);const n=_r(i);n.O_()&&n.X_&&n.ea(e.mutations)}function hb(i){return va(i)&&!_r(i).x_()&&i.Ta.length>0}function fb(i){_r(i).start()}async function gO(i){_r(i).ra()}async function yO(i){const e=_r(i);for(const n of i.Ta)e.ea(n.mutations)}async function _O(i,e,n){const r=i.Ta.shift(),o=Wp.from(r,e,n);await ub(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await vf(i)}async function vO(i,e){e&&_r(i).X_&&await(async function(r,o){if((function(h){return eD(h)&&h!==Z.ABORTED})(o.code)){const c=r.Ta.shift();_r(r).B_(),await ub(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await vf(r)}})(i,e),hb(i)&&fb(i)}async function hT(i,e){const n=Ce(i);n.asyncQueue.verifyOperationInProgress(),he(da,"RemoteStore received new credentials");const r=va(n);n.Ea.add(3),await Pc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await _f(n)}async function EO(i,e){const n=Ce(i);e?(n.Ea.delete(2),await _f(n)):e||(n.Ea.add(2),await Pc(n),n.Ra.set("Unknown"))}function Uo(i){return i.ma||(i.ma=(function(n,r,o){const c=Ce(n);return c.sa(),new sO(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:uO.bind(null,i),t_:hO.bind(null,i),r_:fO.bind(null,i),H_:dO.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),og(i)?ag(i):i.Ra.set("Unknown")):(await i.ma.stop(),cb(i))}))),i.ma}function _r(i){return i.fa||(i.fa=(function(n,r,o){const c=Ce(n);return c.sa(),new rO(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:gO.bind(null,i),r_:vO.bind(null,i),ta:yO.bind(null,i),na:_O.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await vf(i)):(await i.fa.stop(),i.Ta.length>0&&(he(da,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const h=Date.now()+r,p=new lg(e,n,h,o,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cg(i,e){if(ws("AsyncQueue",`${e}: ${i}`),Lo(i))return new le(Z.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{static emptySet(e){return new Ao(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||_e.comparator(n.key,r.key):(n,r)=>_e.comparator(n.key,r.key),this.keyedMap=tc(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ao)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ao;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(){this.ga=new gt(_e.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Oo{constructor(e,n,r,o,c,h,p,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,c){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new Oo(e,n,Ao.emptySet(n),h,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class wO{constructor(){this.queries=dT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Ce(n),c=o.queries;o.queries=dT(),c.forEach(((h,p)=>{for(const g of p.Sa)g.onError(r)}))})(this,new le(Z.ABORTED,"Firestore shutting down"))}}function dT(){return new _a((i=>M0(i)),hf)}async function db(i,e){const n=Ce(i);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(r=2):(c=new TO,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const p=cg(h,`Initialization of query '${po(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&ug(n)}async function mb(i,e){const n=Ce(i),r=e.query;let o=3;const c=n.queries.get(r);if(c){const h=c.Sa.indexOf(e);h>=0&&(c.Sa.splice(h,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bO(i,e){const n=Ce(i);let r=!1;for(const o of e){const c=o.query,h=n.queries.get(c);if(h){for(const p of h.Sa)p.Fa(o)&&(r=!0);h.wa=o}}r&&ug(n)}function AO(i,e,n){const r=Ce(i),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);r.queries.delete(e)}function ug(i){i.Ca.forEach((e=>{e.next()}))}var _p,mT;(mT=_p||(_p={})).Ma="default",mT.Cache="cache";class pb{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Oo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.key=e}}class yb{constructor(e){this.key=e}}class SO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=j0(e),this.tu=new Ao(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new fT,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,h=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,w)=>{const A=o.get(v),C=ff(this.query,w)?w:null,D=!!A&&this.mutatedKeys.has(A.key),H=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let L=!1;A&&C?A.data.isEqual(C.data)?D!==H&&(r.track({type:3,doc:C}),L=!0):this.su(A,C)||(r.track({type:2,doc:C}),L=!0,(g&&this.eu(C,g)>0||y&&this.eu(C,y)<0)&&(p=!0)):!A&&C?(r.track({type:0,doc:C}),L=!0):A&&!C&&(r.track({type:1,doc:A}),L=!0,(g||y)&&(p=!0)),L&&(C?(h=h.add(C),c=H?c.add(v):c.delete(v)):(h=h.delete(v),c=c.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),c=c.delete(v.key),r.track({type:1,doc:v})}return{tu:h,iu:r,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,w)=>(function(C,D){const H=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:L})}};return H(C)-H(D)})(v.type,w.type)||this.eu(v.doc,w.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new Oo(this.query,e.tu,c,h,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new fT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new yb(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new gb(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const hg="SyncEngine";class RO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class CO{constructor(e){this.key=e,this.hu=!1}}class IO{constructor(e,n,r,o,c,h){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new _a((p=>M0(p)),hf),this.Iu=new Map,this.Eu=new Set,this.du=new gt(_e.comparator),this.Au=new Map,this.Ru=new eg,this.Vu={},this.mu=new Map,this.fu=Do.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xO(i,e,n=!0){const r=bb(i);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await _b(r,e,n,!0),o}async function NO(i,e){const n=bb(i);await _b(n,e,!0,!1)}async function _b(i,e,n,r){const o=await XD(i.localStore,Di(e)),c=o.targetId,h=i.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await DO(i,e,c,h==="current",o.resumeToken)),i.isPrimaryClient&&n&&ob(i.remoteStore,o),p}async function DO(i,e,n,r,o){i.pu=(w,A,C)=>(async function(H,L,J,X){let ie=L.view.ru(J);ie.Cs&&(ie=await aT(H.localStore,L.query,!1).then((({documents:P})=>L.view.ru(P,ie))));const ue=X&&X.targetChanges.get(L.targetId),ce=X&&X.targetMismatches.get(L.targetId)!=null,fe=L.view.applyChanges(ie,H.isPrimaryClient,ue,ce);return gT(H,L.targetId,fe.au),fe.snapshot})(i,w,A,C);const c=await aT(i.localStore,e,!0),h=new SO(e,c.Qs),p=h.ru(c.documents),g=jc.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),y=h.applyChanges(p,i.isPrimaryClient,g);gT(i,n,y.au);const v=new RO(e,n,h);return i.Tu.set(e,v),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function OO(i,e,n){const r=Ce(i),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((h=>!hf(h,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await gp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&sg(r.remoteStore,o.targetId),vp(r,o.targetId)})).catch(Vo)):(vp(r,o.targetId),await gp(r.localStore,o.targetId,!0))}async function MO(i,e){const n=Ce(i),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),sg(n.remoteStore,r.targetId))}async function jO(i,e,n){const r=zO(i);try{const o=await(function(h,p){const g=Ce(h),y=ct.now(),v=p.reduce(((C,D)=>C.add(D.key)),Le());let w,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let D=As(),H=Le();return g.Ns.getEntries(C,v).next((L=>{D=L,D.forEach(((J,X)=>{X.isValidDocument()||(H=H.add(J))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,D))).next((L=>{w=L;const J=[];for(const X of p){const ie=QN(X,w.get(X.key).overlayedDocument);ie!=null&&J.push(new br(X.key,ie,S0(ie.value.mapValue),Mn.exists(!0)))}return g.mutationQueue.addMutationBatch(C,y,J,p)})).next((L=>{A=L;const J=L.applyToLocalDocumentSet(w,H);return g.documentOverlayCache.saveOverlays(C,L.batchId,J)}))})).then((()=>({batchId:A.batchId,changes:k0(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(h,p,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new gt(Ve)),y=y.insert(p,g),h.Vu[h.currentUser.toKey()]=y})(r,o.batchId,n),await kc(r,o.changes),await vf(r.remoteStore)}catch(o){const c=cg(o,"Failed to persist write");n.reject(c)}}async function vb(i,e){const n=Ce(i);try{const r=await $D(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const h=n.Au.get(c);h&&(Xe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Xe(h.hu,14607):o.removedDocuments.size>0&&(Xe(h.hu,42227),h.hu=!1))})),await kc(n,r,e)}catch(r){await Vo(r)}}function pT(i,e,n){const r=Ce(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const g=Ce(h);g.onlineState=p;let y=!1;g.queries.forEach(((v,w)=>{for(const A of w.Sa)A.va(p)&&(y=!0)})),y&&ug(g)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PO(i,e,n){const r=Ce(i);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let h=new gt(_e.comparator);h=h.insert(c,ln.newNoDocument(c,Re.min()));const p=Le().add(c),g=new gf(Re.min(),new Map,new gt(Ve),h,p);await vb(r,g),r.du=r.du.remove(c),r.Au.delete(e),fg(r)}else await gp(r.localStore,e,!1).then((()=>vp(r,e,n))).catch(Vo)}async function kO(i,e){const n=Ce(i),r=e.batch.batchId;try{const o=await YD(n.localStore,e);Tb(n,r,null),Eb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kc(n,o)}catch(o){await Vo(o)}}async function VO(i,e,n){const r=Ce(i);try{const o=await(function(h,p){const g=Ce(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,p).next((w=>(Xe(w!==null,37113),v=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(r.localStore,e);Tb(r,e,n),Eb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await kc(r,o)}catch(o){await Vo(o)}}function Eb(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function Tb(i,e,n){const r=Ce(i);let o=r.Vu[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function vp(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((r=>{i.Ru.containsKey(r)||wb(i,r)}))}function wb(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(sg(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),fg(i))}function gT(i,e,n){for(const r of n)r instanceof gb?(i.Ru.addReference(r.key,e),LO(i,r)):r instanceof yb?(he(hg,"Document no longer in limbo: "+r.key),i.Ru.removeReference(r.key,e),i.Ru.containsKey(r.key)||wb(i,r.key)):be(19791,{wu:r})}function LO(i,e){const n=e.key,r=n.path.canonicalString();i.du.get(n)||i.Eu.has(r)||(he(hg,"New document in limbo: "+n),i.Eu.add(r),fg(i))}function fg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new _e(ot.fromString(e)),r=i.fu.next();i.Au.set(r,new CO(n)),i.du=i.du.insert(n,r),ob(i.remoteStore,new or(Di(Qp(n.path)),r,"TargetPurposeLimboResolution",lf.ce))}}async function kc(i,e,n){const r=Ce(i),o=[],c=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{h.push(r.pu(g,e,n).then((y=>{if((y||n)&&r.isPrimaryClient){const v=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(y){o.push(y);const v=ng.As(g.targetId,y);c.push(v)}})))})),await Promise.all(h),r.Pu.H_(o),await(async function(g,y){const v=Ce(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>te.forEach(y,(A=>te.forEach(A.Es,(C=>v.persistence.referenceDelegate.addReference(w,A.targetId,C))).next((()=>te.forEach(A.ds,(C=>v.persistence.referenceDelegate.removeReference(w,A.targetId,C)))))))))}catch(w){if(!Lo(w))throw w;he(ig,"Failed to update sequence numbers: "+w)}for(const w of y){const A=w.targetId;if(!w.fromCache){const C=v.Ms.get(A),D=C.snapshotVersion,H=C.withLastLimboFreeSnapshotVersion(D);v.Ms=v.Ms.insert(A,H)}}})(r.localStore,c))}async function UO(i,e){const n=Ce(i);if(!n.currentUser.isEqual(e)){he(hg,"User change. New user:",e.toKey());const r=await ib(n.localStore,e);n.currentUser=e,(function(c,h){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new le(Z.CANCELLED,h))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await kc(n,r.Ls)}}function BO(i,e){const n=Ce(i),r=n.Au.get(e);if(r&&r.hu)return Le().add(r.key);{let o=Le();const c=n.Iu.get(e);if(!c)return o;for(const h of c){const p=n.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function bb(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=vb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PO.bind(null,e),e.Pu.H_=bO.bind(null,e.eventManager),e.Pu.yu=AO.bind(null,e.eventManager),e}function zO(i){const e=Ce(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VO.bind(null,e),e}class Qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return GD(this.persistence,new qD,e.initialUser,this.serializer)}Cu(e){return new nb(tg.mi,this.serializer)}Du(e){return new ZD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qh.provider={build:()=>new Qh};class qO extends Qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Xe(this.persistence.referenceDelegate instanceof $h,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new CD(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new nb((r=>$h.mi(r,n)),this.serializer)}}class Ep{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>pT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UO.bind(null,this.syncEngine),await EO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new wO})()}createDatastore(e){const n=yf(e.databaseInfo.databaseId),r=(function(c){return new iO(c)})(e.databaseInfo);return(function(c,h,p,g){return new oO(c,h,p,g)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,h,p){return new cO(r,o,c,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>pT(this.syncEngine,n,0)),(function(){return cT.v()?new cT:new JD})())}createSyncEngine(e,n){return(function(o,c,h,p,g,y,v){const w=new IO(o,c,h,p,g,y);return v&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Ce(n);he(da,"RemoteStore shutting down."),r.Ea.add(5),await Pc(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ep.provider={build:()=>new Ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ws("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="FirestoreClient";class HO{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=on.UNAUTHENTICATED,this.clientId=Hp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async h=>{he(vr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(he(vr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=cg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function qm(i,e){i.asyncQueue.verifyOperationInProgress(),he(vr,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await ib(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function yT(i,e){i.asyncQueue.verifyOperationInProgress();const n=await FO(i);he(vr,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>hT(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>hT(e.remoteStore,o))),i._onlineComponents=e}async function FO(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){he(vr,"Using user provided OfflineComponentProvider");try{await qm(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Co("Error using user provided cache. Falling back to memory cache: "+n),await qm(i,new Qh)}}else he(vr,"Using default OfflineComponentProvider"),await qm(i,new qO(void 0));return i._offlineComponents}async function Sb(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(he(vr,"Using user provided OnlineComponentProvider"),await yT(i,i._uninitializedComponentsProvider._online)):(he(vr,"Using default OnlineComponentProvider"),await yT(i,new Ep))),i._onlineComponents}function GO(i){return Sb(i).then((e=>e.syncEngine))}async function Rb(i){const e=await Sb(i),n=e.eventManager;return n.onListen=xO.bind(null,e.syncEngine),n.onUnlisten=OO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MO.bind(null,e.syncEngine),n}function YO(i,e,n={}){const r=new _s;return i.asyncQueue.enqueueAndForget((async()=>(function(c,h,p,g,y){const v=new Ab({next:A=>{v.Nu(),h.enqueueAndForget((()=>mb(c,w)));const C=A.docs.has(p);!C&&A.fromCache?y.reject(new le(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&A.fromCache&&g&&g.source==="server"?y.reject(new le(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),w=new pb(Qp(p.path),v,{includeMetadataChanges:!0,qa:!0});return db(c,w)})(await Rb(i),i.asyncQueue,e,n,r))),r.promise}function $O(i,e,n={}){const r=new _s;return i.asyncQueue.enqueueAndForget((async()=>(function(c,h,p,g,y){const v=new Ab({next:A=>{v.Nu(),h.enqueueAndForget((()=>mb(c,w))),A.fromCache&&g.source==="server"?y.reject(new le(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),w=new pb(p,v,{includeMetadataChanges:!0,qa:!0});return db(c,w)})(await Rb(i),i.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="firestore.googleapis.com",vT=!0;class ET{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ib,this.ssl=vT}else this.host=e.host,this.ssl=e.ssl??vT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SD)throw new le(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cb(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ef{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ET({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ET(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Jx;switch(r.type){case"firstParty":return new iN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=_T.get(n);r&&(he("ComponentProvider","Removing Datastore"),_T.delete(n),r.terminate())})(this),Promise.resolve()}}function KO(i,e,n,r={}){i=bs(i,Ef);const o=pa(e),c=i._getSettings(),h={...c,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${n}`;o&&(xp(`https://${p}`),Np("Firestore",!0)),c.host!==Ib&&c.host!==p&&Co("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:o,emulatorOptions:r};if(!la(g,h)&&(i._setSettings(g),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=on.MOCK_USER;else{y=Ew(r.mockUserToken,i._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new le(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new on(w)}i._authCredentials=new eN(new d0(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bo(this.firestore,e,this._query)}}class Mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Dc(n,Mt._jsonSchema))return new Mt(e,r||null,new _e(ot.fromString(n.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Ot("string",Mt._jsonSchemaVersion),referencePath:Ot("string")};class hr extends Bo{constructor(e,n,r){super(e,n,Qp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new _e(e))}withConverter(e){return new hr(this.firestore,e,this._path)}}function fs(i,e,...n){if(i=At(i),m0("collection","path",e),i instanceof Ef){const r=ot.fromString(e,...n);return ME(r),new hr(i,null,r)}{if(!(i instanceof Mt||i instanceof hr))throw new le(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ot.fromString(e,...n));return ME(r),new hr(i.firestore,null,r)}}function ds(i,e,...n){if(i=At(i),arguments.length===1&&(e=Hp.newId()),m0("doc","path",e),i instanceof Ef){const r=ot.fromString(e,...n);return OE(r),new Mt(i,null,new _e(r))}{if(!(i instanceof Mt||i instanceof hr))throw new le(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ot.fromString(e,...n));return OE(r),new Mt(i.firestore,i instanceof hr?i.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="AsyncQueue";class wT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rb(this,"async_queue_retry"),this._c=()=>{const r=zm();r&&he(TT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=zm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=zm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new _s;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Lo(e))throw e;he(TT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ws("INTERNAL UNHANDLED ERROR: ",bT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=lg.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&be(47125,{Pc:bT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function bT(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class zo extends Ef{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new wT,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wT(e),this._firestoreClient=void 0,await e}}}function QO(i,e){const n=typeof i=="object"?i:Mp(),r=typeof i=="string"?i:Bh,o=nf(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=yw("firestore");c&&KO(o,...c)}return o}function Tf(i){if(i._terminated)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||XO(i),i._firestoreClient}function XO(i){const e=i._freezeSettings(),n=(function(o,c,h,p){return new EN(o,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Cb(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new HO(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(en.fromBase64String(e))}catch(n){throw new le(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Dc(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Ot("string",Kn._jsonSchemaVersion),bytes:Ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mi._jsonSchemaVersion}}static fromJSON(e){if(Dc(e,Mi._jsonSchema))return new Mi(e.latitude,e.longitude)}}Mi._jsonSchemaVersion="firestore/geoPoint/1.0",Mi._jsonSchema={type:Ot("string",Mi._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ji._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Dc(e,ji._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ji(e.vectorValues);throw new le(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ji._jsonSchemaVersion="firestore/vectorValue/1.0",ji._jsonSchema={type:Ot("string",ji._jsonSchemaVersion),vectorValues:Ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=/^__.*__$/;class ZO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new br(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mc(e,this.data,n,this.fieldTransforms)}}class xb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new br(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Nb(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:i})}}class mg{constructor(e,n,r,o,c,h){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Nb(this.Ac)&&WO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class JO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yf(e)}Cc(e,n,r,o=!1){return new mg({Ac:e,methodName:n,Dc:r,path:Jt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pg(i){const e=i._freezeSettings(),n=yf(i._databaseId);return new JO(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Db(i,e,n,r,o,c={}){const h=i.Cc(c.merge||c.mergeFields?2:0,e,n,o);gg("Data must be an object, but it was:",h,r);const p=Ob(r,h);let g,y;if(c.merge)g=new On(h.fieldMask),y=h.fieldTransforms;else if(c.mergeFields){const v=[];for(const w of c.mergeFields){const A=Tp(e,w,n);if(!h.contains(A))throw new le(Z.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);jb(v,A)||v.push(A)}g=new On(v),y=h.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=h.fieldTransforms;return new ZO(new Tn(p),g,y)}class bf extends dg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bf}}function e2(i,e,n,r){const o=i.Cc(1,e,n);gg("Data must be an object, but it was:",o,r);const c=[],h=Tn.empty();wr(r,((g,y)=>{const v=yg(e,g,n);y=At(y);const w=o.yc(v);if(y instanceof bf)c.push(v);else{const A=Vc(y,w);A!=null&&(c.push(v),h.set(v,A))}}));const p=new On(c);return new xb(h,p,o.fieldTransforms)}function t2(i,e,n,r,o,c){const h=i.Cc(1,e,n),p=[Tp(e,r,n)],g=[o];if(c.length%2!=0)throw new le(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<c.length;A+=2)p.push(Tp(e,c[A])),g.push(c[A+1]);const y=[],v=Tn.empty();for(let A=p.length-1;A>=0;--A)if(!jb(y,p[A])){const C=p[A];let D=g[A];D=At(D);const H=h.yc(C);if(D instanceof bf)y.push(C);else{const L=Vc(D,H);L!=null&&(y.push(C),v.set(C,L))}}const w=new On(y);return new xb(v,w,h.fieldTransforms)}function n2(i,e,n,r=!1){return Vc(n,i.Cc(r?4:3,e))}function Vc(i,e){if(Mb(i=At(i)))return gg("Unsupported field value:",e,i),Ob(i,e);if(i instanceof dg)return(function(r,o){if(!Nb(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const c=[];let h=0;for(const p of r){let g=Vc(p,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),h++}return{arrayValue:{values:c}}})(i,e)}return(function(r,o){if((r=At(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HN(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=ct.fromDate(r);return{timestampValue:Yh(o.serializer,c)}}if(r instanceof ct){const c=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yh(o.serializer,c)}}if(r instanceof Mi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kn)return{bytesValue:K0(o.serializer,r._byteString)};if(r instanceof Mt){const c=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(c))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Jp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ji)return(function(h,p){return{mapValue:{fields:{[b0]:{stringValue:A0},[zh]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return Xp(p.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${of(r)}`)})(i,e)}function Ob(i,e){const n={};return y0(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wr(i,((r,o)=>{const c=Vc(o,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function Mb(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ct||i instanceof Mi||i instanceof Kn||i instanceof Mt||i instanceof dg||i instanceof ji)}function gg(i,e,n){if(!Mb(n)||!p0(n)){const r=of(n);throw r==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+r)}}function Tp(i,e,n){if((e=At(e))instanceof wf)return e._internalPath;if(typeof e=="string")return yg(i,e);throw Xh("Field path arguments must be of type string or ",i,!1,void 0,n)}const i2=new RegExp("[~\\*/\\[\\]]");function yg(i,e,n){if(e.search(i2)>=0)throw Xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new wf(...e.split("."))._internalPath}catch{throw Xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Xh(i,e,n,r,o){const c=r&&!r.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||h)&&(g+=" (found",c&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new le(Z.INVALID_ARGUMENT,p+i+g)}function jb(i,e){return i.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new s2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_g("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class s2 extends Pb{data(){return super.data()}}function _g(i,e){return typeof e=="string"?yg(i,e):e instanceof wf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new le(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vg{}class a2 extends vg{}function Hm(i,e,...n){let r=[];e instanceof vg&&r.push(e),r=r.concat(n),(function(c){const h=c.filter((g=>g instanceof Eg)).length,p=c.filter((g=>g instanceof Af)).length;if(h>1||h>0&&p>0)throw new le(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class Af extends a2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Af(e,n,r)}_apply(e){const n=this._parse(e);return kb(e._query,n),new Bo(e.firestore,e.converter,up(e._query,n))}_parse(e){const n=pg(e.firestore);return(function(c,h,p,g,y,v,w){let A;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new le(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){ST(w,v);const D=[];for(const H of w)D.push(AT(g,c,H));A={arrayValue:{values:D}}}else A=AT(g,c,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||ST(w,v),A=n2(p,h,w,v==="in"||v==="not-in");return Dt.create(y,v,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mh(i,e,n){const r=e,o=_g("where",i);return Af._create(o,r,n)}class Eg extends vg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Eg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:oi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let h=o;const p=c.getFlattenedFilters();for(const g of p)kb(h,g),h=up(h,g)})(e._query,n),new Bo(e.firestore,e.converter,up(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function AT(i,e,n){if(typeof(n=At(n))=="string"){if(n==="")throw new le(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!O0(e)&&n.indexOf("/")!==-1)throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ot.fromString(n));if(!_e.isDocumentKey(r))throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zE(i,new _e(r))}if(n instanceof Mt)return zE(i,n._key);throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${of(n)}.`)}function ST(i,e){if(!Array.isArray(i)||i.length===0)throw new le(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kb(i,e){const n=(function(o,c){for(const h of o)for(const p of h.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new le(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class o2{convertValue(e,n="none"){switch(yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return wr(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[zh].arrayValue?.values?.map((r=>bt(r.doubleValue)));return new ji(n)}convertGeoPoint(e){return new Mi(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=uf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const n=pr(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ot.fromString(e);Xe(eb(r),9688,{name:e});const o=new gc(r.get(1),r.get(3)),c=new _e(r.popFirst(5));return o.isEqual(n)||ws(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(i,e,n){let r;return r=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,r}class ic{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oa extends Pb{constructor(e,n,r,o,c,h){super(e,n,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_g("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=oa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}oa._jsonSchemaVersion="firestore/documentSnapshot/1.0",oa._jsonSchema={type:Ot("string",oa._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Ih extends oa{data(e={}){return super.data(e)}}class So{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ic(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Ih(this._firestore,this._userDataWriter,r.key,r,new ic(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const g=new Ih(o._firestore,o._userDataWriter,p.doc.key,p.doc,new ic(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new Ih(o._firestore,o._userDataWriter,p.doc.key,p.doc,new ic(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),v=h.indexOf(p.doc.key)),{type:l2(p.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=So._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Hp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l2(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(i){i=bs(i,Mt);const e=bs(i.firestore,zo);return YO(Tf(e),i._key).then((n=>c2(e,i,n)))}So._jsonSchemaVersion="firestore/querySnapshot/1.0",So._jsonSchema={type:Ot("string",So._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Lb extends o2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function ia(i){i=bs(i,Bo);const e=bs(i.firestore,zo),n=Tf(e),r=new Lb(e);return r2(i._query),$O(n,i._query).then((o=>new So(e,r,i,o)))}function Wl(i,e,n){i=bs(i,Mt);const r=bs(i.firestore,zo),o=Vb(i.converter,e,n);return Tg(r,[Db(pg(r),"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Mn.none())])}function RT(i){return Tg(bs(i.firestore,zo),[new pf(i._key,Mn.none())])}function Tg(i,e){return(function(r,o){const c=new _s;return r.asyncQueue.enqueueAndForget((async()=>jO(await GO(r),o,c))),c.promise})(Tf(i),e)}function c2(i,e,n){const r=n.docs.get(e._key),o=new Lb(i);return new oa(i,o,e._key,r,new ic(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=pg(e)}set(e,n,r){this._verifyNotCommitted();const o=Fm(e,this._firestore),c=Vb(o.converter,n,r),h=Db(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,r);return this._mutations.push(h.toMutation(o._key,Mn.none())),this}update(e,n,r,...o){this._verifyNotCommitted();const c=Fm(e,this._firestore);let h;return h=typeof(n=At(n))=="string"||n instanceof wf?t2(this._dataReader,"WriteBatch.update",c._key,n,r,o):e2(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(h.toMutation(c._key,Mn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Fm(e,this._firestore);return this._mutations=this._mutations.concat(new pf(n._key,Mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Fm(i,e){if((i=At(i)).firestore!==e)throw new le(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(i){return Tf(i=bs(i,zo)),new u2(i,(e=>Tg(i,e)))}(function(e,n=!0){(function(o){ko=o})(ga),ca(new dr("firestore",((r,{instanceIdentifier:o,options:c})=>{const h=r.getProvider("app").getImmediate(),p=new zo(new tN(r.getProvider("auth-internal")),new sN(h,r.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new le(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(y.options.projectId,v)})(h,o),h);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Ii(IE,xE,e),Ii(IE,xE,"esm2020")})();var f2="firebase",d2="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii(f2,d2,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="firebasestorage.googleapis.com",m2="storageBucket",p2=120*1e3,g2=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Li{constructor(e,n,r=0){super(Gm(e),`Firebase Storage: ${n} (${Gm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ui.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ki;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ki||(ki={}));function Gm(i){return"storage/"+i}function y2(){const i="An unknown error occurred, please check the error payload for server response.";return new Ui(ki.UNKNOWN,i)}function _2(){return new Ui(ki.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v2(){return new Ui(ki.CANCELED,"User canceled the upload/download.")}function E2(i){return new Ui(ki.INVALID_URL,"Invalid URL '"+i+"'.")}function T2(i){return new Ui(ki.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function CT(i){return new Ui(ki.INVALID_ARGUMENT,i)}function Bb(){return new Ui(ki.APP_DELETED,"The Firebase app was deleted.")}function w2(i){return new Ui(ki.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=si.makeFromUrl(e,n)}catch{return new si(e,"")}if(r.path==="")return r;throw T2(e)}static makeFromUrl(e,n){let r=null;const o="([A-Za-z0-9.\\-_]+)";function c(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+o+h,"i"),g={bucket:1,path:3};function y(ue){ue.path_=decodeURIComponent(ue.path)}const v="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",C=new RegExp(`^https?://${w}/${v}/b/${o}/o${A}`,"i"),D={bucket:1,path:3},H=n===Ub?"(?:storage.googleapis.com|storage.cloud.google.com)":n,L="([^?#]*)",J=new RegExp(`^https?://${H}/${o}/${L}`,"i"),ie=[{regex:p,indices:g,postModify:c},{regex:C,indices:D,postModify:y},{regex:J,indices:{bucket:1,path:2},postModify:y}];for(let ue=0;ue<ie.length;ue++){const ce=ie[ue],fe=ce.regex.exec(e);if(fe){const P=fe[ce.indices.bucket];let R=fe[ce.indices.path];R||(R=""),r=new si(P,R),ce.postModify(r);break}}if(r==null)throw E2(e);return r}}class b2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(i,e,n){let r=1,o=null,c=null,h=!1,p=0;function g(){return p===2}let y=!1;function v(...L){y||(y=!0,e.apply(null,L))}function w(L){o=setTimeout(()=>{o=null,i(C,g())},L)}function A(){c&&clearTimeout(c)}function C(L,...J){if(y){A();return}if(L){A(),v.call(null,L,...J);return}if(g()||h){A(),v.call(null,L,...J);return}r<64&&(r*=2);let ie;p===1?(p=2,ie=0):ie=(r+Math.random())*1e3,w(ie)}let D=!1;function H(L){D||(D=!0,A(),!y&&(o!==null?(L||(p=2),clearTimeout(o),w(0)):L||(p=1)))}return w(0),c=setTimeout(()=>{h=!0,H(!0)},n),H}function S2(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(i){return i!==void 0}function IT(i,e,n,r){if(r<e)throw CT(`Invalid value for '${i}'. Expected ${e} or greater.`);if(r>n)throw CT(`Invalid value for '${i}'. Expected ${n} or less.`)}function C2(i){const e=encodeURIComponent;let n="?";for(const r in i)if(i.hasOwnProperty(r)){const o=e(r)+"="+e(i[r]);n=n+o+"&"}return n=n.slice(0,-1),n}var Wh;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Wh||(Wh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(i,e){const n=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,r,o,c,h,p,g,y,v,w,A=!0,C=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=w,this.retry=A,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,H)=>{this.resolve_=D,this.reject_=H,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new gh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const h=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(h),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(h),this.pendingConnection_=null;const p=c.getErrorCode()===Wh.NO_ERROR,g=c.getStatus();if(!p||I2(g,this.additionalRetryCodes_)&&this.retry){const v=c.getErrorCode()===Wh.ABORT;r(!1,new gh(!1,null,v));return}const y=this.successCodes_.indexOf(g)!==-1;r(!0,new gh(y,c))})},n=(r,o)=>{const c=this.resolve_,h=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());R2(g)?c(g):c()}catch(g){h(g)}else if(p!==null){const g=y2();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(o.canceled){const g=this.appDelete_?Bb():v2();h(g)}else{const g=_2();h(g)}};this.canceled_?n(!1,new gh(!1,null,!0)):this.backoffId_=A2(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&S2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function N2(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function D2(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function O2(i,e){e&&(i["X-Firebase-GMPID"]=e)}function M2(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function j2(i,e,n,r,o,c,h=!0,p=!1){const g=C2(i.urlParams),y=i.url+g,v=Object.assign({},i.headers);return O2(v,e),N2(v,n),D2(v,c),M2(v,r),new x2(y,i.method,v,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,h,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function k2(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){this._service=e,n instanceof si?this._location=n:this._location=si.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zh(e,n)}get root(){const e=new si(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return k2(this._location.path)}get storage(){return this._service}get parent(){const e=P2(this._location.path);if(e===null)return null;const n=new si(this._location.bucket,e);return new Zh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw w2(e)}}function xT(i,e){const n=e?.[m2];return n==null?null:si.makeFromBucketSpec(n,i)}function V2(i,e,n,r={}){i.host=`${e}:${n}`;const o=pa(e);o&&(xp(`https://${i.host}/b`),Np("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:c}=r;c&&(i._overrideAuthToken=typeof c=="string"?c:Ew(c,i.app.options.projectId))}class L2{constructor(e,n,r,o,c,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=h,this._bucket=null,this._host=Ub,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=p2,this._maxUploadRetryTime=g2,this._requests=new Set,o!=null?this._bucket=si.makeFromBucketSpec(o,this._host):this._bucket=xT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=si.makeFromBucketSpec(this._url,e):this._bucket=xT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){IT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){IT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zh(this,e)}_makeRequest(e,n,r,o,c=!0){if(this._deleted)return new b2(Bb());{const h=j2(e,this._appId,r,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,o).getPromise()}}const NT="@firebase/storage",DT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="storage";function U2(i=Mp(),e){i=At(i);const r=nf(i,zb).getImmediate({identifier:e}),o=yw("storage");return o&&B2(r,...o),r}function B2(i,e,n,r={}){V2(i,e,n,r)}function z2(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),r=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new L2(n,r,o,e,ga)}function q2(){ca(new dr(zb,z2,"PUBLIC").setMultipleInstances(!0)),Ii(NT,DT,""),Ii(NT,DT,"esm2020")}q2();const H2={apiKey:"AIzaSyCPn0x4Y8PBF6HuczOqeG0Q3ldjNArgPMM",authDomain:"hazel-v2.firebaseapp.com",projectId:"hazel-v2",storageBucket:"hazel-v2.firebasestorage.app",messagingSenderId:"719736052006",appId:"1:719736052006:web:d4a88136eb2bdd7a3749e7"},wg=bw(H2),sa=Wx(wg),Wt=QO(wg);U2(wg);const qb=M.createContext(),F2=({children:i})=>{const[e,n]=M.useState(()=>{const ge=localStorage.getItem("theme")||"light";return document.body.classList.toggle("dark-mode",ge==="dark"),ge}),[r,o]=M.useState([]),[c,h]=M.useState([]),[p,g]=M.useState([]),[y,v]=M.useState(null),[w,A]=M.useState(null),[C,D]=M.useState([]),[H,L]=M.useState([]),[J,X]=M.useState([]),[ie,ue]=M.useState({show:!1,message:""}),[ce,fe]=M.useState(!1),[P,R]=M.useState(null),[I,O]=M.useState([]),[k,U]=M.useState([]),[N,yt]=M.useState(!0),[ut,K]=M.useState(!0),ae=M.useCallback(async()=>{const Ee=(await ia(fs(Wt,"users"))).docs.map(Be=>({id:Be.id,...Be.data()}));L(Ee)},[]),me=M.useCallback(async ge=>{if(!ge)return;const Ee=Hm(fs(Wt,"favorites"),mh("userId","==",ge)),Oe=(await ia(Ee)).docs.map(dt=>dt.data().itemId);D(Oe)},[]);M.useEffect(()=>{const ge=B1(sa,async Ee=>{if(yt(!0),Ee){const Be=ds(Wt,"users",Ee.uid),Oe=await ph(Be);if(Oe.exists()){const dt={uid:Ee.uid,email:Ee.email,...Oe.data()};A(dt),me(Ee.uid),dt.role==="admin"&&ae()}else A(null)}else A(null),L([]),D([]);yt(!1)});return()=>ge()},[ae,me]);const Ye=async(ge,Ee)=>{try{const Oe=(await j1(sa,ge.email,ge.password)).user;return await Wl(ds(Wt,"users",Oe.uid),{firstName:ge.firstName,lastName:ge.lastName,role:Ee,email:ge.email,verification_status:"unverified",profile_pic_url:`https://randomuser.me/api/portraits/lego/${Math.floor(Math.random()*9)}.jpg`,member_since:new Date}),Ue("Account created successfully!"),Oe}catch(Be){return Ue(Be.message),null}},j=async(ge,Ee,Be)=>{try{const dt=(await P1(sa,ge,Ee)).user,tn=ds(Wt,"users",dt.uid),ui=await ph(tn);return ui.exists()&&ui.data().role===Be?(Ue("Login successful!"),{uid:dt.uid,...ui.data()}):(await yE(sa),Ue("Incorrect portal or role not found."),null)}catch(Oe){return Ue(Oe.message),null}},ne=async()=>{await yE(sa),Ue("Logged out.")},oe=async(ge,Ee)=>{try{const Be=ds(Wt,"users",ge);if(await Wl(Be,Ee,{merge:!0}),w&&w.uid===ge){const Oe=await ph(Be);Oe.exists()&&A({uid:ge,email:w.email,...Oe.data()})}Ue("Profile updated successfully!")}catch(Be){Ue(`Failed to update profile: ${Be.message}`)}},se=async ge=>{if(!sa.currentUser){Ue("You must be logged in to update your password.");return}try{await k1(sa.currentUser,ge),Ue("Password updated successfully!")}catch(Ee){Ue(`Password update failed: ${Ee.message}. You may need to log in again to update your password.`)}},pe=M.useCallback(async()=>{K(!0);const Ee=(await ia(fs(Wt,"categories"))).docs.map(ze=>({id:ze.id,...ze.data()}));h(Ee);const Be=Ee.reduce((ze,Ne)=>({...ze,[Ne.id]:Ne.name}),{}),dt=(await ia(fs(Wt,"tags"))).docs.map(ze=>({id:ze.id,...ze.data()}));g(dt);const tn=dt.reduce((ze,Ne)=>({...ze,[Ne.id]:Ne.name}),{}),Ta=(await ia(fs(Wt,"items"))).docs.map(ze=>{const Ne={...ze.data(),id:ze.id};return{...Ne,category:Be[Ne.categoryId]||"Uncategorized",tags:Ne.tags?Ne.tags.map(hn=>tn[hn]).filter(Boolean):[]}});o(Ta),K(!1)},[]);M.useEffect(()=>{pe()},[pe]);const xe=async ge=>{if(!w){Ue("You must be logged in to add an item.");return}try{const Ee=ds(fs(Wt,"items")),Be={...ge,ownerId:w.uid,createdAt:new Date,location:"Mandaluyong, Metro Manila",status:"available"};await Wl(Ee,Be),await pe(),Ue("Item added successfully!")}catch(Ee){Ue(`Error adding item: ${Ee.message}`)}},Ae=async(ge,Ee)=>{if(!w){Ue("You must be logged in to update an item.");return}const Be=ds(Wt,"items",ge);try{const Oe=await ph(Be);if(!Oe.exists()||Oe.data().ownerId!==w.uid){Ue("You don't have permission to edit this item.");return}await Wl(Be,Ee,{merge:!0}),await pe(),Ue("Item updated successfully!")}catch(Oe){Ue(`Error updating item: ${Oe.message}`)}},St=async ge=>{if(!w||!r.find(Ee=>Ee.id===ge&&Ee.ownerId===w.uid)){Ue("You don't have permission to delete this item.");return}try{await RT(ds(Wt,"items",ge));const Ee=Hm(fs(Wt,"favorites"),mh("itemId","==",ge)),Be=await ia(Ee),Oe=h2(Wt);Be.docs.forEach(dt=>Oe.delete(dt.ref)),await Oe.commit(),o(dt=>dt.filter(tn=>tn.id!==ge)),D(dt=>dt.filter(tn=>tn!==ge)),Ue("Listing deleted successfully.")}catch(Ee){Ue(`Error deleting listing: ${Ee.message}`)}},et=async ge=>{if(!w){Ue("Please log in to favorite items.");return}const Ee=C.includes(ge),Be=Ee?C.filter(Oe=>Oe!==ge):[...C,ge];D(Be);try{if(Ee){const Oe=Hm(fs(Wt,"favorites"),mh("userId","==",w.uid),mh("itemId","==",ge)),dt=await ia(Oe);if(!dt.empty){const tn=dt.docs[0].id;await RT(ds(Wt,"favorites",tn))}}else{const Oe=ds(fs(Wt,"favorites"));await Wl(Oe,{userId:w.uid,itemId:ge})}}catch(Oe){Ue(`Error updating favorites: ${Oe.message}`),D(C)}},Pn=ge=>J.some(Ee=>Ee.itemId===ge.itemId)?(Ue("This item is already in your cart."),!1):(X(Ee=>[...Ee,ge]),Ue("Item added to cart!"),!0),ci=ge=>{X(Ee=>Ee.filter(Be=>Be.itemId!==ge)),Ue("Item removed from cart.")},Qn=()=>X([]),Bi=()=>{const ge=e==="light"?"dark":"light";n(ge),localStorage.setItem("theme",ge),document.body.classList.toggle("dark-mode",ge==="dark")},Ue=(ge,Ee=3e3)=>{ue({show:!0,message:ge}),setTimeout(()=>ue({show:!1,message:""}),Ee)},gn={theme:e,toggleTheme:Bi,toast:ie,showToast:Ue,items:r,categories:c,tags:p,itemsLoading:ut,session:y,currentUser:w,allProfiles:H,favorites:C,toggleFavorite:et,login:j,signup:Ye,logout:ne,updateUser:oe,updateUserPassword:se,addItem:xe,updateItem:Ae,deleteItem:St,cart:J,addToCart:Pn,removeFromCart:ci,clearCart:Qn,isChatOpen:ce,chatPartner:P,openChat:ge=>{R(ge),fe(!0)},closeChat:()=>fe(!1),toggleChat:()=>fe(ge=>!ge),isLoading:N,rentalHistory:I,ownerLentHistory:k,fetchAllProfiles:ae};return d.jsx(qb.Provider,{value:gn,children:i})},Je=()=>M.useContext(qb),G2=({closeModal:i,initialTab:e})=>{const{login:n,signup:r}=Je(),o=jn(),[c,h]=M.useState("initial"),[p,g]=M.useState(e||"login"),[y,v]=M.useState(""),[w,A]=M.useState(!1),[C,D]=M.useState({email:"",password:""}),[H,L]=M.useState({firstName:"",lastName:"",email:"",password:"",confirmPassword:""}),J=R=>D({...C,[R.target.name]:R.target.value}),X=R=>L({...H,[R.target.name]:R.target.value}),ie=()=>{v(""),D({email:"",password:""}),L({firstName:"",lastName:"",email:"",password:"",confirmPassword:""})},ue=R=>{h(R),g(e||"login"),ie()},ce=async R=>{R.preventDefault(),v(""),A(!0);try{const I=await n(C.email,C.password,c);I?(i(),I.role==="admin"?o("/admin"):o("/profile")):v("Login failed. Please check your credentials and selected portal.")}catch(I){v("An unexpected error occurred. Please try again."),console.error("Login error:",I)}finally{A(!1)}},fe=async(R,I)=>{if(R.preventDefault(),H.password!==H.confirmPassword){v("Passwords do not match.");return}v(""),A(!0);try{await r({firstName:H.firstName,lastName:H.lastName,email:H.email,password:H.password},I)?i():v("Signup failed. This email might already be registered.")}catch(O){v("An unexpected error occurred. Please try again."),console.error("Signup error:",O)}finally{A(!1)}},P=()=>d.jsx("a",{href:"#",className:"modal-footer-back-link",onClick:R=>{R.preventDefault(),ue("initial")},children:" Back to selection"});return d.jsx("div",{className:"modal",style:{display:"flex"},children:d.jsxs("div",{className:"modal-container",children:[d.jsxs("div",{className:"modal-header",children:[d.jsxs("h2",{id:"modalTitle",children:[c==="initial"&&"Join or Sign In",c==="renter"&&(p==="login"?"Renter Login":"Renter Sign Up"),c==="owner"&&(p==="login"?"Owner Login":"Owner Sign Up"),c==="admin"&&(p==="login"?"Admin Login":"Admin Sign Up")]}),d.jsx("button",{className:"modal-close-btn","aria-label":"Close modal",onClick:i,children:""})]}),d.jsxs("div",{className:"modal-body",children:[c==="initial"&&d.jsxs("div",{className:"auth-role-selection",children:[d.jsx("h3",{children:"How would you like to proceed?"}),d.jsx("button",{className:"btn btn-primary",onClick:()=>ue("renter"),children:"I want to Rent Items (Renter)"}),d.jsx("button",{className:"btn btn-outline",onClick:()=>ue("owner"),children:"I want to List Items (Owner)"}),d.jsx("button",{className:"btn btn-secondary",onClick:()=>ue("admin"),children:"Admin Portal"})]}),(c==="renter"||c==="owner"||c==="admin")&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"tab-container",children:[d.jsx("div",{className:`tab ${p==="login"?"active":""}`,onClick:()=>g("login"),children:"Login"}),d.jsx("div",{className:`tab ${p==="signup"?"active":""}`,onClick:()=>g("signup"),children:"Sign Up"})]}),d.jsxs("form",{id:"loginForm",className:`form-container ${p==="login"?"active":""}`,onSubmit:ce,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Email"}),d.jsx("input",{type:"email",name:"email",value:C.email,onChange:J,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Password"}),d.jsx("input",{type:"password",name:"password",value:C.password,onChange:J,required:!0})]}),y&&p==="login"&&d.jsx("div",{className:"error-message",children:y}),d.jsx("button",{type:"submit",className:"btn btn-primary",disabled:w,children:w?"Logging in...":"Login"})]}),d.jsxs("form",{id:"signupForm",className:`form-container ${p==="signup"?"active":""}`,onSubmit:R=>fe(R,c),children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"First Name"}),d.jsx("input",{type:"text",name:"firstName",value:H.firstName,onChange:X,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Last Name"}),d.jsx("input",{type:"text",name:"lastName",value:H.lastName,onChange:X,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Email"}),d.jsx("input",{type:"email",name:"email",value:H.email,onChange:X,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Password"}),d.jsx("input",{type:"password",name:"password",value:H.password,onChange:X,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Confirm Password"}),d.jsx("input",{type:"password",name:"confirmPassword",value:H.confirmPassword,onChange:X,required:!0})]}),y&&p==="signup"&&d.jsx("div",{className:"error-message",children:y}),d.jsx("button",{type:"submit",className:"btn btn-primary",disabled:w,children:w?"Signing up...":`Sign Up as ${c.charAt(0).toUpperCase()+c.slice(1)}`})]}),d.jsx(P,{})]})]})]})})},Y2=()=>{const{products:i,currentUser:e}=Je(),[n,r]=M.useState(""),[o,c]=M.useState([]),[h,p]=M.useState(!1),g=jn(),y=M.useRef(null);M.useEffect(()=>{if(n.length>1){const w=e?.role==="admin"?i:i.filter(D=>D.status==="approved"),A=n.toLowerCase(),C=w.filter(D=>D.title.toLowerCase().includes(A)||D.category.toLowerCase().includes(A)||D.tags&&D.tags.some(H=>H.toLowerCase().includes(A)));c(C),p(!0)}else c([]),p(!1)},[n,i,e]),M.useEffect(()=>{const w=A=>{y.current&&!y.current.contains(A.target)&&p(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const v=w=>{g(`/listing/${w}`),r(""),p(!1)};return d.jsxs("div",{className:"search-container",ref:y,children:[d.jsx("i",{className:"fas fa-search search-icon"}),d.jsx("input",{type:"text",className:"search-input",placeholder:"Search by name or tag...",value:n,onChange:w=>r(w.target.value),onFocus:()=>n.length>1&&p(!0)}),h&&d.jsx("div",{className:"search-results active",children:o.length>0?o.map(w=>d.jsxs("div",{className:"search-result-item",onClick:()=>v(w.id),children:[d.jsx("div",{className:"product-title",children:w.title}),d.jsx("div",{className:"product-price",children:w.priceDisplay})]},w.id)):d.jsx("div",{className:"no-results",children:"No products found"})})]})},$2=()=>{const{theme:i,toggleTheme:e,currentUser:n,logout:r,cart:o}=Je(),[c,h]=M.useState(!1),[p,g]=M.useState(!1),[y,v]=M.useState("login"),w=jn(),A=async()=>{await r(),w("/")},C=L=>{v(L),g(!0)},D=o?o.length:0,H=()=>n?d.jsxs("div",{id:"loggedInNavButtons",className:"auth-nav-state",children:[n.role==="renter"&&d.jsxs(Nn,{to:"/cart",className:"header-cart-link",children:[d.jsx("i",{className:"fas fa-shopping-cart"}),D>0&&d.jsx("span",{id:"cartItemCount",style:{display:"flex"},children:D})]}),n.role==="admin"&&d.jsxs(Nn,{to:"/admin",className:"header-admin-link",children:[d.jsx("i",{className:"fas fa-user-shield"})," Admin"]}),n.role!=="admin"&&d.jsxs(Nn,{to:"/profile",className:"header-profile-link",children:[d.jsx("i",{className:"fas fa-user-circle"})," Profile"]}),d.jsx("button",{className:"btn btn-outline",onClick:A,children:"Logout"})]}):d.jsxs("div",{id:"loggedOutNavButtons",children:[d.jsx("button",{className:"btn btn-outline",onClick:()=>C("login"),children:"Login"}),d.jsx("button",{className:"btn btn-primary",onClick:()=>C("signup"),children:"Sign Up"})]});return d.jsxs(d.Fragment,{children:[d.jsx("header",{children:d.jsxs("div",{className:"container header-container",children:[d.jsx(Nn,{to:"/",className:"logo",children:"HAZEL"}),d.jsxs("nav",{className:`main-nav ${c?"active":""}`,children:[d.jsx(Y2,{}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx(ni,{to:"/",end:!0,children:"Home"})}),d.jsx("li",{children:d.jsx(ni,{to:"/products",children:"Products"})}),d.jsx("li",{children:d.jsx(ni,{to:"/about",children:"About"})}),d.jsx("li",{children:d.jsx(ni,{to:"/contact",children:"Contact"})})]}),d.jsxs("div",{className:"nav-buttons",children:[d.jsx("button",{className:"dark-mode-toggle",onClick:e,children:i==="dark"?d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"fas fa-sun"})," Light"]}):d.jsxs(d.Fragment,{children:[d.jsx("i",{className:"far fa-moon"})," Dark"]})}),H()]})]}),d.jsx("div",{className:"mobile-menu-btn",onClick:()=>h(!c),children:d.jsx("i",{className:`fas ${c?"fa-times":"fa-bars"}`})})]})}),p&&d.jsx(G2,{closeModal:()=>g(!1),initialTab:y})]})},K2=()=>d.jsx("footer",{className:"common-footer",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"footer-container",children:[d.jsxs("div",{className:"footer-col",children:[d.jsx("h3",{children:"About HAZEL"}),d.jsx("p",{children:"We are the leading rental platform connecting people who need items with those who have them to rent."})]}),d.jsxs("div",{className:"footer-col",children:[d.jsx("h3",{children:"Quick Links"}),d.jsxs("ul",{className:"footer-links",children:[d.jsx("li",{children:d.jsx(Nn,{to:"/",children:"Home"})}),d.jsx("li",{children:d.jsx(Nn,{to:"/products",children:"Products"})}),d.jsx("li",{children:d.jsx(Nn,{to:"/about",children:"About Us"})}),d.jsx("li",{children:d.jsx(Nn,{to:"/contact",children:"Contact Us"})})]})]}),d.jsxs("div",{className:"footer-col",children:[d.jsx("h3",{children:"Support"}),d.jsxs("ul",{className:"footer-links",children:[d.jsx("li",{children:d.jsx(Nn,{to:"/faq",children:"FAQ"})}),d.jsx("li",{children:d.jsx(Nn,{to:"/privacy-policy",children:"Privacy Policy"})})]})]}),d.jsxs("div",{className:"footer-col",children:[d.jsx("h3",{children:"Contact Us"}),d.jsxs("ul",{className:"footer-links",children:[d.jsxs("li",{children:[d.jsx("i",{className:"fas fa-map-marker-alt"})," 123 Rental St, City"]}),d.jsxs("li",{children:[d.jsx("i",{className:"fas fa-phone"})," (02) 8123-4567"]}),d.jsxs("li",{children:[d.jsx("i",{className:"fas fa-envelope"})," info@hazel.com"]})]})]})]}),d.jsx("div",{className:"footer-bottom",children:d.jsx("p",{children:" 2025 HAZEL. All Rights Reserved."})})]})}),Q2=()=>{const{toast:i}=Je();return d.jsx("div",{id:"toast",className:`toast ${i.show?"show":""}`,children:i.message})};var OT;(function(i){i.STRING="string",i.NUMBER="number",i.INTEGER="integer",i.BOOLEAN="boolean",i.ARRAY="array",i.OBJECT="object"})(OT||(OT={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MT;(function(i){i.LANGUAGE_UNSPECIFIED="language_unspecified",i.PYTHON="python"})(MT||(MT={}));var jT;(function(i){i.OUTCOME_UNSPECIFIED="outcome_unspecified",i.OUTCOME_OK="outcome_ok",i.OUTCOME_FAILED="outcome_failed",i.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(jT||(jT={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=["user","model","function","system"];var vo;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(vo||(vo={}));var Eo;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Eo||(Eo={}));var kT;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(kT||(kT={}));var VT;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER"})(VT||(VT={}));var uc;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER"})(uc||(uc={}));var LT;(function(i){i.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",i.RETRIEVAL_QUERY="RETRIEVAL_QUERY",i.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",i.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",i.CLASSIFICATION="CLASSIFICATION",i.CLUSTERING="CLUSTERING"})(LT||(LT={}));var UT;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE"})(UT||(UT={}));var BT;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(BT||(BT={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class fo extends cn{constructor(e,n){super(e),this.response=n}}class Hb extends cn{constructor(e,n,r,o){super(e),this.status=n,this.statusText=r,this.errorDetails=o}}class fr extends cn{}class Fb extends cn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="https://generativelanguage.googleapis.com",W2="v1beta",Z2="0.24.1",J2="genai-js";var ma;(function(i){i.GENERATE_CONTENT="generateContent",i.STREAM_GENERATE_CONTENT="streamGenerateContent",i.COUNT_TOKENS="countTokens",i.EMBED_CONTENT="embedContent",i.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ma||(ma={}));class eM{constructor(e,n,r,o,c){this.model=e,this.task=n,this.apiKey=r,this.stream=o,this.requestOptions=c}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||W2;let c=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||X2}/${r}/${this.model}:${this.task}`;return this.stream&&(c+="?alt=sse"),c}}function tM(i){const e=[];return i?.apiClient&&e.push(i.apiClient),e.push(`${J2}/${Z2}`),e.join(" ")}async function nM(i){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",tM(i.requestOptions)),n.append("x-goog-api-key",i.apiKey);let r=(e=i.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(o){throw new fr(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${o.message}`)}for(const[o,c]of r.entries()){if(o==="x-goog-api-key")throw new fr(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new fr(`Header name ${o} can only be set using the apiClient field`);n.append(o,c)}}return n}async function iM(i,e,n,r,o,c){const h=new eM(i,e,n,r,c);return{url:h.toString(),fetchOptions:Object.assign(Object.assign({},oM(c)),{method:"POST",headers:await nM(h),body:o})}}async function Lc(i,e,n,r,o,c={},h=fetch){const{url:p,fetchOptions:g}=await iM(i,e,n,r,o,c);return sM(p,g,h)}async function sM(i,e,n=fetch){let r;try{r=await n(i,e)}catch(o){rM(o,i)}return r.ok||await aM(r,i),r}function rM(i,e){let n=i;throw n.name==="AbortError"?(n=new Fb(`Request aborted when fetching ${e.toString()}: ${i.message}`),n.stack=i.stack):i instanceof Hb||i instanceof fr||(n=new cn(`Error fetching from ${e.toString()}: ${i.message}`),n.stack=i.stack),n}async function aM(i,e){let n="",r;try{const o=await i.json();n=o.error.message,o.error.details&&(n+=` ${JSON.stringify(o.error.details)}`,r=o.error.details)}catch{}throw new Hb(`Error fetching from ${e.toString()}: [${i.status} ${i.statusText}] ${n}`,i.status,i.statusText,r)}function oM(i){const e={};if(i?.signal!==void 0||i?.timeout>=0){const n=new AbortController;i?.timeout>=0&&setTimeout(()=>n.abort(),i.timeout),i?.signal&&i.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(i){return i.text=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),xh(i.candidates[0]))throw new fo(`${nr(i)}`,i);return lM(i)}else if(i.promptFeedback)throw new fo(`Text not available. ${nr(i)}`,i);return""},i.functionCall=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),xh(i.candidates[0]))throw new fo(`${nr(i)}`,i);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),zT(i)[0]}else if(i.promptFeedback)throw new fo(`Function call not available. ${nr(i)}`,i)},i.functionCalls=()=>{if(i.candidates&&i.candidates.length>0){if(i.candidates.length>1&&console.warn(`This response had ${i.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),xh(i.candidates[0]))throw new fo(`${nr(i)}`,i);return zT(i)}else if(i.promptFeedback)throw new fo(`Function call not available. ${nr(i)}`,i)},i}function lM(i){var e,n,r,o;const c=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const h of(o=(r=i.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)h.text&&c.push(h.text),h.executableCode&&c.push("\n```"+h.executableCode.language+`
`+h.executableCode.code+"\n```\n"),h.codeExecutionResult&&c.push("\n```\n"+h.codeExecutionResult.output+"\n```\n");return c.length>0?c.join(""):""}function zT(i){var e,n,r,o;const c=[];if(!((n=(e=i.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const h of(o=(r=i.candidates)===null||r===void 0?void 0:r[0].content)===null||o===void 0?void 0:o.parts)h.functionCall&&c.push(h.functionCall);if(c.length>0)return c}const cM=[uc.RECITATION,uc.SAFETY,uc.LANGUAGE];function xh(i){return!!i.finishReason&&cM.includes(i.finishReason)}function nr(i){var e,n,r;let o="";if((!i.candidates||i.candidates.length===0)&&i.promptFeedback)o+="Response was blocked",!((e=i.promptFeedback)===null||e===void 0)&&e.blockReason&&(o+=` due to ${i.promptFeedback.blockReason}`),!((n=i.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(o+=`: ${i.promptFeedback.blockReasonMessage}`);else if(!((r=i.candidates)===null||r===void 0)&&r[0]){const c=i.candidates[0];xh(c)&&(o+=`Candidate was blocked due to ${c.finishReason}`,c.finishMessage&&(o+=`: ${c.finishMessage}`))}return o}function Ec(i){return this instanceof Ec?(this.v=i,this):new Ec(i)}function uM(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(i,e||[]),o,c=[];return o={},h("next"),h("throw"),h("return"),o[Symbol.asyncIterator]=function(){return this},o;function h(A){r[A]&&(o[A]=function(C){return new Promise(function(D,H){c.push([A,C,D,H])>1||p(A,C)})})}function p(A,C){try{g(r[A](C))}catch(D){w(c[0][3],D)}}function g(A){A.value instanceof Ec?Promise.resolve(A.value.v).then(y,v):w(c[0][2],A)}function y(A){p("next",A)}function v(A){p("throw",A)}function w(A,C){A(C),c.shift(),c.length&&p(c[0][0],c[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function hM(i){const e=i.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=mM(e),[r,o]=n.tee();return{stream:dM(r),response:fM(o)}}async function fM(i){const e=[],n=i.getReader();for(;;){const{done:r,value:o}=await n.read();if(r)return bg(pM(e));e.push(o)}}function dM(i){return uM(this,arguments,function*(){const n=i.getReader();for(;;){const{value:r,done:o}=yield Ec(n.read());if(o)break;yield yield Ec(bg(r))}})}function mM(i){const e=i.getReader();return new ReadableStream({start(r){let o="";return c();function c(){return e.read().then(({value:h,done:p})=>{if(p){if(o.trim()){r.error(new cn("Failed to parse stream"));return}r.close();return}o+=h;let g=o.match(qT),y;for(;g;){try{y=JSON.parse(g[1])}catch{r.error(new cn(`Error parsing JSON response: "${g[1]}"`));return}r.enqueue(y),o=o.substring(g[0].length),g=o.match(qT)}return c()}).catch(h=>{let p=h;throw p.stack=h.stack,p.name==="AbortError"?p=new Fb("Request aborted when reading from the stream"):p=new cn("Error reading from the stream"),p})}}})}function pM(i){const e=i[i.length-1],n={promptFeedback:e?.promptFeedback};for(const r of i){if(r.candidates){let o=0;for(const c of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:o}),n.candidates[o].citationMetadata=c.citationMetadata,n.candidates[o].groundingMetadata=c.groundingMetadata,n.candidates[o].finishReason=c.finishReason,n.candidates[o].finishMessage=c.finishMessage,n.candidates[o].safetyRatings=c.safetyRatings,c.content&&c.content.parts){n.candidates[o].content||(n.candidates[o].content={role:c.content.role||"user",parts:[]});const h={};for(const p of c.content.parts)p.text&&(h.text=p.text),p.functionCall&&(h.functionCall=p.functionCall),p.executableCode&&(h.executableCode=p.executableCode),p.codeExecutionResult&&(h.codeExecutionResult=p.codeExecutionResult),Object.keys(h).length===0&&(h.text=""),n.candidates[o].content.parts.push(h)}o++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(i,e,n,r){const o=await Lc(e,ma.STREAM_GENERATE_CONTENT,i,!0,JSON.stringify(n),r);return hM(o)}async function Yb(i,e,n,r){const c=await(await Lc(e,ma.GENERATE_CONTENT,i,!1,JSON.stringify(n),r)).json();return{response:bg(c)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(i){if(i!=null){if(typeof i=="string")return{role:"system",parts:[{text:i}]};if(i.text)return{role:"system",parts:[i]};if(i.parts)return i.role?i:{role:"system",parts:i.parts}}}function Tc(i){let e=[];if(typeof i=="string")e=[{text:i}];else for(const n of i)typeof n=="string"?e.push({text:n}):e.push(n);return gM(e)}function gM(i){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,o=!1;for(const c of i)"functionResponse"in c?(n.parts.push(c),o=!0):(e.parts.push(c),r=!0);if(r&&o)throw new cn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!o)throw new cn("No content is provided for sending chat message.");return r?e:n}function yM(i,e){var n;let r={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(n=e?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const o=i.generateContentRequest!=null;if(i.contents){if(o)throw new fr("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=i.contents}else if(o)r=Object.assign(Object.assign({},r),i.generateContentRequest);else{const c=Tc(i);r.contents=[c]}return{generateContentRequest:r}}function HT(i){let e;return i.contents?e=i:e={contents:[Tc(i)]},i.systemInstruction&&(e.systemInstruction=$b(i.systemInstruction)),e}function _M(i){return typeof i=="string"||Array.isArray(i)?{content:Tc(i)}:i}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],vM={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function EM(i){let e=!1;for(const n of i){const{role:r,parts:o}=n;if(!e&&r!=="user")throw new cn(`First content should be with role 'user', got ${r}`);if(!PT.includes(r))throw new cn(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(PT)}`);if(!Array.isArray(o))throw new cn("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new cn("Each Content should have at least one part");const c={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const p of o)for(const g of FT)g in p&&(c[g]+=1);const h=vM[r];for(const p of FT)if(!h.includes(p)&&c[p]>0)throw new cn(`Content with role '${r}' can't contain '${p}' part`);e=!0}}function GT(i){var e;if(i.candidates===void 0||i.candidates.length===0)return!1;const n=(e=i.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="SILENT_ERROR";class TM{constructor(e,n,r,o={}){this.model=n,this.params=r,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r?.history&&(EM(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,o,c,h,p,g;await this._sendPromise;const y=Tc(e),v={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(h=this.params)===null||h===void 0?void 0:h.toolConfig,systemInstruction:(p=this.params)===null||p===void 0?void 0:p.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,y]},w=Object.assign(Object.assign({},this._requestOptions),n);let A;return this._sendPromise=this._sendPromise.then(()=>Yb(this._apiKey,this.model,v,w)).then(C=>{var D;if(GT(C.response)){this._history.push(y);const H=Object.assign({parts:[],role:"model"},(D=C.response.candidates)===null||D===void 0?void 0:D[0].content);this._history.push(H)}else{const H=nr(C.response);H&&console.warn(`sendMessage() was unsuccessful. ${H}. Inspect response object for details.`)}A=C}).catch(C=>{throw this._sendPromise=Promise.resolve(),C}),await this._sendPromise,A}async sendMessageStream(e,n={}){var r,o,c,h,p,g;await this._sendPromise;const y=Tc(e),v={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(c=this.params)===null||c===void 0?void 0:c.tools,toolConfig:(h=this.params)===null||h===void 0?void 0:h.toolConfig,systemInstruction:(p=this.params)===null||p===void 0?void 0:p.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,y]},w=Object.assign(Object.assign({},this._requestOptions),n),A=Gb(this._apiKey,this.model,v,w);return this._sendPromise=this._sendPromise.then(()=>A).catch(C=>{throw new Error(YT)}).then(C=>C.response).then(C=>{if(GT(C)){this._history.push(y);const D=Object.assign({},C.candidates[0].content);D.role||(D.role="model"),this._history.push(D)}else{const D=nr(C);D&&console.warn(`sendMessageStream() was unsuccessful. ${D}. Inspect response object for details.`)}}).catch(C=>{C.message!==YT&&console.error(C)}),A}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wM(i,e,n,r){return(await Lc(e,ma.COUNT_TOKENS,i,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM(i,e,n,r){return(await Lc(e,ma.EMBED_CONTENT,i,!1,JSON.stringify(n),r)).json()}async function AM(i,e,n,r){const o=n.requests.map(h=>Object.assign(Object.assign({},h),{model:e}));return(await Lc(e,ma.BATCH_EMBED_CONTENTS,i,!1,JSON.stringify({requests:o}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=$b(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const o=HT(e),c=Object.assign(Object.assign({},this._requestOptions),n);return Yb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),c)}async generateContentStream(e,n={}){var r;const o=HT(e),c=Object.assign(Object.assign({},this._requestOptions),n);return Gb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},o),c)}startChat(e){var n;return new TM(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=yM(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),n);return wM(this.apiKey,this.model,r,o)}async embedContent(e,n={}){const r=_M(e),o=Object.assign(Object.assign({},this._requestOptions),n);return bM(this.apiKey,this.model,r,o)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return AM(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new cn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new $T(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new fr("Cached content must contain a `name` field.");if(!e.model)throw new fr("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const h of o)if(n?.[h]&&e[h]&&n?.[h]!==e[h]){if(h==="model"){const p=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,g=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(p===g)continue}throw new fr(`Different value for "${h}" specified in modelParams (${n[h]}) and cachedContent (${e[h]})`)}const c=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new $T(this.apiKey,c,r)}}const RM="AIzaSyAN70gzwzP3vHttBOsnja-kAr1uo9c9cOw",CM=new SM(RM),IM=`
You are a friendly and helpful customer support assistant for a rental website called HAZEL.
Your goal is to answer user questions based on the information provided below.

- The FAQ page is located at the "/faq" URL.
- Users can find contact information on the "/contact" page.
- To contact an item owner, a user must be logged in, go to the item's listing page, and click the "Chat with Owner" button.
- To contact an admin, users should use the general contact form on the "/contact" page for support inquiries.
- The Privacy Policy is available at "/privacy-policy".
- Users can view all rental items on the "/products" page.
- The "About Us" page is at "/about".

When answering, be concise and friendly. If a user asks a question you cannot answer with the information above, politely say that you can only help with questions about the HAZEL website.
`,xM=[{category:vo.HARM_CATEGORY_HARASSMENT,threshold:Eo.BLOCK_MEDIUM_AND_ABOVE},{category:vo.HARM_CATEGORY_HATE_SPEECH,threshold:Eo.BLOCK_MEDIUM_AND_ABOVE},{category:vo.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Eo.BLOCK_MEDIUM_AND_ABOVE},{category:vo.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Eo.BLOCK_MEDIUM_AND_ABOVE}],NM=CM.getGenerativeModel({model:"gemini-1.5-flash",safetySettings:xM,systemInstruction:IM}),DM=async i=>{try{return(await(await NM.startChat().sendMessage(i)).response).text()}catch(e){return console.error("Error in runChat:",e),"Sorry, I'm having trouble connecting to the AI. Please try again later."}},OM=()=>{const{isChatOpen:i,closeChat:e,chatPartner:n,currentUser:r}=Je(),[o,c]=M.useState([]),[h,p]=M.useState(""),[g,y]=M.useState(!1),v=M.useRef(null),w=n?.id==="support",A=w?o:[];M.useEffect(()=>{if(i&&w){const D=r?.name?` ${r.name}`:"";c([{content:`Hello${D}! You are chatting with HAZEL's AI Assistant. How can I help you?`,isUser:!1,timestamp:new Date().toISOString()}])}},[i,w,n,r]),M.useEffect(()=>{v.current?.scrollIntoView({behavior:"smooth"})},[A]);const C=async D=>{if(!D.trim()||g)return;const H={content:D,isUser:!0,timestamp:new Date().toISOString()};if(c(L=>[...L,H]),y(!0),p(""),w){const J={content:await DM(D),isUser:!1,timestamp:new Date().toISOString()};c(X=>[...X,J])}y(!1)};return i?d.jsxs("div",{className:`chat-widget ${i?"open":""}`,children:[d.jsxs("div",{className:"chat-header",children:[d.jsxs("span",{className:"chat-header-contact-name",children:["Chat with ",n?.name||"Support"]}),d.jsx("button",{className:"chat-close-btn",onClick:e,children:""})]}),d.jsxs("div",{className:"chat-messages-container",children:[A.map((D,H)=>d.jsx("div",{className:`chat-message ${D.isUser?"sent":"received"}`,children:D.content},H)),g&&d.jsx("div",{className:"chat-message received",children:"..."}),d.jsx("div",{ref:v})]}),d.jsxs("div",{className:"chat-input-area",children:[d.jsx("input",{type:"text",className:"chat-message-input",placeholder:r?"Type your message...":"Please log in to chat",value:h,onChange:D=>p(D.target.value),onKeyPress:D=>D.key==="Enter"&&C(h),disabled:!r||g}),d.jsx("button",{className:"chat-send-message-btn",onClick:()=>C(h),disabled:!r||g,children:d.jsx("i",{className:"fas fa-paper-plane"})})]})]}):null},MM=()=>{const{toggleChat:i}=Je();return d.jsxs(d.Fragment,{children:[d.jsx($2,{}),d.jsx("main",{children:d.jsx(Rp,{})}),d.jsx(K2,{}),d.jsx(Q2,{}),d.jsxs("div",{className:"chat-widget-container",children:[d.jsx(OM,{}),d.jsx("button",{className:"chat-toggle-btn",onClick:i,"aria-label":"Toggle chat",children:d.jsx("i",{className:"fas fa-comments"})})]})]})},Ag=({item:i})=>{const{currentUser:e,favorites:n,toggleFavorite:r}=Je(),o=jn(),c=n.includes(i.id),h=i.image_url||"https://via.placeholder.com/150",p=i.category||"Uncategorized",g=i.price_per_day?`$${Number(i.price_per_day).toFixed(2)}/day`:"Price not available";return d.jsxs("div",{className:"product-card","data-product-id":i.id,children:[d.jsx("img",{src:h,alt:i.title,className:"product-img"}),d.jsxs("div",{className:"product-info",children:[d.jsx("span",{className:"product-category",children:p}),d.jsx("h3",{className:"product-title",children:i.title}),d.jsx("div",{className:"product-price",children:g}),d.jsxs("div",{className:"product-meta",children:[d.jsxs("div",{className:"product-rating",children:[d.jsx("i",{className:"fas fa-star"}),d.jsx("i",{className:"fas fa-star"}),d.jsx("i",{className:"fas fa-star"}),d.jsx("i",{className:"fas fa-star"}),d.jsx("i",{className:"far fa-star"})]}),d.jsxs("div",{className:"product-actions",children:[d.jsx("button",{className:"btn btn-primary view-listing btn-small",onClick:()=>o(`/listing/${i.id}`),children:"Details"}),e&&e.role==="renter"&&d.jsx("button",{className:`btn btn-icon favorite-toggle-btn ${c?"active":""}`,"aria-label":"Toggle Favorite",onClick:y=>{y.stopPropagation(),r(i.id)},children:d.jsx("i",{className:"fas fa-heart"})})]})]})]})]})},jM=()=>{const{items:i,itemsLoading:e,categories:n}=Je(),r=jn(),[o,c]=M.useState("all"),h=M.useMemo(()=>(o==="all"?i:i.filter(y=>y.category.toLowerCase()===o.toLowerCase())).slice(0,6),[i,o]),p=M.useMemo(()=>["all",...n.map(g=>g.name)],[n]);return d.jsxs("div",{className:"page active",id:"home-page",children:[d.jsx("section",{className:"hero",children:d.jsxs("div",{className:"hero-content",children:[d.jsx("h1",{children:"Borrow What You Need, When You Need It"}),d.jsx("p",{children:"Discover the best rental items for your needs at affordable prices. From tools to electronics, we've got you covered."}),d.jsx("button",{className:"btn btn-primary",onClick:()=>r("/products"),children:"Browse Items"})]})}),d.jsx("section",{className:"products",id:"products",children:d.jsxs("div",{className:"container",children:[d.jsxs("div",{className:"products-header",children:[d.jsx("div",{className:"section-title",children:d.jsx("h2",{children:"Popular Items"})}),d.jsx("ul",{className:"products-filter",children:p.map(g=>d.jsx("li",{className:o===g?"active":"",onClick:()=>c(g),children:g.charAt(0).toUpperCase()+g.slice(1)},g))})]}),d.jsx("div",{className:"products-grid",children:e?d.jsx("p",{children:"Loading items..."}):h.map(g=>d.jsx(Ag,{item:g},g.id))})]})}),d.jsx("section",{className:"about",id:"about",children:d.jsx("div",{className:"container",children:d.jsxs("div",{className:"about-container",children:[d.jsx("div",{className:"about-img",children:d.jsx("img",{src:"https://images.unsplash.com/photo-1552581234-26160f608093?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",alt:"Rental items"})}),d.jsxs("div",{className:"about-content",children:[d.jsx("h2",{children:"About Our Rental Service"}),d.jsx("p",{children:"We started with a simple idea: to make renting items as easy as possible. Our platform connects people who need items with those who have them to rent."}),d.jsx("p",{children:"With over 10,000 satisfied customers and thousands of items available, we're proud to be the leading rental platform in the region."}),d.jsx(Nn,{to:"/about",className:"btn btn-primary",children:"Learn More"})]})]})})})]})},PM=()=>{const{items:i,categories:e,itemsLoading:n}=Je(),[r,o]=QR(),[c,h]=M.useState(r.get("search")||""),[p,g]=M.useState(r.get("category")||"all"),y=M.useMemo(()=>["all",...e.map(C=>C.name).sort()],[e]),v=M.useMemo(()=>{let C=i;return p!=="all"&&(C=C.filter(D=>D.category.toLowerCase()===p.toLowerCase())),c&&(C=C.filter(D=>D.title.toLowerCase().includes(c.toLowerCase())||D.tags&&D.tags.some(H=>H.toLowerCase().includes(c.toLowerCase())))),C},[i,p,c]),w=C=>{g(C),o({category:C,search:c})},A=C=>{h(C.target.value),o({category:p,search:C.target.value})};return d.jsx("div",{className:"page active",id:"all-products-page",style:{paddingTop:"70px"},children:d.jsxs("div",{className:"container products-page-container",children:[d.jsxs("section",{className:"products-page-header-section",children:[d.jsx("h1",{children:"Our Full Catalog"}),d.jsx("p",{children:"Browse all available items for rent. Use the filters and search to find exactly what you need."})]}),d.jsxs("section",{className:"products-page-controls",children:[d.jsxs("div",{className:"products-page-search-container",children:[d.jsx("i",{className:"fas fa-search search-icon"}),d.jsx("input",{type:"text",className:"search-input",placeholder:"Search by name or tag...",value:c,onChange:A})]}),d.jsx("ul",{className:"products-filter",id:"productsPageFilter",children:y.map(C=>d.jsx("li",{className:p===C?"active":"",onClick:()=>w(C),children:C.charAt(0).toUpperCase()+C.slice(1)},C))})]}),n?d.jsx("div",{className:"loading-spinner-container",children:d.jsx("div",{className:"loading-spinner"})}):v.length>0?d.jsx("div",{className:"products-grid",id:"allProductsGrid",children:v.map(C=>d.jsx(Ag,{item:C},C.id))}):d.jsx("div",{className:"no-products-found",children:d.jsx("p",{children:"No items match your current filters or search term."})})]})})},kM=[{name:"Jace R. Torres",role:"Main Developer / Documentation",imgSrc:"https://i.ibb.co/HT0Nz7j1/download-12.jpg"},{name:"Gurkarn Q. Singh",role:"Backup Developer / Documentation",imgSrc:"https://i.ibb.co/MDQJNcRS/download-14.jpg"},{name:"Olive Leigh A. Mendoza",role:"Front End Developer / Design / Documentation",imgSrc:"https://i.ibb.co/Rkm65MZZ/download-13.jpg"},{name:"Romeo Victor D. Nogaliza",role:"Spokeperson / Documentation",imgSrc:"https://i.ibb.co/fGCqLmjw/494888334-1322942232103903-4287235928389679842-n.jpg"}],VM=[{iconClass:"fas fa-handshake",title:"Trust",description:"We build trust through verification systems, secure payments, and community reviews."},{iconClass:"fas fa-leaf",title:"Sustainability",description:"We promote the sharing economy to reduce waste and overconsumption."},{iconClass:"fas fa-users",title:"Community",description:"We believe in bringing people together and strengthening local connections."},{iconClass:"fas fa-gem",title:"Quality",description:"We maintain high standards for the items listed on our platform."}],LM=()=>(M.useEffect(()=>{window.scrollTo(0,0)},[]),d.jsx("div",{className:"page active",id:"about-page",style:{paddingTop:"70px"},children:d.jsxs("div",{className:"container about-page-container",children:[d.jsx("section",{className:"about-hero",children:d.jsxs("div",{className:"about-hero-content",children:[d.jsx("h1",{children:"About HAZEL"}),d.jsx("p",{children:"Connecting people with the things they need through a trusted rental community"})]})}),d.jsxs("section",{className:"our-story",children:[d.jsx("div",{className:"section-title",children:d.jsx("h2",{children:"Our Story"})}),d.jsxs("div",{className:"about-container",children:[d.jsxs("div",{className:"about-content",children:[d.jsx("p",{children:"HAZEL was founded in 2025 with a simple mission: to make renting items as easy as possible. The 4 founders, recognized that many people own items they rarely use, while others need those same items for short periods."}),d.jsx("p",{children:"What started as a small local platform has grown into a nationwide rental community with thousands of users. We've helped people save money, reduce waste, and build connections in their communities."}),d.jsx("p",{children:"Today, we're proud to be the leading peer-to-peer rental platform, offering everything from power tools to party equipment and more."})]}),d.jsx("div",{className:"about-img",children:d.jsx("img",{src:"https://images.unsplash.com/photo-1552581234-26160f608093?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",alt:"HAZEL team working"})})]})]}),d.jsxs("section",{className:"mission-vision",children:[d.jsxs("div",{className:"mission",children:[d.jsx("h2",{children:"Our Mission"}),d.jsx("p",{children:"To create a sustainable sharing economy by making rental access to goods more convenient and affordable than ownership, while building trust between community members."})]}),d.jsxs("div",{className:"vision",children:[d.jsx("h2",{children:"Our Vision"}),d.jsx("p",{children:"We envision a world where people have access to what they need without the burden of ownership, reducing waste and consumption while strengthening local communities."})]})]}),d.jsxs("section",{className:"team-section",children:[d.jsxs("div",{className:"section-title",children:[d.jsx("h2",{children:"Meet Our Team"}),d.jsx("p",{children:"The passionate people behind HAZEL"})]}),d.jsx("div",{className:"team-grid",children:kM.map(i=>d.jsxs("div",{className:"team-member",children:[d.jsx("img",{src:i.imgSrc,alt:i.name,className:"team-member-img"}),d.jsxs("div",{className:"team-member-info",children:[d.jsx("h3",{children:i.name}),d.jsx("p",{children:i.role})]})]},i.name))})]}),d.jsxs("section",{className:"values-section",children:[d.jsxs("div",{className:"section-title",children:[d.jsx("h2",{children:"Our Values"}),d.jsx("p",{children:"The principles that guide everything we do"})]}),d.jsx("div",{className:"values-grid",children:VM.map(i=>d.jsxs("div",{className:"value-card",children:[d.jsx("div",{className:"value-icon",children:d.jsx("i",{className:i.iconClass})}),d.jsx("h3",{children:i.title}),d.jsx("p",{children:i.description})]},i.title))})]})]})})),UM=()=>{const{showToast:i}=Je(),[e,n]=M.useState({name:"",email:"",subject:"",message:""}),r=c=>{n({...e,[c.target.name]:c.target.value})},o=c=>{if(c.preventDefault(),!e.name||!e.email||!e.subject||!e.message){i("Please fill out all required fields.","error");return}console.log("Form submitted:",e),i("Thank you! Your message has been sent."),n({name:"",email:"",subject:"",message:""})};return d.jsx("div",{className:"page active",id:"contact-page",style:{paddingTop:"70px"},children:d.jsxs("div",{className:"container contact-page-container",children:[d.jsx("section",{className:"contact-hero",children:d.jsxs("div",{className:"contact-hero-content",children:[d.jsx("h1",{children:"Get in Touch"}),d.jsx("p",{children:"We'd love to hear from you! Whether you have a question, feedback, or just want to say hello."})]})}),d.jsxs("section",{className:"contact-content-section",children:[d.jsxs("div",{className:"contact-form-container",children:[d.jsx("h2",{children:"Send Us a Message"}),d.jsxs("form",{id:"contactForm",onSubmit:o,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"contactName",children:"Full Name*"}),d.jsx("input",{type:"text",id:"contactName",name:"name",value:e.name,onChange:r,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"contactEmail",children:"Email Address*"}),d.jsx("input",{type:"email",id:"contactEmail",name:"email",value:e.email,onChange:r,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"contactSubject",children:"Subject*"}),d.jsx("input",{type:"text",id:"contactSubject",name:"subject",value:e.subject,onChange:r,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"contactMessage",children:"Message*"}),d.jsx("textarea",{id:"contactMessage",name:"message",rows:"6",value:e.message,onChange:r,required:!0})]}),d.jsx("button",{type:"submit",className:"btn btn-primary btn-block",children:"Send Message"})]})]}),d.jsxs("div",{className:"contact-details-container",children:[d.jsx("h2",{children:"Contact Information"}),d.jsx("p",{children:"Feel free to reach out to us through any of the following channels:"}),d.jsxs("ul",{className:"contact-info-list",children:[d.jsxs("li",{children:[d.jsx("i",{className:"fas fa-map-marker-alt"}),d.jsx("span",{children:"123 Rental St, City, Country 12345"})]}),d.jsxs("li",{children:[d.jsx("i",{className:"fas fa-phone"}),d.jsx("span",{children:"(02) 8123-4567"})]}),d.jsxs("li",{children:[d.jsx("i",{className:"fas fa-envelope"}),d.jsx("span",{children:"info@hazel.com"})]}),d.jsxs("li",{children:[d.jsx("i",{className:"fas fa-clock"}),d.jsx("span",{children:"Mon - Fri: 9:00 AM - 6:00 PM"})]})]})]})]})]})})},BM=[{question:"How does HAZEL work?",answer:"HAZEL is a peer-to-peer rental platform. Owners list their items for rent, and renters can browse and book these items for a specific duration. We handle secure payments and provide a framework for communication and trust between users."},{question:"Is it safe to rent items from others?",answer:"Yes. We prioritize safety and trust. We encourage all users to complete our Identity Verification process. Additionally, our review system allows you to see feedback from other users, and our secure messaging system lets you communicate with the owner before you rent."},{question:"What happens if an item I rent gets damaged?",answer:"Renters are responsible for the items during the rental period. We recommend you communicate with the owner immediately if any damage occurs. Many owners specify their own terms regarding damages and late fees in the listing description. Disputes can be mediated through our support team."}],zM=({item:i,isOpen:e,onClick:n})=>d.jsxs("div",{className:`faq-item ${e?"active":""}`,children:[d.jsxs("div",{className:"faq-question",onClick:n,children:[d.jsx("span",{children:i.question}),d.jsx("i",{className:"fas fa-chevron-down"})]}),d.jsx("div",{className:"faq-answer",style:{maxHeight:e?"200px":"0"},children:d.jsx("p",{children:i.answer})})]}),qM=()=>{const[i,e]=M.useState(null),n=r=>{e(i===r?null:r)};return d.jsx("div",{className:"page active",id:"faq-page",style:{paddingTop:"70px"},children:d.jsxs("div",{className:"container faq-page-container",children:[d.jsx("section",{className:"faq-hero",children:d.jsxs("div",{className:"faq-hero-content",children:[d.jsx("h1",{children:"Frequently Asked Questions"}),d.jsx("p",{children:"Find answers to common questions about using HAZEL."})]})}),d.jsx("section",{className:"faq-list",children:d.jsx("div",{className:"faq-accordion",children:BM.map((r,o)=>d.jsx(zM,{item:r,isOpen:i===o,onClick:()=>n(o)},o))})})]})})},HM=()=>d.jsx("div",{className:"page active",id:"privacy-policy-page",style:{paddingTop:"70px"},children:d.jsxs("div",{className:"container privacy-policy-page-container",children:[d.jsx("section",{className:"privacy-policy-hero",children:d.jsxs("div",{className:"privacy-policy-hero-content",children:[d.jsx("h1",{children:"Privacy Policy"}),d.jsx("p",{children:"Last updated: October 26, 2025"})]})}),d.jsxs("section",{className:"privacy-policy-content",children:[d.jsx("p",{children:'HAZEL ("us", "we", or "our") operates the HAZEL website (the "Service"). This page informs you of our policies regarding the collection, use, and disclosure of personal data when you use our Service and the choices you have associated with that data.'}),d.jsx("h2",{children:"Information Collection and Use"}),d.jsx("p",{children:"We collect several different types of information for various purposes to provide and improve our Service to you."}),d.jsx("h3",{children:"Types of Data Collected"}),d.jsxs("ul",{children:[d.jsxs("li",{children:[d.jsx("strong",{children:"Personal Data:"}),' While using our Service, we may ask you to provide us with certain personally identifiable information that can be used to contact or identify you ("Personal Data"). This may include, but is not limited to: Email address, First name and last name, Phone number, Address, and payment information.']}),d.jsxs("li",{children:[d.jsx("strong",{children:"Usage Data:"}),` We may also collect information on how the Service is accessed and used ("Usage Data"). This may include your computer's IP address, browser type, pages visited, and other diagnostic data.`]})]}),d.jsx("h2",{children:"Data Security"}),d.jsx("p",{children:"The security of your data is important to us, but remember that no method of transmission over the Internet or method of electronic storage is 100% secure. While we strive to use commercially acceptable means to protect your Personal Data, we cannot guarantee its absolute security."})]})]})}),FM=({rating:i,setRating:e})=>{const[n,r]=M.useState(0);return d.jsx("div",{className:"star-rating",children:[...Array(5)].map((o,c)=>{const h=c+1;return d.jsxs("label",{children:[d.jsx("input",{type:"radio",name:"rating",value:h,onClick:()=>e(h),hidden:!0}),d.jsx("i",{className:`fas fa-star star ${h<=(n||i)?"active":""}`,onMouseEnter:()=>r(h),onMouseLeave:()=>r(0)})]},c)})})},GM=({productId:i,productTitle:e,closeModal:n})=>{const{currentUser:r,showToast:o}=Je(),[c,h]=M.useState(0),[p,g]=M.useState(""),y=v=>{if(v.preventDefault(),c===0||!p){o("Please provide a rating and a review text.");return}console.log({productId:i,rating:c,reviewText:p,user:r.email}),o("Thank you for your review!"),n()};return d.jsx("div",{className:"modal",style:{display:"flex"},children:d.jsxs("div",{className:"modal-container",children:[d.jsxs("div",{className:"modal-header",children:[d.jsxs("h2",{children:["Leave a Review for ",e]}),d.jsx("button",{className:"modal-close-btn",onClick:n,children:""})]}),d.jsx("div",{className:"modal-body",children:d.jsxs("form",{id:"reviewForm",onSubmit:y,children:[d.jsxs("div",{className:"form-group star-rating-container",children:[d.jsx("label",{children:"Your Rating*"}),d.jsx(FM,{rating:c,setRating:h})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"reviewerName",children:"Your Name*"}),d.jsx("input",{type:"text",id:"reviewerName",value:r.name||"",readOnly:!0,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"reviewText",children:"Your Review*"}),d.jsx("textarea",{id:"reviewText",rows:"5",value:p,onChange:v=>g(v.target.value),required:!0})]}),d.jsx("button",{type:"submit",className:"btn btn-primary btn-block",children:"Submit Review"})]})})]})})},YM=()=>{const{id:i}=aR(),e=jn(),{items:n,addToCart:r,currentUser:o,showToast:c,openChat:h,allProfiles:p}=Je(),[g,y]=M.useState(null),[v,w]=M.useState(""),[A,C]=M.useState({days:"1",deliveryFee:"0",startDate:""}),[D,H]=M.useState(!1),L=M.useMemo(()=>!g||!p.length?null:p.find(fe=>fe.id===g.ownerId),[g,p]);M.useEffect(()=>{window.scrollTo(0,0);const fe=n.find(P=>P.id===i);fe?(y(fe),w(fe.image_url)):n.length>0&&(c("Sorry, that listing could not be found."),e("/products"))},[i,n,e,c]);const J=M.useMemo(()=>{if(!g)return{total:0,perDay:0};const fe=g.price_per_day,P=parseInt(A.days);let R=fe*P;const I=R/P;return{total:R,perDay:I}},[g,A.days]),X=fe=>C(P=>({...P,[fe.target.name]:fe.target.value})),ie=()=>{if(!o){c("Please login to rent an item.");return}if(o.uid===g.ownerId){c("You cannot rent your own item.");return}if(!A.startDate){c("Please select a rental start date.");return}const fe={itemId:g.id,title:g.title,image_url:g.image_url,rentalDurationDays:parseInt(A.days),rentalTotalCost:J.total,deliveryOption:A.deliveryFee==="0"?"pickup":"delivery",deliveryFee:parseInt(A.deliveryFee),rentalStartDate:A.startDate,ownerId:g.ownerId};r(fe)&&e("/cart")},ue=async()=>{if(!o){c("Please login to chat with the owner.");return}if(!L){c("Owner information not available.");return}const fe={id:L.id,name:`${L.firstName} ${L.lastName}`,profile_pic_url:L.profile_pic_url};h(fe)},ce=()=>new Date().toISOString().split("T")[0];return g?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"page active listing-page",style:{paddingTop:"70px"},children:d.jsxs("div",{className:"container listing-container",children:[d.jsxs("div",{className:"listing-content",children:[d.jsxs("div",{className:"listing-images",children:[d.jsx("div",{className:"thumbnail-images",children:d.jsx("img",{src:g.image_url,alt:`${g.title} Thumbnail`,className:"thumbnail-img",onClick:()=>w(g.image_url)})}),d.jsx("img",{src:v,alt:g.title,className:"main-image"})]}),d.jsxs("div",{className:"listing-details",children:[d.jsx("h1",{className:"listing-title",children:g.title}),d.jsxs("div",{className:"listing-price",children:["$",J.total.toFixed(2)," for ",A.days," day(s)",parseInt(A.days)>1&&d.jsxs("span",{children:[" ($",J.perDay.toFixed(2),"/day)"]})]}),d.jsxs("div",{className:"listing-meta",children:[d.jsxs("div",{className:"meta-item",children:[d.jsx("i",{className:"fas fa-user"})," Owner: ",d.jsx("span",{className:"listing-owner-name",children:L?`${L.firstName} ${L.lastName}`:"N/A"})]}),d.jsxs("div",{className:"meta-item",children:[d.jsx("i",{className:"fas fa-tag"})," Category: ",d.jsx("span",{className:"listing-category",children:g.category})]}),g.tags&&g.tags.length>0&&d.jsxs("div",{className:"meta-item",children:[d.jsx("i",{className:"fas fa-tags"})," Tags: ",d.jsx("span",{className:"listing-tags",children:g.tags.join(", ")})]})]}),d.jsx("div",{className:"listing-description",children:d.jsx("p",{children:g.description})}),d.jsxs("div",{className:"rental-options",children:[d.jsxs("div",{className:"option-group",children:[d.jsx("label",{htmlFor:"rentalDays",children:"Rental Duration"}),d.jsxs("select",{id:"rentalDays",name:"days",value:A.days,onChange:X,children:[d.jsx("option",{value:"1",children:"1 day"}),d.jsx("option",{value:"3",children:"3 days"}),d.jsx("option",{value:"7",children:"7 days"})]})]}),d.jsxs("div",{className:"option-group",children:[d.jsx("label",{htmlFor:"deliveryOption",children:"Delivery Option"}),d.jsxs("select",{id:"deliveryOption",name:"deliveryFee",value:A.deliveryFee,onChange:X,children:[d.jsx("option",{value:"0",children:"Pickup - Free"}),d.jsx("option",{value:"15",children:"Delivery - $15"})]})]}),d.jsxs("div",{className:"option-group",children:[d.jsx("label",{htmlFor:"rentalDate",children:"Rental Start Date"}),d.jsx("input",{type:"date",id:"rentalDate",name:"startDate",min:ce(),value:A.startDate,onChange:X})]})]}),o&&o.role==="renter"&&d.jsxs("button",{className:"btn btn-primary btn-block",onClick:ie,children:[d.jsx("i",{className:"fas fa-cart-plus"})," Add to Cart"]}),o&&L&&o.uid!==L.id&&d.jsxs("button",{className:"btn btn-outline btn-block listing-chat-owner-btn",onClick:ue,children:[d.jsx("i",{className:"fas fa-comments"})," Chat with Owner"]})]})]}),d.jsxs("div",{className:"reviews-section",id:`reviews-section-${g.id}`,children:[d.jsx("h3",{children:"Customer Reviews"}),d.jsx("p",{children:"No reviews yet for this listing."}),o&&o.role==="renter"&&d.jsx("button",{className:"btn btn-outline",style:{marginTop:"20px"},onClick:()=>H(!0),children:"Leave a Review"})]})]})}),D&&d.jsx(GM,{itemId:g.id,itemTitle:g.title,closeModal:()=>H(!1)})]}):d.jsx("div",{style:{paddingTop:"100px",textAlign:"center"},children:"Loading listing..."})},$M=()=>{const{cart:i,removeFromCart:e,currentUser:n}=Je(),r=jn();if(!n)return d.jsx("div",{className:"page active",style:{paddingTop:"70px",textAlign:"center"},children:d.jsxs("div",{className:"container",children:[d.jsx("h1",{children:"Please Login"}),d.jsx("p",{children:"You need to be logged in to view your cart."})]})});const o=i.reduce((p,g)=>p+g.rentalTotalCost,0),c=o*.05,h=o+c;return d.jsx("div",{className:"page active",id:"cart-page",style:{paddingTop:"70px"},children:d.jsxs("div",{className:"container cart-page-container",children:[d.jsxs("section",{className:"checkout-header-section",children:[d.jsx("h1",{children:"Your Shopping Cart"}),d.jsx("p",{children:"Review the items you've selected for rental."})]}),i.length===0?d.jsx("p",{className:"cart-empty-message",children:"Your shopping cart is empty."}):d.jsxs("div",{className:"cart-grid",children:[d.jsx("div",{className:"cart-items-list",children:i.map(p=>d.jsxs("div",{className:"cart-item",children:[d.jsx("img",{src:p.image_url,alt:p.title,className:"cart-item-image"}),d.jsxs("div",{className:"cart-item-details",children:[d.jsx("h3",{children:p.title}),d.jsxs("p",{children:["Duration: ",p.rentalDurationDays," day(s)"]}),d.jsxs("p",{children:["Start Date: ",new Date(p.rentalStartDate).toLocaleDateString()]}),d.jsxs("p",{children:["Delivery: ",p.deliveryOption]})]}),d.jsxs("div",{className:"cart-item-price",children:["$",p.rentalTotalCost.toFixed(2)]}),d.jsx("button",{className:"cart-item-remove-btn",onClick:()=>e(p.itemId),children:""})]},p.itemId))}),d.jsxs("aside",{className:"cart-summary",children:[d.jsx("h2",{children:"Summary"}),d.jsxs("div",{className:"price-row",children:[d.jsx("span",{children:"Subtotal:"}),d.jsxs("span",{id:"cartSubtotal",children:["$",o.toFixed(2)]})]}),d.jsxs("div",{className:"price-row",children:[d.jsx("span",{children:"Service Fee (5%):"}),d.jsxs("span",{id:"cartServiceFee",children:["$",c.toFixed(2)]})]}),d.jsx("hr",{}),d.jsxs("div",{className:"price-row total-row",children:[d.jsx("span",{children:"Total:"}),d.jsxs("span",{id:"cartTotal",children:["$",h.toFixed(2)]})]}),d.jsx("button",{className:"btn btn-primary btn-block",onClick:()=>r("/checkout"),children:"Proceed to Checkout"})]})]})]})})},KM=()=>{const{cart:i,currentUser:e,products:n,clearCart:r,showToast:o,rentalAgreementTemplate:c,generateAndPrintReceipt:h,addRentalRecord:p}=Je(),g=jn(),[y,v]=M.useState(!1),[w,A]=M.useState(!1),[C,D]=M.useState(!1),[H,L]=M.useState(null),[J,X]=M.useState({cardNumber:"",expiryDate:"",cvv:""});M.useEffect(()=>{!e||i.length===0?C||(o("Your cart is empty or you are not logged in."),g("/products")):e.payment_info&&X({cardNumber:e.payment_info.cardNumber||"",expiryDate:e.payment_info.expiryDate||"",cvv:e.payment_info.cvv||""})},[e,i,g,o,C]);const ie=M.useMemo(()=>i.reduce((O,k)=>O+k.rentalTotalCost,0),[i]),ue=M.useMemo(()=>i.reduce((O,k)=>O+k.deliveryFee,0),[i]),ce=M.useMemo(()=>ie*.05,[ie]),fe=M.useMemo(()=>ie+ue+ce,[ie,ue,ce]),P=M.useMemo(()=>{const O=e?`${e.first_name} ${e.last_name}`:"The Renter",k=i.map(U=>{const N=n.find(yt=>yt.id===U.productId);return`<li><b>${N?.title||"Unknown Item"}</b> (owned by ${N?.ownerName||"Owner"}) - ${U.rentalDurationDays} day(s) starting ${new Date(U.rentalStartDate).toLocaleDateString()}. ${N?.ownerTerms||""}</li>`}).join("");return c.replace(/\[Renter Name\]/g,O).replace(/\[List of Items and Terms\]/g,`<ul>${k}</ul>`)},[i,n,c,e]),R=O=>{X({...J,[O.target.id.replace("checkout","")]:O.target.value})},I=async O=>{O.preventDefault(),A(!0),o("Processing payment...");const k={transactionId:`HZL-TRX-${Date.now()}`,date:new Date().toISOString(),items:[...i],rentalCost:ie,deliveryFee:ue,serviceFee:ce,totalAmount:fe};await new Promise(U=>setTimeout(U,2e3)),await p(k),L(k),A(!1),D(!0),o("Rental Confirmed! Thank you."),r()};return d.jsx("div",{className:"page active",id:"checkout-page",style:{paddingTop:"70px"},children:d.jsxs("div",{className:"container checkout-page-container",children:[d.jsxs("section",{className:"checkout-header-section",children:[d.jsx("h1",{children:C?"Rental Confirmed!":"Complete Your Rental"}),d.jsx("p",{children:C?"Thank you for your order. A receipt is available for your records.":"Please review and agree to the terms before payment."})]}),C?d.jsxs("div",{className:"checkout-confirmation-section",children:[d.jsx("i",{className:"fas fa-check-circle"}),d.jsxs("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center",gap:"15px"},children:[d.jsxs("button",{className:"btn btn-success",onClick:()=>h(H),children:[d.jsx("i",{className:"fas fa-print"})," Print Receipt"]}),d.jsxs("button",{className:"btn btn-primary",onClick:()=>g("/profile/rental-tracker"),children:[d.jsx("i",{className:"fas fa-route"})," View My Rentals"]})]})]}):d.jsxs("div",{className:"checkout-content-grid",children:[d.jsxs("div",{className:"checkout-forms-container",children:[d.jsxs("div",{id:"checkout-agreement-section",children:[d.jsx("h3",{children:"Rental Agreement"}),d.jsx("div",{className:"agreement-content",dangerouslySetInnerHTML:{__html:P}}),d.jsxs("div",{className:"form-group",style:{display:"flex",alignItems:"center",gap:"10px"},children:[d.jsx("input",{type:"checkbox",id:"checkoutAgreementCheckbox",checked:y,onChange:O=>v(O.target.checked)}),d.jsx("label",{htmlFor:"checkoutAgreementCheckbox",style:{marginBottom:0},children:"I have read and agree to all terms."})]})]}),d.jsx("div",{id:"checkout-payment-section",className:y?"":"disabled",children:d.jsxs("form",{id:"checkoutForm",onSubmit:I,children:[d.jsx("div",{className:"checkout-section",children:d.jsx("h3",{children:"Payment Details"})}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"checkoutCardNumber",children:"Card Number"}),d.jsx("input",{type:"text",id:"checkoutCardNumber",placeholder:"4242 4242 4242 4242",required:!0,value:J.cardNumber,onChange:R})]}),d.jsxs("div",{className:"form-group-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"checkoutExpiryDate",children:"Expiry Date"}),d.jsx("input",{type:"text",id:"checkoutExpiryDate",placeholder:"MM/YY",required:!0,value:J.expiryDate,onChange:R})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{htmlFor:"checkoutCvv",children:"CVV"}),d.jsx("input",{type:"text",id:"checkoutCvv",placeholder:"123",required:!0,value:J.cvv,onChange:R})]})]}),d.jsx("button",{type:"submit",className:"btn btn-primary btn-block",disabled:!y||w,children:w?"Processing...":`Confirm & Pay ${fe.toFixed(2)}`})]})})]}),d.jsxs("aside",{className:"checkout-order-summary",children:[d.jsx("h2",{children:"Order Summary"}),d.jsx("div",{id:"checkoutItemDetails",children:i.map(O=>{const k=n.find(U=>U.id===O.productId);return k?d.jsxs("div",{className:"checkout-summary-item",children:[d.jsx("img",{src:k.image,alt:k.title}),d.jsxs("div",{className:"checkout-summary-item-info",children:[d.jsx("h4",{children:k.title}),d.jsxs("p",{children:[O.rentalDurationDays," day(s) at ",O.rentalTotalCost.toFixed(2)]})]})]},O.productId):null})}),d.jsxs("div",{className:"checkout-price-breakdown",children:[d.jsxs("div",{className:"price-row",children:[d.jsx("span",{className:"label",children:"Rental Cost:"})," ",d.jsxs("span",{children:["",ie.toFixed(2)]})]}),d.jsxs("div",{className:"price-row",children:[d.jsx("span",{className:"label",children:"Delivery Fee:"})," ",d.jsxs("span",{children:["",ue.toFixed(2)]})]}),d.jsxs("div",{className:"price-row",children:[d.jsx("span",{className:"label",children:"Service Fee (5%):"})," ",d.jsxs("span",{children:["",ce.toFixed(2)]})]}),d.jsx("hr",{}),d.jsxs("div",{className:"price-row total",children:[d.jsx("span",{className:"label",children:"Total:"})," ",d.jsxs("span",{children:["",fe.toFixed(2)]})]})]})]})]})]})})},QM=()=>{const{currentUser:i,isLoading:e,logout:n}=Je(),r=jn();M.useEffect(()=>{e||(i?i.role==="admin"&&r("/admin"):r("/"))},[i,e,r]);const o=async g=>{g.preventDefault(),await n()};if(e||!i)return d.jsx("div",{style:{paddingTop:"100px",textAlign:"center"},children:"Loading Profile..."});const c=[{path:"/profile",end:!0,icon:"fas fa-tachometer-alt",label:"Dashboard"},{path:"my-listings",icon:"fas fa-list",label:"My Listings"},{path:"messages",icon:"fas fa-comments",label:"Messages"},{path:"rental-tracker",icon:"fas fa-route",label:"Rental Tracker"},{path:"settings",icon:"fas fa-cog",label:"Settings"}],h=[{path:"/profile",end:!0,icon:"fas fa-tachometer-alt",label:"Dashboard"},{path:"favorites",icon:"fas fa-heart",label:"Favorites"},{path:"messages",icon:"fas fa-comments",label:"Messages"},{path:"rental-tracker",icon:"fas fa-route",label:"Rental Tracker"},{path:"settings",icon:"fas fa-cog",label:"Settings"}],p=i.role==="owner"?c:h;return d.jsx("div",{className:"page active",id:"profilePage",style:{paddingTop:"70px"},children:d.jsx("div",{className:"container profile-page-main-container",children:d.jsxs("div",{className:"profile-container",children:[d.jsxs("aside",{className:"profile-sidebar",children:[d.jsx("img",{src:i.profile_pic||"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1160&q=80",alt:"Profile",id:"profilePicSidebar"}),d.jsx("h3",{children:i.name}),d.jsx("p",{children:i.email}),d.jsxs("ul",{className:"sidebar-menu",children:[p.map(g=>d.jsx("li",{children:d.jsxs(ni,{to:g.path,end:g.end,children:[d.jsx("i",{className:g.icon})," ",g.label]})},g.path)),d.jsx("li",{children:d.jsxs("a",{href:"#",onClick:o,children:[d.jsx("i",{className:"fas fa-sign-out-alt"})," Logout"]})})]})]}),d.jsx("main",{className:"profile-main-content",children:d.jsx(Rp,{})})]})})})},XM=()=>{const{currentUser:i,isLoading:e,logout:n}=Je(),r=jn();M.useEffect(()=>{!e&&(!i||i.role!=="admin")&&r("/")},[i,e,r]);const o=async c=>{c.preventDefault(),await n()};return e||!i?d.jsx("div",{style:{paddingTop:"100px",textAlign:"center"},children:"Authorizing..."}):d.jsx("div",{className:"page active",id:"adminDashboardPage",style:{paddingTop:"70px"},children:d.jsxs("div",{className:"container admin-dashboard-container",children:[d.jsxs("aside",{className:"admin-sidebar",children:[d.jsx("img",{src:i.profile_pic||"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1160&q=80",alt:"Admin Profile",id:"adminSidebarPic"}),d.jsx("h3",{children:i.name}),d.jsx("p",{children:i.email}),d.jsxs("ul",{className:"sidebar-menu",children:[d.jsx("li",{children:d.jsxs(ni,{to:"/admin",end:!0,children:[d.jsx("i",{className:"fas fa-chart-line"})," Overview"]})}),d.jsx("li",{children:d.jsxs(ni,{to:"/admin/users",children:[d.jsx("i",{className:"fas fa-users-cog"})," User Management"]})}),d.jsx("li",{children:d.jsxs(ni,{to:"/admin/listings",children:[d.jsx("i",{className:"fas fa-tasks"})," Listing Management"]})}),d.jsx("li",{children:d.jsxs(ni,{to:"/admin/content",children:[d.jsx("i",{className:"fas fa-file-alt"})," Content Management"]})}),d.jsx("li",{children:d.jsxs(ni,{to:"/admin/settings",children:[d.jsx("i",{className:"fas fa-user-cog"})," Admin Settings"]})}),d.jsx("li",{children:d.jsxs("a",{href:"#",onClick:o,children:[d.jsx("i",{className:"fas fa-sign-out-alt"})," Logout"]})})]})]}),d.jsx("main",{className:"admin-main-content",children:d.jsx(Rp,{})})]})})},WM=()=>{const{currentUser:i,chatThreads:e,openChat:n,closeChat:r,chatPartner:o,chatMessages:c,sendMessage:h}=Je(),[p,g]=XT.useState(""),y=M.useRef(null);M.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[c]),M.useEffect(()=>{!o&&e.length>0&&n(e[0].partner)},[e,o]);const v=()=>{p.trim()&&(h(p),g(""))};return i?d.jsx("div",{className:"page active",id:"chat-page",style:{paddingTop:"70px"},children:d.jsxs("div",{className:"chat-inbox-container",children:[d.jsxs("aside",{className:"conversation-list",children:[d.jsx("div",{className:"inbox-header",children:d.jsx("h2",{children:"Inbox"})}),e.map(w=>d.jsxs("div",{className:`conversation-item ${o?.email===w.partner.email?"active":""}`,onClick:()=>n(w.partner),children:[d.jsx("img",{src:w.partner.profilePic||"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1160&q=80",alt:w.partner.name,className:"conversation-avatar"}),d.jsxs("div",{className:"conversation-details",children:[d.jsx("h4",{children:w.partner.name}),d.jsx("p",{children:w.messages.length>0?w.messages[w.messages.length-1].content:"No messages yet"})]}),w.unreadCount>0&&d.jsx("span",{className:"unread-badge",children:w.unreadCount})]},w.thread_id))]}),d.jsx("main",{className:"active-chat-window",children:o?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"chat-header",children:d.jsx("h3",{children:o.name})}),d.jsxs("div",{className:"chat-messages-container",children:[c.map(w=>{const A=w.sender_email===i.email,C=new Date(w.created_at).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});return d.jsx("div",{className:`chat-message ${A?"sent":"received"}`,children:d.jsxs("div",{className:"message-content",children:[d.jsx("span",{className:"message-sender",children:A?"You":o.name}),w.content,d.jsx("span",{className:"message-timestamp",children:C})]})},w.id)}),d.jsx("div",{ref:y})]}),d.jsxs("div",{className:"chat-input-area",children:[d.jsx("input",{type:"text",className:"chat-message-input",placeholder:"Type your message...",value:p,onChange:w=>g(w.target.value),onKeyPress:w=>w.key==="Enter"&&v()}),d.jsx("button",{className:"chat-send-message-btn",onClick:v,children:d.jsx("i",{className:"fas fa-paper-plane"})})]})]}):d.jsx("div",{className:"no-chat-selected",children:d.jsx("p",{children:"Select a conversation to start chatting."})})})]})}):d.jsx("div",{className:"page active",style:{paddingTop:"100px",textAlign:"center"},children:"Please log in to view your messages."})},ZM=({user:i,products:e,ownerLentHistory:n})=>{const r=e.filter(h=>h.ownerId===i.id).length,o=n.filter(h=>h.status==="Active").length,c=n.filter(h=>h.status==="Completed").reduce((h,p)=>h+p.rentalTotalCost,0);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"profile-view-header",children:[d.jsxs("h1",{children:["Welcome, ",i.name,"!"]}),d.jsx("p",{children:"Here's an overview of your rental activity."})]}),d.jsxs("div",{className:"analytics-grid",children:[d.jsxs("div",{className:"analytics-card",children:[d.jsx("div",{className:"analytics-value",children:r}),d.jsx("div",{className:"analytics-label",children:"Total Listings"})]}),d.jsxs("div",{className:"analytics-card",children:[d.jsx("div",{className:"analytics-value",children:o}),d.jsx("div",{className:"analytics-label",children:"Items Rented Out"})]}),d.jsxs("div",{className:"analytics-card",children:[d.jsxs("div",{className:"analytics-value",children:["",c.toFixed(2)]}),d.jsx("div",{className:"analytics-label",children:"Total Earnings"})]})]})]})},JM=({user:i,rentalHistory:e})=>d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"profile-view-header",children:[d.jsxs("h1",{children:["Welcome, ",i.name,"!"]}),d.jsx("p",{children:"Here's a summary of your account."})]}),d.jsx("div",{className:"analytics-grid",children:d.jsxs("div",{className:"analytics-card",children:[d.jsx("div",{className:"analytics-value",children:e?e.filter(n=>n.status==="Active").length:0}),d.jsx("div",{className:"analytics-label",children:"Active Rentals"})]})})]}),ej=()=>{const{currentUser:i,products:e,rentalHistory:n,ownerLentHistory:r}=Je();return i?d.jsx("div",{className:"profile-view",children:i.role==="owner"?d.jsx(ZM,{user:i,products:e,ownerLentHistory:r}):d.jsx(JM,{user:i,rentalHistory:n})}):null},tj=({itemToEdit:i,closeModal:e})=>{const{addItem:n,updateItem:r,showToast:o,categories:c,tags:h}=Je(),p=!!i,g={title:"",categoryId:"",price_per_day:"",image_url:"",description:"",tags:""},[y,v]=M.useState(g);M.useEffect(()=>{if(p&&i){const D=c.find(H=>H.name===i.category);v({title:i.title||"",categoryId:D?D.id:"",price_per_day:i.price_per_day?String(i.price_per_day):"",image_url:i.image_url||"",description:i.description||"",tags:i.tags?i.tags.join(", "):""})}else v(g)},[i,p,c]);const w=D=>{v({...y,[D.target.name]:D.target.value})},A=D=>D.trim()?D.split(",").map(L=>L.trim().toLowerCase()).map(L=>{const J=h.find(X=>X.name.toLowerCase()===L);return J?J.id:null}).filter(Boolean):[],C=D=>{if(D.preventDefault(),!y.title||!y.categoryId||!y.price_per_day||!y.image_url||!y.description){o("Please fill out all required fields marked with *.");return}const H=parseFloat(y.price_per_day);if(isNaN(H)||H<=0){o("Please enter a valid positive number for the price.");return}const L={title:y.title,categoryId:y.categoryId,price_per_day:H,image_url:y.image_url,description:y.description,tags:A(y.tags)};p?r(i.id,L):n(L),e()};return d.jsx("div",{className:"modal",style:{display:"flex"},children:d.jsxs("div",{className:"modal-container",children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:p?"Edit Listing":"Create New Listing"}),d.jsx("button",{className:"modal-close-btn",onClick:e,children:""})]}),d.jsx("div",{className:"modal-body",children:d.jsxs("form",{onSubmit:C,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Title*"}),d.jsx("input",{type:"text",name:"title",value:y.title,onChange:w,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Category*"}),d.jsxs("select",{name:"categoryId",value:y.categoryId,onChange:w,required:!0,children:[d.jsx("option",{value:"",disabled:!0,children:"Select a Category"}),c.map(D=>d.jsx("option",{value:D.id,children:D.name},D.id))]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Price per day ($)*"}),d.jsx("input",{type:"number",name:"price_per_day",value:y.price_per_day,onChange:w,required:!0,placeholder:"25.00",step:"0.01",min:"0.01"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Image URL*"}),d.jsx("input",{type:"url",name:"image_url",value:y.image_url,onChange:w,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Tags (comma-separated)"}),d.jsx("input",{type:"text",name:"tags",value:y.tags,onChange:w})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Description*"}),d.jsx("textarea",{name:"description",rows:"4",value:y.description,onChange:w,required:!0})]}),d.jsx("button",{type:"submit",className:"btn btn-primary btn-block",children:p?"Save Changes":"Submit Listing"})]})})]})})},nj=({item:i,onEdit:e,onDelete:n})=>d.jsxs("div",{className:"product-card",children:[d.jsx("img",{src:i.image_url,alt:i.title,className:"product-img"}),d.jsxs("div",{className:"product-info",children:[d.jsx("span",{className:"product-category",children:i.category}),d.jsx("h3",{className:"product-title",children:i.title}),d.jsxs("div",{className:"product-price",children:["$",i.price_per_day,"/day"]}),d.jsxs("div",{className:"product-meta profile-card-meta",children:[d.jsxs("button",{className:"btn btn-outline btn-small",onClick:()=>e(i),children:[d.jsx("i",{className:"fas fa-edit"})," Edit"]}),d.jsxs("button",{className:"btn btn-danger btn-small",onClick:()=>n(i.id),children:[d.jsx("i",{className:"fas fa-trash"})," Delete"]})]})]})]}),ij=()=>{const{currentUser:i,items:e,deleteItem:n}=Je(),[r,o]=M.useState(!1),[c,h]=M.useState(null),p=w=>{h(w),o(!0)},g=()=>{h(null),o(!0)},y=w=>{window.confirm("Are you sure you want to delete this listing? This action cannot be undone.")&&n(w)},v=i?e.filter(w=>w.ownerId===i.uid):[];return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"profile-view",children:[d.jsxs("div",{className:"profile-view-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[d.jsx("h1",{children:"My Listings"}),d.jsx("button",{className:"btn btn-primary",onClick:g,children:"Add New Listing"})]}),v.length>0?d.jsx("div",{className:"products-grid",children:v.map(w=>d.jsx(nj,{item:w,onEdit:p,onDelete:y},w.id))}):d.jsx("p",{children:`You haven't listed any items yet. Click "Add New Listing" to get started!`})]}),r&&d.jsx(tj,{itemToEdit:c,closeModal:()=>o(!1)})]})},sj=()=>{const{items:i,favorites:e,itemsLoading:n}=Je();if(n)return d.jsxs("div",{className:"profile-view",children:[d.jsx("div",{className:"profile-view-header",children:d.jsx("h1",{children:"My Favorites"})}),d.jsx("p",{children:"Loading favorites..."})]});const r=e.map(o=>i.find(c=>c.id===o)).filter(Boolean);return d.jsxs("div",{className:"profile-view",children:[d.jsx("div",{className:"profile-view-header",children:d.jsx("h1",{children:"My Favorites"})}),r.length>0?d.jsx("div",{className:"products-grid",children:r.map(o=>d.jsx(Ag,{item:o},o.id))}):d.jsx("p",{children:"You haven't favorited any items yet. Click the heart icon on any item to save it here."})]})},rj=()=>{const{currentUser:i,showToast:e,updateUser:n,updateUserPassword:r}=Je(),[o,c]=M.useState({name:"",profile_pic_url:"",location:"",phone:""}),[h,p]=M.useState({newPassword:"",confirmNewPassword:""});M.useEffect(()=>{i&&c({name:`${i.first_name||""} ${i.last_name||""}`.trim(),profile_pic_url:i.profile_pic_url||"",location:i.location||"",phone:i.phone||""})},[i]);const g=w=>c({...o,[w.target.name]:w.target.value}),y=w=>p({...h,[w.target.name]:w.target.value}),v=async w=>{w.preventDefault();const[A,...C]=o.name.split(" "),D=C.join(" "),H={first_name:A,last_name:D,profile_pic_url:o.profile_pic_url,location:o.location,phone:o.phone};if(await n(i.uid,H),h.newPassword){if(h.newPassword!==h.confirmNewPassword){e("New passwords do not match.");return}await r(h.newPassword),p({newPassword:"",confirmNewPassword:""})}};return d.jsxs("div",{className:"profile-view",children:[d.jsx("div",{className:"profile-view-header",children:d.jsx("h1",{children:"Settings"})}),d.jsxs("form",{onSubmit:v,children:[d.jsx("h3",{children:"Personal Information"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Full Name*"}),d.jsx("input",{type:"text",name:"name",value:o.name,onChange:g,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Email"}),d.jsx("input",{type:"email",name:"email",value:i?.email||"",readOnly:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Profile Picture URL"}),d.jsx("input",{type:"url",name:"profile_pic_url",value:o.profile_pic_url,onChange:g})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Location"}),d.jsx("input",{type:"text",name:"location",value:o.location,onChange:g})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Phone Number"}),d.jsx("input",{type:"text",name:"phone",value:o.phone,onChange:g})]}),d.jsx("hr",{}),d.jsx("h3",{children:"Change Password"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"New Password"}),d.jsx("input",{type:"password",name:"newPassword",value:h.newPassword,onChange:y})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Confirm New Password"}),d.jsx("input",{type:"password",name:"confirmNewPassword",value:h.confirmNewPassword,onChange:y})]}),d.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save All Changes"})]})]})},KT=({rental:i,product:e,isOwnerView:n,onStatusUpdate:r,onPrint:o})=>d.jsxs("div",{className:"rental-tracker-item",children:[d.jsx("img",{src:e.image,alt:e.title}),d.jsxs("div",{className:"rental-tracker-info",children:[d.jsx("h4",{children:e.title}),n?d.jsxs("p",{children:["Rented by: ",i.renterName]}):d.jsxs("p",{children:["Owner: ",e.ownerName]}),d.jsxs("p",{children:["Start Date: ",new Date(i.rentalStartDate).toLocaleDateString()]}),d.jsxs("p",{children:["Status: ",d.jsx("span",{className:i.status==="Active"?"status-active":"status-rented",children:i.status})]})]}),d.jsxs("div",{className:"rental-tracker-actions",children:[n&&i.status==="Active"&&d.jsx("button",{className:"btn btn-success btn-small",onClick:()=>r(i.transactionId,"Completed"),children:"Mark as Returned"}),!n&&d.jsxs("button",{className:"btn btn-outline btn-small",onClick:()=>o(i),children:[d.jsx("i",{className:"fas fa-print"})," Print Receipt"]})]})]}),aj=()=>{const{currentUser:i,products:e,rentalHistory:n,ownerLentHistory:r,generateAndPrintReceipt:o,updateRentalStatus:c}=Je();if(!i)return d.jsxs("div",{className:"profile-view",children:[d.jsx("div",{className:"profile-view-header",children:d.jsx("h1",{children:"Rental Tracker"})}),d.jsx("p",{children:"Loading rental history..."})]});const h=v=>{const w={transactionId:v.transactionId,date:v.rentalStartDate,items:[{productId:v.productId,rentalDurationDays:v.rentalDurationDays,rentalTotalCost:v.rentalTotalCost}],rentalCost:v.rentalTotalCost,deliveryFee:v.deliveryFee,serviceFee:v.serviceFee,totalAmount:v.totalAmount};o(w)},p=i.role==="owner"?r:n,g=p.filter(v=>v.status==="Active"),y=p.filter(v=>v.status==="Completed");return d.jsxs("div",{className:"profile-view",children:[d.jsxs("div",{className:"profile-view-header",children:[d.jsx("h1",{children:"Rental Tracker"}),d.jsx("p",{children:i.role==="owner"?"Track items you've lent out.":"Track items you've rented."})]}),d.jsxs("div",{id:"rentalTrackerGrid",children:[d.jsx("h3",{children:"Active Rentals"}),g.length>0?g.map(v=>{const w=e.find(A=>A.id===v.productId);return w?d.jsx(KT,{rental:v,product:w,isOwnerView:i.role==="owner",onStatusUpdate:c,onPrint:h},v.transactionId):null}):d.jsx("p",{children:"You have no active rentals."}),d.jsx("h3",{children:"Completed Rentals"}),y.length>0?y.map(v=>{const w=e.find(A=>A.id===v.productId);return w?d.jsx(KT,{rental:v,product:w,isOwnerView:i.role==="owner",onPrint:h},v.transactionId):null}):d.jsx("p",{children:"You have no completed rentals."})]})]})},oj=()=>{const{chatThreads:i}=Je(),e=jn(),n=r=>{e(`/chat?thread_id=${r}`)};return d.jsxs("div",{className:"profile-view",children:[d.jsxs("div",{className:"profile-view-header",children:[d.jsx("h1",{children:"My Conversations"}),d.jsx("p",{children:"Select a conversation to view your chat history."})]}),d.jsx("div",{className:"chat-thread-list",children:i?i.length>0?i.map(r=>r.partner?d.jsxs("div",{className:"chat-thread-item",onClick:()=>n(r.thread_id),children:[d.jsx("img",{src:r.partner.profile_pic,alt:r.partner.name,className:"chat-thread-avatar"}),d.jsxs("div",{className:"chat-thread-info",children:[d.jsx("h4",{children:r.partner.name}),d.jsx("p",{children:r.last_message_content?`${r.last_message_content.substring(0,40)}...`:"No messages yet"})]}),r.unread_count>0&&d.jsx("span",{className:"unread-count-badge",children:r.unread_count})]},r.thread_id):null):d.jsx("p",{children:"You have no active conversations. Start a chat with an item owner to see it here."}):d.jsx("p",{children:"Loading conversations..."})})]})},lj=()=>{const{allProfiles:i,products:e,isLoading:n}=Je();if(n)return d.jsx("p",{children:"Loading overview..."});const r=i?i.length:0,o=e?e.length:0;return d.jsxs("div",{className:"admin-view",children:[d.jsx("div",{className:"admin-view-header",children:d.jsx("h1",{children:"Admin Overview"})}),d.jsxs("div",{className:"analytics-grid",children:[d.jsxs("div",{className:"analytics-card",children:[d.jsx("div",{className:"analytics-value",children:r}),d.jsx("div",{className:"analytics-label",children:"Total Users"})]}),d.jsxs("div",{className:"analytics-card",children:[d.jsx("div",{className:"analytics-value",children:o}),d.jsx("div",{className:"analytics-label",children:"Total Listings"})]})]})]})},cj=()=>{const{allProfiles:i,isLoading:e}=Je();return e||!i?d.jsx("p",{children:"Loading user data..."}):d.jsxs("div",{className:"admin-view",children:[d.jsx("div",{className:"admin-view-header",children:d.jsx("h1",{children:"User Management"})}),d.jsx("div",{className:"admin-table-container",children:d.jsxs("table",{className:"admin-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Name"}),d.jsx("th",{children:"Email"}),d.jsx("th",{children:"Role"}),d.jsx("th",{children:"Status"}),d.jsx("th",{children:"User ID"})]})}),d.jsx("tbody",{children:i.map(n=>d.jsxs("tr",{children:[d.jsxs("td",{children:[n.first_name," ",n.last_name]}),d.jsx("td",{children:n.email}),d.jsx("td",{children:n.role}),d.jsx("td",{children:d.jsx("span",{className:`status-${n.verification_status||"unverified"}`,children:n.verification_status||"unverified"})}),d.jsx("td",{children:n.id})]},n.id))})]})})]})},uj=()=>{const{products:i,updateProductStatus:e,deleteProduct:n}=Je(),r=o=>{window.confirm("ADMIN: Are you sure you want to PERMANENTLY delete this listing? This is irreversible.")&&n(o)};return d.jsxs("div",{className:"admin-view",children:[d.jsxs("div",{className:"admin-view-header",children:[d.jsx("h1",{children:"Listing Management"}),d.jsx("p",{children:"Manage item availability and delete listings."})]}),d.jsx("div",{className:"admin-table-container",children:d.jsxs("table",{className:"admin-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Title"}),d.jsx("th",{children:"Owner"}),d.jsx("th",{children:"Status"}),d.jsx("th",{children:"Actions"})]})}),d.jsx("tbody",{children:i.map(o=>d.jsxs("tr",{children:[d.jsx("td",{children:o.title}),d.jsxs("td",{children:[o.ownerName||"N/A",d.jsxs("div",{className:"admin-listing-owner-info",children:[o.ownerEmail||"No Email"," (",o.ownerId||"No ID",")"]})]}),d.jsx("td",{children:d.jsx("span",{className:`status-${o.status}`,children:o.status})}),d.jsxs("td",{className:"actions-cell",children:[o.status==="approved"?d.jsx("button",{className:"btn btn-secondary btn-small",onClick:()=>e(o.id,"unavailable"),children:"Make Unavailable"}):d.jsx("button",{className:"btn btn-success btn-small",onClick:()=>e(o.id,"approved"),children:"Make Available"}),d.jsx("button",{className:"btn btn-danger btn-small",onClick:()=>r(o.id),children:"Delete"})]})]},o.id))})]})})]})},hj=()=>{const{currentUser:i,showToast:e,updateUser:n,updateUserPassword:r}=Je(),[o,c]=M.useState({first_name:"",last_name:"",profile_pic_url:""}),[h,p]=M.useState({newPassword:"",confirmNewPassword:""});M.useEffect(()=>{i&&c({first_name:i.first_name||"",last_name:i.last_name||"",profile_pic_url:i.profile_pic_url||""})},[i]);const g=w=>{c({...o,[w.target.name]:w.target.value})},y=w=>{p({...h,[w.target.name]:w.target.value})},v=async w=>{if(w.preventDefault(),await n(i.uid,o),h.newPassword){if(h.newPassword!==h.confirmNewPassword){e("New passwords do not match.");return}await r(h.newPassword),p({newPassword:"",confirmNewPassword:""})}};return d.jsxs("div",{className:"admin-view",children:[d.jsx("div",{className:"admin-view-header",children:d.jsx("h1",{children:"Admin Account Settings"})}),d.jsxs("form",{onSubmit:v,children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"First Name*"}),d.jsx("input",{type:"text",name:"first_name",value:o.first_name,onChange:g,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Last Name*"}),d.jsx("input",{type:"text",name:"last_name",value:o.last_name,onChange:g,required:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Email"}),d.jsx("input",{type:"email",value:i?.email||"",readOnly:!0})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Profile Picture URL"}),d.jsx("input",{type:"url",name:"profile_pic_url",value:o.profile_pic_url,onChange:g})]}),d.jsx("hr",{}),d.jsx("h3",{children:"Change Password"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"New Password"}),d.jsx("input",{type:"password",name:"newPassword",value:h.newPassword,onChange:y})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Confirm New Password"}),d.jsx("input",{type:"password",name:"confirmNewPassword",value:h.confirmNewPassword,onChange:y})]}),d.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"})]})]})},fj=()=>{const{rentalAgreementTemplate:i,setRentalAgreementTemplate:e,showToast:n}=Je(),[r,o]=M.useState(i),c=()=>{e(r),n("Templates saved successfully!")};return d.jsxs("div",{className:"admin-view",children:[d.jsxs("div",{className:"admin-view-header",children:[d.jsx("h1",{children:"Content & Template Management"}),d.jsx("p",{children:"Edit site-wide templates and important text content."})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Standard Rental Agreement Snippet:"}),d.jsx("textarea",{rows:"10",value:r,onChange:h=>o(h.target.value)})]}),d.jsx("button",{className:"btn btn-primary",onClick:c,children:"Save Templates"})]})};function dj(){return d.jsx(TR,{children:d.jsxs(lt,{path:"/",element:d.jsx(MM,{}),children:[d.jsx(lt,{index:!0,element:d.jsx(jM,{})}),d.jsx(lt,{path:"products",element:d.jsx(PM,{})}),d.jsx(lt,{path:"about",element:d.jsx(LM,{})}),d.jsx(lt,{path:"contact",element:d.jsx(UM,{})}),d.jsx(lt,{path:"faq",element:d.jsx(qM,{})}),d.jsx(lt,{path:"privacy-policy",element:d.jsx(HM,{})}),d.jsx(lt,{path:"listing/:id",element:d.jsx(YM,{})}),d.jsx(lt,{path:"cart",element:d.jsx($M,{})}),d.jsx(lt,{path:"checkout",element:d.jsx(KM,{})}),d.jsx(lt,{path:"chat",element:d.jsx(WM,{})}),d.jsxs(lt,{path:"profile",element:d.jsx(QM,{}),children:[d.jsx(lt,{index:!0,element:d.jsx(ej,{})}),d.jsx(lt,{path:"my-listings",element:d.jsx(ij,{})}),d.jsx(lt,{path:"favorites",element:d.jsx(sj,{})}),d.jsx(lt,{path:"rental-tracker",element:d.jsx(aj,{})}),d.jsx(lt,{path:"messages",element:d.jsx(oj,{})}),d.jsx(lt,{path:"settings",element:d.jsx(rj,{})})]}),d.jsxs(lt,{path:"admin",element:d.jsx(XM,{}),children:[d.jsx(lt,{index:!0,element:d.jsx(lj,{})}),d.jsx(lt,{path:"users",element:d.jsx(cj,{})}),d.jsx(lt,{path:"listings",element:d.jsx(uj,{})}),d.jsx(lt,{path:"content",element:d.jsx(fj,{})}),d.jsx(lt,{path:"settings",element:d.jsx(hj,{})})]})]})})}IS.createRoot(document.getElementById("root")).render(d.jsx(XT.StrictMode,{children:d.jsx(GR,{children:d.jsx(F2,{children:d.jsx(dj,{})})})}));
